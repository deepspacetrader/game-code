(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function r(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(o){if(o.ep)return;o.ep=!0;const c=r(o);fetch(o.href,c)}})();var Tg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Sh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Nh={exports:{}},jo={},jh={exports:{}},he={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $i=Symbol.for("react.element"),Lg=Symbol.for("react.portal"),Ag=Symbol.for("react.fragment"),Mg=Symbol.for("react.strict_mode"),Og=Symbol.for("react.profiler"),Ig=Symbol.for("react.provider"),Rg=Symbol.for("react.context"),zg=Symbol.for("react.forward_ref"),Dg=Symbol.for("react.suspense"),Bg=Symbol.for("react.memo"),Fg=Symbol.for("react.lazy"),ad=Symbol.iterator;function Ug(e){return e===null||typeof e!="object"?null:(e=ad&&e[ad]||e["@@iterator"],typeof e=="function"?e:null)}var kh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ch=Object.assign,Ph={};function Wr(e,t,r){this.props=e,this.context=t,this.refs=Ph,this.updater=r||kh}Wr.prototype.isReactComponent={};Wr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Wr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Eh(){}Eh.prototype=Wr.prototype;function Ql(e,t,r){this.props=e,this.context=t,this.refs=Ph,this.updater=r||kh}var Xl=Ql.prototype=new Eh;Xl.constructor=Ql;Ch(Xl,Wr.prototype);Xl.isPureReactComponent=!0;var ld=Array.isArray,Th=Object.prototype.hasOwnProperty,ec={current:null},Lh={key:!0,ref:!0,__self:!0,__source:!0};function Ah(e,t,r){var s,o={},c=null,u=null;if(t!=null)for(s in t.ref!==void 0&&(u=t.ref),t.key!==void 0&&(c=""+t.key),t)Th.call(t,s)&&!Lh.hasOwnProperty(s)&&(o[s]=t[s]);var f=arguments.length-2;if(f===1)o.children=r;else if(1<f){for(var m=Array(f),g=0;g<f;g++)m[g]=arguments[g+2];o.children=m}if(e&&e.defaultProps)for(s in f=e.defaultProps,f)o[s]===void 0&&(o[s]=f[s]);return{$$typeof:$i,type:e,key:c,ref:u,props:o,_owner:ec.current}}function Zg(e,t){return{$$typeof:$i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function tc(e){return typeof e=="object"&&e!==null&&e.$$typeof===$i}function Wg(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var cd=/\/+/g;function ja(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Wg(""+e.key):t.toString(36)}function Ds(e,t,r,s,o){var c=typeof e;(c==="undefined"||c==="boolean")&&(e=null);var u=!1;if(e===null)u=!0;else switch(c){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case $i:case Lg:u=!0}}if(u)return u=e,o=o(u),e=s===""?"."+ja(u,0):s,ld(o)?(r="",e!=null&&(r=e.replace(cd,"$&/")+"/"),Ds(o,t,r,"",function(g){return g})):o!=null&&(tc(o)&&(o=Zg(o,r+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(cd,"$&/")+"/")+e)),t.push(o)),1;if(u=0,s=s===""?".":s+":",ld(e))for(var f=0;f<e.length;f++){c=e[f];var m=s+ja(c,f);u+=Ds(c,t,r,m,o)}else if(m=Ug(e),typeof m=="function")for(e=m.call(e),f=0;!(c=e.next()).done;)c=c.value,m=s+ja(c,f++),u+=Ds(c,t,r,m,o);else if(c==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function _s(e,t,r){if(e==null)return e;var s=[],o=0;return Ds(e,s,"","",function(c){return t.call(r,c,o++)}),s}function Vg(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var et={current:null},Bs={transition:null},Hg={ReactCurrentDispatcher:et,ReactCurrentBatchConfig:Bs,ReactCurrentOwner:ec};function Mh(){throw Error("act(...) is not supported in production builds of React.")}he.Children={map:_s,forEach:function(e,t,r){_s(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return _s(e,function(){t++}),t},toArray:function(e){return _s(e,function(t){return t})||[]},only:function(e){if(!tc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};he.Component=Wr;he.Fragment=Ag;he.Profiler=Og;he.PureComponent=Ql;he.StrictMode=Mg;he.Suspense=Dg;he.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hg;he.act=Mh;he.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=Ch({},e.props),o=e.key,c=e.ref,u=e._owner;if(t!=null){if(t.ref!==void 0&&(c=t.ref,u=ec.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var f=e.type.defaultProps;for(m in t)Th.call(t,m)&&!Lh.hasOwnProperty(m)&&(s[m]=t[m]===void 0&&f!==void 0?f[m]:t[m])}var m=arguments.length-2;if(m===1)s.children=r;else if(1<m){f=Array(m);for(var g=0;g<m;g++)f[g]=arguments[g+2];s.children=f}return{$$typeof:$i,type:e.type,key:o,ref:c,props:s,_owner:u}};he.createContext=function(e){return e={$$typeof:Rg,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Ig,_context:e},e.Consumer=e};he.createElement=Ah;he.createFactory=function(e){var t=Ah.bind(null,e);return t.type=e,t};he.createRef=function(){return{current:null}};he.forwardRef=function(e){return{$$typeof:zg,render:e}};he.isValidElement=tc;he.lazy=function(e){return{$$typeof:Fg,_payload:{_status:-1,_result:e},_init:Vg}};he.memo=function(e,t){return{$$typeof:Bg,type:e,compare:t===void 0?null:t}};he.startTransition=function(e){var t=Bs.transition;Bs.transition={};try{e()}finally{Bs.transition=t}};he.unstable_act=Mh;he.useCallback=function(e,t){return et.current.useCallback(e,t)};he.useContext=function(e){return et.current.useContext(e)};he.useDebugValue=function(){};he.useDeferredValue=function(e){return et.current.useDeferredValue(e)};he.useEffect=function(e,t){return et.current.useEffect(e,t)};he.useId=function(){return et.current.useId()};he.useImperativeHandle=function(e,t,r){return et.current.useImperativeHandle(e,t,r)};he.useInsertionEffect=function(e,t){return et.current.useInsertionEffect(e,t)};he.useLayoutEffect=function(e,t){return et.current.useLayoutEffect(e,t)};he.useMemo=function(e,t){return et.current.useMemo(e,t)};he.useReducer=function(e,t,r){return et.current.useReducer(e,t,r)};he.useRef=function(e){return et.current.useRef(e)};he.useState=function(e){return et.current.useState(e)};he.useSyncExternalStore=function(e,t,r){return et.current.useSyncExternalStore(e,t,r)};he.useTransition=function(){return et.current.useTransition()};he.version="18.3.1";jh.exports=he;var I=jh.exports;const Qs=Sh(I);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gg=I,$g=Symbol.for("react.element"),Jg=Symbol.for("react.fragment"),qg=Object.prototype.hasOwnProperty,Yg=Gg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Kg={key:!0,ref:!0,__self:!0,__source:!0};function Oh(e,t,r){var s,o={},c=null,u=null;r!==void 0&&(c=""+r),t.key!==void 0&&(c=""+t.key),t.ref!==void 0&&(u=t.ref);for(s in t)qg.call(t,s)&&!Kg.hasOwnProperty(s)&&(o[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)o[s]===void 0&&(o[s]=t[s]);return{$$typeof:$g,type:e,key:c,ref:u,props:o,_owner:Yg.current}}jo.Fragment=Jg;jo.jsx=Oh;jo.jsxs=Oh;Nh.exports=jo;var a=Nh.exports,el={},Ih={exports:{}},mt={},Rh={exports:{}},zh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(O,V){var P=O.length;O.push(V);e:for(;0<P;){var H=P-1>>>1,ne=O[H];if(0<o(ne,V))O[H]=V,O[P]=ne,P=H;else break e}}function r(O){return O.length===0?null:O[0]}function s(O){if(O.length===0)return null;var V=O[0],P=O.pop();if(P!==V){O[0]=P;e:for(var H=0,ne=O.length,Q=ne>>>1;H<Q;){var re=2*(H+1)-1,J=O[re],K=re+1,Ee=O[K];if(0>o(J,P))K<ne&&0>o(Ee,J)?(O[H]=Ee,O[K]=P,H=K):(O[H]=J,O[re]=P,H=re);else if(K<ne&&0>o(Ee,P))O[H]=Ee,O[K]=P,H=K;else break e}}return V}function o(O,V){var P=O.sortIndex-V.sortIndex;return P!==0?P:O.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var u=Date,f=u.now();e.unstable_now=function(){return u.now()-f}}var m=[],g=[],x=1,v=null,y=3,j=!1,k=!1,C=!1,R=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(O){for(var V=r(g);V!==null;){if(V.callback===null)s(g);else if(V.startTime<=O)s(g),V.sortIndex=V.expirationTime,t(m,V);else break;V=r(g)}}function T(O){if(C=!1,S(O),!k)if(r(m)!==null)k=!0,Z(z);else{var V=r(g);V!==null&&ee(T,V.startTime-O)}}function z(O,V){k=!1,C&&(C=!1,b(U),U=-1),j=!0;var P=y;try{for(S(V),v=r(m);v!==null&&(!(v.expirationTime>V)||O&&!le());){var H=v.callback;if(typeof H=="function"){v.callback=null,y=v.priorityLevel;var ne=H(v.expirationTime<=V);V=e.unstable_now(),typeof ne=="function"?v.callback=ne:v===r(m)&&s(m),S(V)}else s(m);v=r(m)}if(v!==null)var Q=!0;else{var re=r(g);re!==null&&ee(T,re.startTime-V),Q=!1}return Q}finally{v=null,y=P,j=!1}}var F=!1,D=null,U=-1,ie=5,Y=-1;function le(){return!(e.unstable_now()-Y<ie)}function fe(){if(D!==null){var O=e.unstable_now();Y=O;var V=!0;try{V=D(!0,O)}finally{V?we():(F=!1,D=null)}}else F=!1}var we;if(typeof _=="function")we=function(){_(fe)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,G=M.port2;M.port1.onmessage=fe,we=function(){G.postMessage(null)}}else we=function(){R(fe,0)};function Z(O){D=O,F||(F=!0,we())}function ee(O,V){U=R(function(){O(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_continueExecution=function(){k||j||(k=!0,Z(z))},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ie=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return r(m)},e.unstable_next=function(O){switch(y){case 1:case 2:case 3:var V=3;break;default:V=y}var P=y;y=V;try{return O()}finally{y=P}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(O,V){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var P=y;y=O;try{return V()}finally{y=P}},e.unstable_scheduleCallback=function(O,V,P){var H=e.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?H+P:H):P=H,O){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=P+ne,O={id:x++,callback:V,priorityLevel:O,startTime:P,expirationTime:ne,sortIndex:-1},P>H?(O.sortIndex=P,t(g,O),r(m)===null&&O===r(g)&&(C?(b(U),U=-1):C=!0,ee(T,P-H))):(O.sortIndex=ne,t(m,O),k||j||(k=!0,Z(z))),O},e.unstable_shouldYield=le,e.unstable_wrapCallback=function(O){var V=y;return function(){var P=y;y=V;try{return O.apply(this,arguments)}finally{y=P}}}})(zh);Rh.exports=zh;var Qg=Rh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xg=I,ft=Qg;function W(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Dh=new Set,Ti={};function nr(e,t){Rr(e,t),Rr(e+"Capture",t)}function Rr(e,t){for(Ti[e]=t,e=0;e<t.length;e++)Dh.add(t[e])}var sn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),tl=Object.prototype.hasOwnProperty,ex=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ud={},dd={};function tx(e){return tl.call(dd,e)?!0:tl.call(ud,e)?!1:ex.test(e)?dd[e]=!0:(ud[e]=!0,!1)}function nx(e,t,r,s){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function rx(e,t,r,s){if(t===null||typeof t>"u"||nx(e,t,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function tt(e,t,r,s,o,c,u){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=o,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=c,this.removeEmptyString=u}var Ge={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ge[e]=new tt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ge[t]=new tt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ge[e]=new tt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ge[e]=new tt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ge[e]=new tt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ge[e]=new tt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ge[e]=new tt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ge[e]=new tt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ge[e]=new tt(e,5,!1,e.toLowerCase(),null,!1,!1)});var nc=/[\-:]([a-z])/g;function rc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(nc,rc);Ge[t]=new tt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(nc,rc);Ge[t]=new tt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(nc,rc);Ge[t]=new tt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ge[e]=new tt(e,1,!1,e.toLowerCase(),null,!1,!1)});Ge.xlinkHref=new tt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ge[e]=new tt(e,1,!1,e.toLowerCase(),null,!0,!0)});function ic(e,t,r,s){var o=Ge.hasOwnProperty(t)?Ge[t]:null;(o!==null?o.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(rx(t,r,o,s)&&(r=null),s||o===null?tx(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):o.mustUseProperty?e[o.propertyName]=r===null?o.type===3?!1:"":r:(t=o.attributeName,s=o.attributeNamespace,r===null?e.removeAttribute(t):(o=o.type,r=o===3||o===4&&r===!0?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}var cn=Xg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ws=Symbol.for("react.element"),xr=Symbol.for("react.portal"),vr=Symbol.for("react.fragment"),sc=Symbol.for("react.strict_mode"),nl=Symbol.for("react.profiler"),Bh=Symbol.for("react.provider"),Fh=Symbol.for("react.context"),oc=Symbol.for("react.forward_ref"),rl=Symbol.for("react.suspense"),il=Symbol.for("react.suspense_list"),ac=Symbol.for("react.memo"),mn=Symbol.for("react.lazy"),Uh=Symbol.for("react.offscreen"),hd=Symbol.iterator;function oi(e){return e===null||typeof e!="object"?null:(e=hd&&e[hd]||e["@@iterator"],typeof e=="function"?e:null)}var Pe=Object.assign,ka;function gi(e){if(ka===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);ka=t&&t[1]||""}return`
`+ka+e}var Ca=!1;function Pa(e,t){if(!e||Ca)return"";Ca=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(g){var s=g}Reflect.construct(e,[],t)}else{try{t.call()}catch(g){s=g}e.call(t.prototype)}else{try{throw Error()}catch(g){s=g}e()}}catch(g){if(g&&s&&typeof g.stack=="string"){for(var o=g.stack.split(`
`),c=s.stack.split(`
`),u=o.length-1,f=c.length-1;1<=u&&0<=f&&o[u]!==c[f];)f--;for(;1<=u&&0<=f;u--,f--)if(o[u]!==c[f]){if(u!==1||f!==1)do if(u--,f--,0>f||o[u]!==c[f]){var m=`
`+o[u].replace(" at new "," at ");return e.displayName&&m.includes("<anonymous>")&&(m=m.replace("<anonymous>",e.displayName)),m}while(1<=u&&0<=f);break}}}finally{Ca=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?gi(e):""}function ix(e){switch(e.tag){case 5:return gi(e.type);case 16:return gi("Lazy");case 13:return gi("Suspense");case 19:return gi("SuspenseList");case 0:case 2:case 15:return e=Pa(e.type,!1),e;case 11:return e=Pa(e.type.render,!1),e;case 1:return e=Pa(e.type,!0),e;default:return""}}function sl(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case vr:return"Fragment";case xr:return"Portal";case nl:return"Profiler";case sc:return"StrictMode";case rl:return"Suspense";case il:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Fh:return(e.displayName||"Context")+".Consumer";case Bh:return(e._context.displayName||"Context")+".Provider";case oc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ac:return t=e.displayName||null,t!==null?t:sl(e.type)||"Memo";case mn:t=e._payload,e=e._init;try{return sl(e(t))}catch{}}return null}function sx(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return sl(t);case 8:return t===sc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function En(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Zh(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ox(e){var t=Zh(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var o=r.get,c=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(u){s=""+u,c.call(this,u)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(u){s=""+u},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function bs(e){e._valueTracker||(e._valueTracker=ox(e))}function Wh(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=Zh(e)?e.checked?"true":"false":e.value),e=s,e!==r?(t.setValue(e),!0):!1}function Xs(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ol(e,t){var r=t.checked;return Pe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function fd(e,t){var r=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;r=En(t.value!=null?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Vh(e,t){t=t.checked,t!=null&&ic(e,"checked",t,!1)}function al(e,t){Vh(e,t);var r=En(t.value),s=t.type;if(r!=null)s==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ll(e,t.type,r):t.hasOwnProperty("defaultValue")&&ll(e,t.type,En(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function md(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function ll(e,t,r){(t!=="number"||Xs(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var xi=Array.isArray;function Tr(e,t,r,s){if(e=e.options,t){t={};for(var o=0;o<r.length;o++)t["$"+r[o]]=!0;for(r=0;r<e.length;r++)o=t.hasOwnProperty("$"+e[r].value),e[r].selected!==o&&(e[r].selected=o),o&&s&&(e[r].defaultSelected=!0)}else{for(r=""+En(r),t=null,o=0;o<e.length;o++){if(e[o].value===r){e[o].selected=!0,s&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function cl(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(W(91));return Pe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function pd(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(W(92));if(xi(r)){if(1<r.length)throw Error(W(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:En(r)}}function Hh(e,t){var r=En(t.value),s=En(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=""+s)}function gd(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Gh(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ul(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Gh(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ss,$h=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,s,o){MSApp.execUnsafeLocalFunction(function(){return e(t,r,s,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ss=Ss||document.createElement("div"),Ss.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ss.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Li(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var _i={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ax=["Webkit","ms","Moz","O"];Object.keys(_i).forEach(function(e){ax.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),_i[t]=_i[e]})});function Jh(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||_i.hasOwnProperty(e)&&_i[e]?(""+t).trim():t+"px"}function qh(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var s=r.indexOf("--")===0,o=Jh(r,t[r],s);r==="float"&&(r="cssFloat"),s?e.setProperty(r,o):e[r]=o}}var lx=Pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dl(e,t){if(t){if(lx[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(W(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(W(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(W(61))}if(t.style!=null&&typeof t.style!="object")throw Error(W(62))}}function hl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fl=null;function lc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ml=null,Lr=null,Ar=null;function xd(e){if(e=Yi(e)){if(typeof ml!="function")throw Error(W(280));var t=e.stateNode;t&&(t=To(t),ml(e.stateNode,e.type,t))}}function Yh(e){Lr?Ar?Ar.push(e):Ar=[e]:Lr=e}function Kh(){if(Lr){var e=Lr,t=Ar;if(Ar=Lr=null,xd(e),t)for(e=0;e<t.length;e++)xd(t[e])}}function Qh(e,t){return e(t)}function Xh(){}var Ea=!1;function ef(e,t,r){if(Ea)return e(t,r);Ea=!0;try{return Qh(e,t,r)}finally{Ea=!1,(Lr!==null||Ar!==null)&&(Xh(),Kh())}}function Ai(e,t){var r=e.stateNode;if(r===null)return null;var s=To(r);if(s===null)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(W(231,t,typeof r));return r}var pl=!1;if(sn)try{var ai={};Object.defineProperty(ai,"passive",{get:function(){pl=!0}}),window.addEventListener("test",ai,ai),window.removeEventListener("test",ai,ai)}catch{pl=!1}function cx(e,t,r,s,o,c,u,f,m){var g=Array.prototype.slice.call(arguments,3);try{t.apply(r,g)}catch(x){this.onError(x)}}var wi=!1,eo=null,to=!1,gl=null,ux={onError:function(e){wi=!0,eo=e}};function dx(e,t,r,s,o,c,u,f,m){wi=!1,eo=null,cx.apply(ux,arguments)}function hx(e,t,r,s,o,c,u,f,m){if(dx.apply(this,arguments),wi){if(wi){var g=eo;wi=!1,eo=null}else throw Error(W(198));to||(to=!0,gl=g)}}function rr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function tf(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function vd(e){if(rr(e)!==e)throw Error(W(188))}function fx(e){var t=e.alternate;if(!t){if(t=rr(e),t===null)throw Error(W(188));return t!==e?null:e}for(var r=e,s=t;;){var o=r.return;if(o===null)break;var c=o.alternate;if(c===null){if(s=o.return,s!==null){r=s;continue}break}if(o.child===c.child){for(c=o.child;c;){if(c===r)return vd(o),e;if(c===s)return vd(o),t;c=c.sibling}throw Error(W(188))}if(r.return!==s.return)r=o,s=c;else{for(var u=!1,f=o.child;f;){if(f===r){u=!0,r=o,s=c;break}if(f===s){u=!0,s=o,r=c;break}f=f.sibling}if(!u){for(f=c.child;f;){if(f===r){u=!0,r=c,s=o;break}if(f===s){u=!0,s=c,r=o;break}f=f.sibling}if(!u)throw Error(W(189))}}if(r.alternate!==s)throw Error(W(190))}if(r.tag!==3)throw Error(W(188));return r.stateNode.current===r?e:t}function nf(e){return e=fx(e),e!==null?rf(e):null}function rf(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=rf(e);if(t!==null)return t;e=e.sibling}return null}var sf=ft.unstable_scheduleCallback,yd=ft.unstable_cancelCallback,mx=ft.unstable_shouldYield,px=ft.unstable_requestPaint,Ae=ft.unstable_now,gx=ft.unstable_getCurrentPriorityLevel,cc=ft.unstable_ImmediatePriority,of=ft.unstable_UserBlockingPriority,no=ft.unstable_NormalPriority,xx=ft.unstable_LowPriority,af=ft.unstable_IdlePriority,ko=null,Ht=null;function vx(e){if(Ht&&typeof Ht.onCommitFiberRoot=="function")try{Ht.onCommitFiberRoot(ko,e,void 0,(e.current.flags&128)===128)}catch{}}var It=Math.clz32?Math.clz32:wx,yx=Math.log,_x=Math.LN2;function wx(e){return e>>>=0,e===0?32:31-(yx(e)/_x|0)|0}var Ns=64,js=4194304;function vi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ro(e,t){var r=e.pendingLanes;if(r===0)return 0;var s=0,o=e.suspendedLanes,c=e.pingedLanes,u=r&268435455;if(u!==0){var f=u&~o;f!==0?s=vi(f):(c&=u,c!==0&&(s=vi(c)))}else u=r&~o,u!==0?s=vi(u):c!==0&&(s=vi(c));if(s===0)return 0;if(t!==0&&t!==s&&!(t&o)&&(o=s&-s,c=t&-t,o>=c||o===16&&(c&4194240)!==0))return t;if(s&4&&(s|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)r=31-It(t),o=1<<r,s|=e[r],t&=~o;return s}function bx(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Sx(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,o=e.expirationTimes,c=e.pendingLanes;0<c;){var u=31-It(c),f=1<<u,m=o[u];m===-1?(!(f&r)||f&s)&&(o[u]=bx(f,t)):m<=t&&(e.expiredLanes|=f),c&=~f}}function xl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function lf(){var e=Ns;return Ns<<=1,!(Ns&4194240)&&(Ns=64),e}function Ta(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Ji(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-It(t),e[t]=r}function Nx(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var o=31-It(r),c=1<<o;t[o]=0,s[o]=-1,e[o]=-1,r&=~c}}function uc(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-It(r),o=1<<s;o&t|e[s]&t&&(e[s]|=t),r&=~o}}var ve=0;function cf(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var uf,dc,df,hf,ff,vl=!1,ks=[],wn=null,bn=null,Sn=null,Mi=new Map,Oi=new Map,xn=[],jx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _d(e,t){switch(e){case"focusin":case"focusout":wn=null;break;case"dragenter":case"dragleave":bn=null;break;case"mouseover":case"mouseout":Sn=null;break;case"pointerover":case"pointerout":Mi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Oi.delete(t.pointerId)}}function li(e,t,r,s,o,c){return e===null||e.nativeEvent!==c?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:c,targetContainers:[o]},t!==null&&(t=Yi(t),t!==null&&dc(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function kx(e,t,r,s,o){switch(t){case"focusin":return wn=li(wn,e,t,r,s,o),!0;case"dragenter":return bn=li(bn,e,t,r,s,o),!0;case"mouseover":return Sn=li(Sn,e,t,r,s,o),!0;case"pointerover":var c=o.pointerId;return Mi.set(c,li(Mi.get(c)||null,e,t,r,s,o)),!0;case"gotpointercapture":return c=o.pointerId,Oi.set(c,li(Oi.get(c)||null,e,t,r,s,o)),!0}return!1}function mf(e){var t=Hn(e.target);if(t!==null){var r=rr(t);if(r!==null){if(t=r.tag,t===13){if(t=tf(r),t!==null){e.blockedOn=t,ff(e.priority,function(){df(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Fs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=yl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);fl=s,r.target.dispatchEvent(s),fl=null}else return t=Yi(r),t!==null&&dc(t),e.blockedOn=r,!1;t.shift()}return!0}function wd(e,t,r){Fs(e)&&r.delete(t)}function Cx(){vl=!1,wn!==null&&Fs(wn)&&(wn=null),bn!==null&&Fs(bn)&&(bn=null),Sn!==null&&Fs(Sn)&&(Sn=null),Mi.forEach(wd),Oi.forEach(wd)}function ci(e,t){e.blockedOn===t&&(e.blockedOn=null,vl||(vl=!0,ft.unstable_scheduleCallback(ft.unstable_NormalPriority,Cx)))}function Ii(e){function t(o){return ci(o,e)}if(0<ks.length){ci(ks[0],e);for(var r=1;r<ks.length;r++){var s=ks[r];s.blockedOn===e&&(s.blockedOn=null)}}for(wn!==null&&ci(wn,e),bn!==null&&ci(bn,e),Sn!==null&&ci(Sn,e),Mi.forEach(t),Oi.forEach(t),r=0;r<xn.length;r++)s=xn[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<xn.length&&(r=xn[0],r.blockedOn===null);)mf(r),r.blockedOn===null&&xn.shift()}var Mr=cn.ReactCurrentBatchConfig,io=!0;function Px(e,t,r,s){var o=ve,c=Mr.transition;Mr.transition=null;try{ve=1,hc(e,t,r,s)}finally{ve=o,Mr.transition=c}}function Ex(e,t,r,s){var o=ve,c=Mr.transition;Mr.transition=null;try{ve=4,hc(e,t,r,s)}finally{ve=o,Mr.transition=c}}function hc(e,t,r,s){if(io){var o=yl(e,t,r,s);if(o===null)Fa(e,t,s,so,r),_d(e,s);else if(kx(o,e,t,r,s))s.stopPropagation();else if(_d(e,s),t&4&&-1<jx.indexOf(e)){for(;o!==null;){var c=Yi(o);if(c!==null&&uf(c),c=yl(e,t,r,s),c===null&&Fa(e,t,s,so,r),c===o)break;o=c}o!==null&&s.stopPropagation()}else Fa(e,t,s,null,r)}}var so=null;function yl(e,t,r,s){if(so=null,e=lc(s),e=Hn(e),e!==null)if(t=rr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=tf(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return so=e,null}function pf(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gx()){case cc:return 1;case of:return 4;case no:case xx:return 16;case af:return 536870912;default:return 16}default:return 16}}var yn=null,fc=null,Us=null;function gf(){if(Us)return Us;var e,t=fc,r=t.length,s,o="value"in yn?yn.value:yn.textContent,c=o.length;for(e=0;e<r&&t[e]===o[e];e++);var u=r-e;for(s=1;s<=u&&t[r-s]===o[c-s];s++);return Us=o.slice(e,1<s?1-s:void 0)}function Zs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Cs(){return!0}function bd(){return!1}function pt(e){function t(r,s,o,c,u){this._reactName=r,this._targetInst=o,this.type=s,this.nativeEvent=c,this.target=u,this.currentTarget=null;for(var f in e)e.hasOwnProperty(f)&&(r=e[f],this[f]=r?r(c):c[f]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?Cs:bd,this.isPropagationStopped=bd,this}return Pe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Cs)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Cs)},persist:function(){},isPersistent:Cs}),t}var Vr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mc=pt(Vr),qi=Pe({},Vr,{view:0,detail:0}),Tx=pt(qi),La,Aa,ui,Co=Pe({},qi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ui&&(ui&&e.type==="mousemove"?(La=e.screenX-ui.screenX,Aa=e.screenY-ui.screenY):Aa=La=0,ui=e),La)},movementY:function(e){return"movementY"in e?e.movementY:Aa}}),Sd=pt(Co),Lx=Pe({},Co,{dataTransfer:0}),Ax=pt(Lx),Mx=Pe({},qi,{relatedTarget:0}),Ma=pt(Mx),Ox=Pe({},Vr,{animationName:0,elapsedTime:0,pseudoElement:0}),Ix=pt(Ox),Rx=Pe({},Vr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),zx=pt(Rx),Dx=Pe({},Vr,{data:0}),Nd=pt(Dx),Bx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ux={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zx(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Ux[e])?!!t[e]:!1}function pc(){return Zx}var Wx=Pe({},qi,{key:function(e){if(e.key){var t=Bx[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Zs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Fx[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pc,charCode:function(e){return e.type==="keypress"?Zs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Zs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Vx=pt(Wx),Hx=Pe({},Co,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jd=pt(Hx),Gx=Pe({},qi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pc}),$x=pt(Gx),Jx=Pe({},Vr,{propertyName:0,elapsedTime:0,pseudoElement:0}),qx=pt(Jx),Yx=Pe({},Co,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Kx=pt(Yx),Qx=[9,13,27,32],gc=sn&&"CompositionEvent"in window,bi=null;sn&&"documentMode"in document&&(bi=document.documentMode);var Xx=sn&&"TextEvent"in window&&!bi,xf=sn&&(!gc||bi&&8<bi&&11>=bi),kd=" ",Cd=!1;function vf(e,t){switch(e){case"keyup":return Qx.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var yr=!1;function ev(e,t){switch(e){case"compositionend":return yf(t);case"keypress":return t.which!==32?null:(Cd=!0,kd);case"textInput":return e=t.data,e===kd&&Cd?null:e;default:return null}}function tv(e,t){if(yr)return e==="compositionend"||!gc&&vf(e,t)?(e=gf(),Us=fc=yn=null,yr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return xf&&t.locale!=="ko"?null:t.data;default:return null}}var nv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!nv[e.type]:t==="textarea"}function _f(e,t,r,s){Yh(s),t=oo(t,"onChange"),0<t.length&&(r=new mc("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var Si=null,Ri=null;function rv(e){Lf(e,0)}function Po(e){var t=br(e);if(Wh(t))return e}function iv(e,t){if(e==="change")return t}var wf=!1;if(sn){var Oa;if(sn){var Ia="oninput"in document;if(!Ia){var Ed=document.createElement("div");Ed.setAttribute("oninput","return;"),Ia=typeof Ed.oninput=="function"}Oa=Ia}else Oa=!1;wf=Oa&&(!document.documentMode||9<document.documentMode)}function Td(){Si&&(Si.detachEvent("onpropertychange",bf),Ri=Si=null)}function bf(e){if(e.propertyName==="value"&&Po(Ri)){var t=[];_f(t,Ri,e,lc(e)),ef(rv,t)}}function sv(e,t,r){e==="focusin"?(Td(),Si=t,Ri=r,Si.attachEvent("onpropertychange",bf)):e==="focusout"&&Td()}function ov(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Po(Ri)}function av(e,t){if(e==="click")return Po(t)}function lv(e,t){if(e==="input"||e==="change")return Po(t)}function cv(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var zt=typeof Object.is=="function"?Object.is:cv;function zi(e,t){if(zt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var o=r[s];if(!tl.call(t,o)||!zt(e[o],t[o]))return!1}return!0}function Ld(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ad(e,t){var r=Ld(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Ld(r)}}function Sf(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Sf(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Nf(){for(var e=window,t=Xs();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Xs(e.document)}return t}function xc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function uv(e){var t=Nf(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Sf(r.ownerDocument.documentElement,r)){if(s!==null&&xc(r)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=r.textContent.length,c=Math.min(s.start,o);s=s.end===void 0?c:Math.min(s.end,o),!e.extend&&c>s&&(o=s,s=c,c=o),o=Ad(r,c);var u=Ad(r,s);o&&u&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==u.node||e.focusOffset!==u.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),c>s?(e.addRange(t),e.extend(u.node,u.offset)):(t.setEnd(u.node,u.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var dv=sn&&"documentMode"in document&&11>=document.documentMode,_r=null,_l=null,Ni=null,wl=!1;function Md(e,t,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;wl||_r==null||_r!==Xs(s)||(s=_r,"selectionStart"in s&&xc(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Ni&&zi(Ni,s)||(Ni=s,s=oo(_l,"onSelect"),0<s.length&&(t=new mc("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=_r)))}function Ps(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var wr={animationend:Ps("Animation","AnimationEnd"),animationiteration:Ps("Animation","AnimationIteration"),animationstart:Ps("Animation","AnimationStart"),transitionend:Ps("Transition","TransitionEnd")},Ra={},jf={};sn&&(jf=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);function Eo(e){if(Ra[e])return Ra[e];if(!wr[e])return e;var t=wr[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in jf)return Ra[e]=t[r];return e}var kf=Eo("animationend"),Cf=Eo("animationiteration"),Pf=Eo("animationstart"),Ef=Eo("transitionend"),Tf=new Map,Od="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function An(e,t){Tf.set(e,t),nr(t,[e])}for(var za=0;za<Od.length;za++){var Da=Od[za],hv=Da.toLowerCase(),fv=Da[0].toUpperCase()+Da.slice(1);An(hv,"on"+fv)}An(kf,"onAnimationEnd");An(Cf,"onAnimationIteration");An(Pf,"onAnimationStart");An("dblclick","onDoubleClick");An("focusin","onFocus");An("focusout","onBlur");An(Ef,"onTransitionEnd");Rr("onMouseEnter",["mouseout","mouseover"]);Rr("onMouseLeave",["mouseout","mouseover"]);Rr("onPointerEnter",["pointerout","pointerover"]);Rr("onPointerLeave",["pointerout","pointerover"]);nr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));nr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));nr("onBeforeInput",["compositionend","keypress","textInput","paste"]);nr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));nr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));nr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mv=new Set("cancel close invalid load scroll toggle".split(" ").concat(yi));function Id(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,hx(s,t,void 0,e),e.currentTarget=null}function Lf(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],o=s.event;s=s.listeners;e:{var c=void 0;if(t)for(var u=s.length-1;0<=u;u--){var f=s[u],m=f.instance,g=f.currentTarget;if(f=f.listener,m!==c&&o.isPropagationStopped())break e;Id(o,f,g),c=m}else for(u=0;u<s.length;u++){if(f=s[u],m=f.instance,g=f.currentTarget,f=f.listener,m!==c&&o.isPropagationStopped())break e;Id(o,f,g),c=m}}}if(to)throw e=gl,to=!1,gl=null,e}function be(e,t){var r=t[kl];r===void 0&&(r=t[kl]=new Set);var s=e+"__bubble";r.has(s)||(Af(t,e,2,!1),r.add(s))}function Ba(e,t,r){var s=0;t&&(s|=4),Af(r,e,s,t)}var Es="_reactListening"+Math.random().toString(36).slice(2);function Di(e){if(!e[Es]){e[Es]=!0,Dh.forEach(function(r){r!=="selectionchange"&&(mv.has(r)||Ba(r,!1,e),Ba(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Es]||(t[Es]=!0,Ba("selectionchange",!1,t))}}function Af(e,t,r,s){switch(pf(t)){case 1:var o=Px;break;case 4:o=Ex;break;default:o=hc}r=o.bind(null,t,r,e),o=void 0,!pl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),s?o!==void 0?e.addEventListener(t,r,{capture:!0,passive:o}):e.addEventListener(t,r,!0):o!==void 0?e.addEventListener(t,r,{passive:o}):e.addEventListener(t,r,!1)}function Fa(e,t,r,s,o){var c=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var u=s.tag;if(u===3||u===4){var f=s.stateNode.containerInfo;if(f===o||f.nodeType===8&&f.parentNode===o)break;if(u===4)for(u=s.return;u!==null;){var m=u.tag;if((m===3||m===4)&&(m=u.stateNode.containerInfo,m===o||m.nodeType===8&&m.parentNode===o))return;u=u.return}for(;f!==null;){if(u=Hn(f),u===null)return;if(m=u.tag,m===5||m===6){s=c=u;continue e}f=f.parentNode}}s=s.return}ef(function(){var g=c,x=lc(r),v=[];e:{var y=Tf.get(e);if(y!==void 0){var j=mc,k=e;switch(e){case"keypress":if(Zs(r)===0)break e;case"keydown":case"keyup":j=Vx;break;case"focusin":k="focus",j=Ma;break;case"focusout":k="blur",j=Ma;break;case"beforeblur":case"afterblur":j=Ma;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=Sd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=Ax;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=$x;break;case kf:case Cf:case Pf:j=Ix;break;case Ef:j=qx;break;case"scroll":j=Tx;break;case"wheel":j=Kx;break;case"copy":case"cut":case"paste":j=zx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=jd}var C=(t&4)!==0,R=!C&&e==="scroll",b=C?y!==null?y+"Capture":null:y;C=[];for(var _=g,S;_!==null;){S=_;var T=S.stateNode;if(S.tag===5&&T!==null&&(S=T,b!==null&&(T=Ai(_,b),T!=null&&C.push(Bi(_,T,S)))),R)break;_=_.return}0<C.length&&(y=new j(y,k,null,r,x),v.push({event:y,listeners:C}))}}if(!(t&7)){e:{if(y=e==="mouseover"||e==="pointerover",j=e==="mouseout"||e==="pointerout",y&&r!==fl&&(k=r.relatedTarget||r.fromElement)&&(Hn(k)||k[on]))break e;if((j||y)&&(y=x.window===x?x:(y=x.ownerDocument)?y.defaultView||y.parentWindow:window,j?(k=r.relatedTarget||r.toElement,j=g,k=k?Hn(k):null,k!==null&&(R=rr(k),k!==R||k.tag!==5&&k.tag!==6)&&(k=null)):(j=null,k=g),j!==k)){if(C=Sd,T="onMouseLeave",b="onMouseEnter",_="mouse",(e==="pointerout"||e==="pointerover")&&(C=jd,T="onPointerLeave",b="onPointerEnter",_="pointer"),R=j==null?y:br(j),S=k==null?y:br(k),y=new C(T,_+"leave",j,r,x),y.target=R,y.relatedTarget=S,T=null,Hn(x)===g&&(C=new C(b,_+"enter",k,r,x),C.target=S,C.relatedTarget=R,T=C),R=T,j&&k)t:{for(C=j,b=k,_=0,S=C;S;S=mr(S))_++;for(S=0,T=b;T;T=mr(T))S++;for(;0<_-S;)C=mr(C),_--;for(;0<S-_;)b=mr(b),S--;for(;_--;){if(C===b||b!==null&&C===b.alternate)break t;C=mr(C),b=mr(b)}C=null}else C=null;j!==null&&Rd(v,y,j,C,!1),k!==null&&R!==null&&Rd(v,R,k,C,!0)}}e:{if(y=g?br(g):window,j=y.nodeName&&y.nodeName.toLowerCase(),j==="select"||j==="input"&&y.type==="file")var z=iv;else if(Pd(y))if(wf)z=lv;else{z=ov;var F=sv}else(j=y.nodeName)&&j.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(z=av);if(z&&(z=z(e,g))){_f(v,z,r,x);break e}F&&F(e,y,g),e==="focusout"&&(F=y._wrapperState)&&F.controlled&&y.type==="number"&&ll(y,"number",y.value)}switch(F=g?br(g):window,e){case"focusin":(Pd(F)||F.contentEditable==="true")&&(_r=F,_l=g,Ni=null);break;case"focusout":Ni=_l=_r=null;break;case"mousedown":wl=!0;break;case"contextmenu":case"mouseup":case"dragend":wl=!1,Md(v,r,x);break;case"selectionchange":if(dv)break;case"keydown":case"keyup":Md(v,r,x)}var D;if(gc)e:{switch(e){case"compositionstart":var U="onCompositionStart";break e;case"compositionend":U="onCompositionEnd";break e;case"compositionupdate":U="onCompositionUpdate";break e}U=void 0}else yr?vf(e,r)&&(U="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(U="onCompositionStart");U&&(xf&&r.locale!=="ko"&&(yr||U!=="onCompositionStart"?U==="onCompositionEnd"&&yr&&(D=gf()):(yn=x,fc="value"in yn?yn.value:yn.textContent,yr=!0)),F=oo(g,U),0<F.length&&(U=new Nd(U,e,null,r,x),v.push({event:U,listeners:F}),D?U.data=D:(D=yf(r),D!==null&&(U.data=D)))),(D=Xx?ev(e,r):tv(e,r))&&(g=oo(g,"onBeforeInput"),0<g.length&&(x=new Nd("onBeforeInput","beforeinput",null,r,x),v.push({event:x,listeners:g}),x.data=D))}Lf(v,t)})}function Bi(e,t,r){return{instance:e,listener:t,currentTarget:r}}function oo(e,t){for(var r=t+"Capture",s=[];e!==null;){var o=e,c=o.stateNode;o.tag===5&&c!==null&&(o=c,c=Ai(e,r),c!=null&&s.unshift(Bi(e,c,o)),c=Ai(e,t),c!=null&&s.push(Bi(e,c,o))),e=e.return}return s}function mr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Rd(e,t,r,s,o){for(var c=t._reactName,u=[];r!==null&&r!==s;){var f=r,m=f.alternate,g=f.stateNode;if(m!==null&&m===s)break;f.tag===5&&g!==null&&(f=g,o?(m=Ai(r,c),m!=null&&u.unshift(Bi(r,m,f))):o||(m=Ai(r,c),m!=null&&u.push(Bi(r,m,f)))),r=r.return}u.length!==0&&e.push({event:t,listeners:u})}var pv=/\r\n?/g,gv=/\u0000|\uFFFD/g;function zd(e){return(typeof e=="string"?e:""+e).replace(pv,`
`).replace(gv,"")}function Ts(e,t,r){if(t=zd(t),zd(e)!==t&&r)throw Error(W(425))}function ao(){}var bl=null,Sl=null;function Nl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var jl=typeof setTimeout=="function"?setTimeout:void 0,xv=typeof clearTimeout=="function"?clearTimeout:void 0,Dd=typeof Promise=="function"?Promise:void 0,vv=typeof queueMicrotask=="function"?queueMicrotask:typeof Dd<"u"?function(e){return Dd.resolve(null).then(e).catch(yv)}:jl;function yv(e){setTimeout(function(){throw e})}function Ua(e,t){var r=t,s=0;do{var o=r.nextSibling;if(e.removeChild(r),o&&o.nodeType===8)if(r=o.data,r==="/$"){if(s===0){e.removeChild(o),Ii(t);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=o}while(r);Ii(t)}function Nn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Bd(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Hr=Math.random().toString(36).slice(2),Vt="__reactFiber$"+Hr,Fi="__reactProps$"+Hr,on="__reactContainer$"+Hr,kl="__reactEvents$"+Hr,_v="__reactListeners$"+Hr,wv="__reactHandles$"+Hr;function Hn(e){var t=e[Vt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[on]||r[Vt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Bd(e);e!==null;){if(r=e[Vt])return r;e=Bd(e)}return t}e=r,r=e.parentNode}return null}function Yi(e){return e=e[Vt]||e[on],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function br(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(W(33))}function To(e){return e[Fi]||null}var Cl=[],Sr=-1;function Mn(e){return{current:e}}function Se(e){0>Sr||(e.current=Cl[Sr],Cl[Sr]=null,Sr--)}function _e(e,t){Sr++,Cl[Sr]=e.current,e.current=t}var Tn={},Ye=Mn(Tn),ot=Mn(!1),Kn=Tn;function zr(e,t){var r=e.type.contextTypes;if(!r)return Tn;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var o={},c;for(c in r)o[c]=t[c];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function at(e){return e=e.childContextTypes,e!=null}function lo(){Se(ot),Se(Ye)}function Fd(e,t,r){if(Ye.current!==Tn)throw Error(W(168));_e(Ye,t),_e(ot,r)}function Mf(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var o in s)if(!(o in t))throw Error(W(108,sx(e)||"Unknown",o));return Pe({},r,s)}function co(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Tn,Kn=Ye.current,_e(Ye,e),_e(ot,ot.current),!0}function Ud(e,t,r){var s=e.stateNode;if(!s)throw Error(W(169));r?(e=Mf(e,t,Kn),s.__reactInternalMemoizedMergedChildContext=e,Se(ot),Se(Ye),_e(Ye,e)):Se(ot),_e(ot,r)}var Qt=null,Lo=!1,Za=!1;function Of(e){Qt===null?Qt=[e]:Qt.push(e)}function bv(e){Lo=!0,Of(e)}function On(){if(!Za&&Qt!==null){Za=!0;var e=0,t=ve;try{var r=Qt;for(ve=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}Qt=null,Lo=!1}catch(o){throw Qt!==null&&(Qt=Qt.slice(e+1)),sf(cc,On),o}finally{ve=t,Za=!1}}return null}var Nr=[],jr=0,uo=null,ho=0,_t=[],wt=0,Qn=null,tn=1,nn="";function Wn(e,t){Nr[jr++]=ho,Nr[jr++]=uo,uo=e,ho=t}function If(e,t,r){_t[wt++]=tn,_t[wt++]=nn,_t[wt++]=Qn,Qn=e;var s=tn;e=nn;var o=32-It(s)-1;s&=~(1<<o),r+=1;var c=32-It(t)+o;if(30<c){var u=o-o%5;c=(s&(1<<u)-1).toString(32),s>>=u,o-=u,tn=1<<32-It(t)+o|r<<o|s,nn=c+e}else tn=1<<c|r<<o|s,nn=e}function vc(e){e.return!==null&&(Wn(e,1),If(e,1,0))}function yc(e){for(;e===uo;)uo=Nr[--jr],Nr[jr]=null,ho=Nr[--jr],Nr[jr]=null;for(;e===Qn;)Qn=_t[--wt],_t[wt]=null,nn=_t[--wt],_t[wt]=null,tn=_t[--wt],_t[wt]=null}var ht=null,dt=null,Ne=!1,Ot=null;function Rf(e,t){var r=bt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Zd(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ht=e,dt=Nn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ht=e,dt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Qn!==null?{id:tn,overflow:nn}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=bt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,ht=e,dt=null,!0):!1;default:return!1}}function Pl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function El(e){if(Ne){var t=dt;if(t){var r=t;if(!Zd(e,t)){if(Pl(e))throw Error(W(418));t=Nn(r.nextSibling);var s=ht;t&&Zd(e,t)?Rf(s,r):(e.flags=e.flags&-4097|2,Ne=!1,ht=e)}}else{if(Pl(e))throw Error(W(418));e.flags=e.flags&-4097|2,Ne=!1,ht=e}}}function Wd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ht=e}function Ls(e){if(e!==ht)return!1;if(!Ne)return Wd(e),Ne=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Nl(e.type,e.memoizedProps)),t&&(t=dt)){if(Pl(e))throw zf(),Error(W(418));for(;t;)Rf(e,t),t=Nn(t.nextSibling)}if(Wd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(W(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){dt=Nn(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}dt=null}}else dt=ht?Nn(e.stateNode.nextSibling):null;return!0}function zf(){for(var e=dt;e;)e=Nn(e.nextSibling)}function Dr(){dt=ht=null,Ne=!1}function _c(e){Ot===null?Ot=[e]:Ot.push(e)}var Sv=cn.ReactCurrentBatchConfig;function di(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(W(309));var s=r.stateNode}if(!s)throw Error(W(147,e));var o=s,c=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===c?t.ref:(t=function(u){var f=o.refs;u===null?delete f[c]:f[c]=u},t._stringRef=c,t)}if(typeof e!="string")throw Error(W(284));if(!r._owner)throw Error(W(290,e))}return e}function As(e,t){throw e=Object.prototype.toString.call(t),Error(W(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Vd(e){var t=e._init;return t(e._payload)}function Df(e){function t(b,_){if(e){var S=b.deletions;S===null?(b.deletions=[_],b.flags|=16):S.push(_)}}function r(b,_){if(!e)return null;for(;_!==null;)t(b,_),_=_.sibling;return null}function s(b,_){for(b=new Map;_!==null;)_.key!==null?b.set(_.key,_):b.set(_.index,_),_=_.sibling;return b}function o(b,_){return b=Pn(b,_),b.index=0,b.sibling=null,b}function c(b,_,S){return b.index=S,e?(S=b.alternate,S!==null?(S=S.index,S<_?(b.flags|=2,_):S):(b.flags|=2,_)):(b.flags|=1048576,_)}function u(b){return e&&b.alternate===null&&(b.flags|=2),b}function f(b,_,S,T){return _===null||_.tag!==6?(_=qa(S,b.mode,T),_.return=b,_):(_=o(_,S),_.return=b,_)}function m(b,_,S,T){var z=S.type;return z===vr?x(b,_,S.props.children,T,S.key):_!==null&&(_.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===mn&&Vd(z)===_.type)?(T=o(_,S.props),T.ref=di(b,_,S),T.return=b,T):(T=qs(S.type,S.key,S.props,null,b.mode,T),T.ref=di(b,_,S),T.return=b,T)}function g(b,_,S,T){return _===null||_.tag!==4||_.stateNode.containerInfo!==S.containerInfo||_.stateNode.implementation!==S.implementation?(_=Ya(S,b.mode,T),_.return=b,_):(_=o(_,S.children||[]),_.return=b,_)}function x(b,_,S,T,z){return _===null||_.tag!==7?(_=qn(S,b.mode,T,z),_.return=b,_):(_=o(_,S),_.return=b,_)}function v(b,_,S){if(typeof _=="string"&&_!==""||typeof _=="number")return _=qa(""+_,b.mode,S),_.return=b,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ws:return S=qs(_.type,_.key,_.props,null,b.mode,S),S.ref=di(b,null,_),S.return=b,S;case xr:return _=Ya(_,b.mode,S),_.return=b,_;case mn:var T=_._init;return v(b,T(_._payload),S)}if(xi(_)||oi(_))return _=qn(_,b.mode,S,null),_.return=b,_;As(b,_)}return null}function y(b,_,S,T){var z=_!==null?_.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return z!==null?null:f(b,_,""+S,T);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case ws:return S.key===z?m(b,_,S,T):null;case xr:return S.key===z?g(b,_,S,T):null;case mn:return z=S._init,y(b,_,z(S._payload),T)}if(xi(S)||oi(S))return z!==null?null:x(b,_,S,T,null);As(b,S)}return null}function j(b,_,S,T,z){if(typeof T=="string"&&T!==""||typeof T=="number")return b=b.get(S)||null,f(_,b,""+T,z);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case ws:return b=b.get(T.key===null?S:T.key)||null,m(_,b,T,z);case xr:return b=b.get(T.key===null?S:T.key)||null,g(_,b,T,z);case mn:var F=T._init;return j(b,_,S,F(T._payload),z)}if(xi(T)||oi(T))return b=b.get(S)||null,x(_,b,T,z,null);As(_,T)}return null}function k(b,_,S,T){for(var z=null,F=null,D=_,U=_=0,ie=null;D!==null&&U<S.length;U++){D.index>U?(ie=D,D=null):ie=D.sibling;var Y=y(b,D,S[U],T);if(Y===null){D===null&&(D=ie);break}e&&D&&Y.alternate===null&&t(b,D),_=c(Y,_,U),F===null?z=Y:F.sibling=Y,F=Y,D=ie}if(U===S.length)return r(b,D),Ne&&Wn(b,U),z;if(D===null){for(;U<S.length;U++)D=v(b,S[U],T),D!==null&&(_=c(D,_,U),F===null?z=D:F.sibling=D,F=D);return Ne&&Wn(b,U),z}for(D=s(b,D);U<S.length;U++)ie=j(D,b,U,S[U],T),ie!==null&&(e&&ie.alternate!==null&&D.delete(ie.key===null?U:ie.key),_=c(ie,_,U),F===null?z=ie:F.sibling=ie,F=ie);return e&&D.forEach(function(le){return t(b,le)}),Ne&&Wn(b,U),z}function C(b,_,S,T){var z=oi(S);if(typeof z!="function")throw Error(W(150));if(S=z.call(S),S==null)throw Error(W(151));for(var F=z=null,D=_,U=_=0,ie=null,Y=S.next();D!==null&&!Y.done;U++,Y=S.next()){D.index>U?(ie=D,D=null):ie=D.sibling;var le=y(b,D,Y.value,T);if(le===null){D===null&&(D=ie);break}e&&D&&le.alternate===null&&t(b,D),_=c(le,_,U),F===null?z=le:F.sibling=le,F=le,D=ie}if(Y.done)return r(b,D),Ne&&Wn(b,U),z;if(D===null){for(;!Y.done;U++,Y=S.next())Y=v(b,Y.value,T),Y!==null&&(_=c(Y,_,U),F===null?z=Y:F.sibling=Y,F=Y);return Ne&&Wn(b,U),z}for(D=s(b,D);!Y.done;U++,Y=S.next())Y=j(D,b,U,Y.value,T),Y!==null&&(e&&Y.alternate!==null&&D.delete(Y.key===null?U:Y.key),_=c(Y,_,U),F===null?z=Y:F.sibling=Y,F=Y);return e&&D.forEach(function(fe){return t(b,fe)}),Ne&&Wn(b,U),z}function R(b,_,S,T){if(typeof S=="object"&&S!==null&&S.type===vr&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case ws:e:{for(var z=S.key,F=_;F!==null;){if(F.key===z){if(z=S.type,z===vr){if(F.tag===7){r(b,F.sibling),_=o(F,S.props.children),_.return=b,b=_;break e}}else if(F.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===mn&&Vd(z)===F.type){r(b,F.sibling),_=o(F,S.props),_.ref=di(b,F,S),_.return=b,b=_;break e}r(b,F);break}else t(b,F);F=F.sibling}S.type===vr?(_=qn(S.props.children,b.mode,T,S.key),_.return=b,b=_):(T=qs(S.type,S.key,S.props,null,b.mode,T),T.ref=di(b,_,S),T.return=b,b=T)}return u(b);case xr:e:{for(F=S.key;_!==null;){if(_.key===F)if(_.tag===4&&_.stateNode.containerInfo===S.containerInfo&&_.stateNode.implementation===S.implementation){r(b,_.sibling),_=o(_,S.children||[]),_.return=b,b=_;break e}else{r(b,_);break}else t(b,_);_=_.sibling}_=Ya(S,b.mode,T),_.return=b,b=_}return u(b);case mn:return F=S._init,R(b,_,F(S._payload),T)}if(xi(S))return k(b,_,S,T);if(oi(S))return C(b,_,S,T);As(b,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,_!==null&&_.tag===6?(r(b,_.sibling),_=o(_,S),_.return=b,b=_):(r(b,_),_=qa(S,b.mode,T),_.return=b,b=_),u(b)):r(b,_)}return R}var Br=Df(!0),Bf=Df(!1),fo=Mn(null),mo=null,kr=null,wc=null;function bc(){wc=kr=mo=null}function Sc(e){var t=fo.current;Se(fo),e._currentValue=t}function Tl(e,t,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function Or(e,t){mo=e,wc=kr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(st=!0),e.firstContext=null)}function jt(e){var t=e._currentValue;if(wc!==e)if(e={context:e,memoizedValue:t,next:null},kr===null){if(mo===null)throw Error(W(308));kr=e,mo.dependencies={lanes:0,firstContext:e}}else kr=kr.next=e;return t}var Gn=null;function Nc(e){Gn===null?Gn=[e]:Gn.push(e)}function Ff(e,t,r,s){var o=t.interleaved;return o===null?(r.next=r,Nc(t)):(r.next=o.next,o.next=r),t.interleaved=r,an(e,s)}function an(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var pn=!1;function jc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Uf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function rn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function jn(e,t,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,ge&2){var o=s.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),s.pending=t,an(e,r)}return o=s.interleaved,o===null?(t.next=t,Nc(s)):(t.next=o.next,o.next=t),s.interleaved=t,an(e,r)}function Ws(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,uc(e,r)}}function Hd(e,t){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var o=null,c=null;if(r=r.firstBaseUpdate,r!==null){do{var u={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};c===null?o=c=u:c=c.next=u,r=r.next}while(r!==null);c===null?o=c=t:c=c.next=t}else o=c=t;r={baseState:s.baseState,firstBaseUpdate:o,lastBaseUpdate:c,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function po(e,t,r,s){var o=e.updateQueue;pn=!1;var c=o.firstBaseUpdate,u=o.lastBaseUpdate,f=o.shared.pending;if(f!==null){o.shared.pending=null;var m=f,g=m.next;m.next=null,u===null?c=g:u.next=g,u=m;var x=e.alternate;x!==null&&(x=x.updateQueue,f=x.lastBaseUpdate,f!==u&&(f===null?x.firstBaseUpdate=g:f.next=g,x.lastBaseUpdate=m))}if(c!==null){var v=o.baseState;u=0,x=g=m=null,f=c;do{var y=f.lane,j=f.eventTime;if((s&y)===y){x!==null&&(x=x.next={eventTime:j,lane:0,tag:f.tag,payload:f.payload,callback:f.callback,next:null});e:{var k=e,C=f;switch(y=t,j=r,C.tag){case 1:if(k=C.payload,typeof k=="function"){v=k.call(j,v,y);break e}v=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=C.payload,y=typeof k=="function"?k.call(j,v,y):k,y==null)break e;v=Pe({},v,y);break e;case 2:pn=!0}}f.callback!==null&&f.lane!==0&&(e.flags|=64,y=o.effects,y===null?o.effects=[f]:y.push(f))}else j={eventTime:j,lane:y,tag:f.tag,payload:f.payload,callback:f.callback,next:null},x===null?(g=x=j,m=v):x=x.next=j,u|=y;if(f=f.next,f===null){if(f=o.shared.pending,f===null)break;y=f,f=y.next,y.next=null,o.lastBaseUpdate=y,o.shared.pending=null}}while(!0);if(x===null&&(m=v),o.baseState=m,o.firstBaseUpdate=g,o.lastBaseUpdate=x,t=o.shared.interleaved,t!==null){o=t;do u|=o.lane,o=o.next;while(o!==t)}else c===null&&(o.shared.lanes=0);er|=u,e.lanes=u,e.memoizedState=v}}function Gd(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],o=s.callback;if(o!==null){if(s.callback=null,s=r,typeof o!="function")throw Error(W(191,o));o.call(s)}}}var Ki={},Gt=Mn(Ki),Ui=Mn(Ki),Zi=Mn(Ki);function $n(e){if(e===Ki)throw Error(W(174));return e}function kc(e,t){switch(_e(Zi,t),_e(Ui,e),_e(Gt,Ki),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ul(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ul(t,e)}Se(Gt),_e(Gt,t)}function Fr(){Se(Gt),Se(Ui),Se(Zi)}function Zf(e){$n(Zi.current);var t=$n(Gt.current),r=ul(t,e.type);t!==r&&(_e(Ui,e),_e(Gt,r))}function Cc(e){Ui.current===e&&(Se(Gt),Se(Ui))}var ke=Mn(0);function go(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Wa=[];function Pc(){for(var e=0;e<Wa.length;e++)Wa[e]._workInProgressVersionPrimary=null;Wa.length=0}var Vs=cn.ReactCurrentDispatcher,Va=cn.ReactCurrentBatchConfig,Xn=0,Ce=null,ze=null,Ue=null,xo=!1,ji=!1,Wi=0,Nv=0;function $e(){throw Error(W(321))}function Ec(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!zt(e[r],t[r]))return!1;return!0}function Tc(e,t,r,s,o,c){if(Xn=c,Ce=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Vs.current=e===null||e.memoizedState===null?Pv:Ev,e=r(s,o),ji){c=0;do{if(ji=!1,Wi=0,25<=c)throw Error(W(301));c+=1,Ue=ze=null,t.updateQueue=null,Vs.current=Tv,e=r(s,o)}while(ji)}if(Vs.current=vo,t=ze!==null&&ze.next!==null,Xn=0,Ue=ze=Ce=null,xo=!1,t)throw Error(W(300));return e}function Lc(){var e=Wi!==0;return Wi=0,e}function Wt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ue===null?Ce.memoizedState=Ue=e:Ue=Ue.next=e,Ue}function kt(){if(ze===null){var e=Ce.alternate;e=e!==null?e.memoizedState:null}else e=ze.next;var t=Ue===null?Ce.memoizedState:Ue.next;if(t!==null)Ue=t,ze=e;else{if(e===null)throw Error(W(310));ze=e,e={memoizedState:ze.memoizedState,baseState:ze.baseState,baseQueue:ze.baseQueue,queue:ze.queue,next:null},Ue===null?Ce.memoizedState=Ue=e:Ue=Ue.next=e}return Ue}function Vi(e,t){return typeof t=="function"?t(e):t}function Ha(e){var t=kt(),r=t.queue;if(r===null)throw Error(W(311));r.lastRenderedReducer=e;var s=ze,o=s.baseQueue,c=r.pending;if(c!==null){if(o!==null){var u=o.next;o.next=c.next,c.next=u}s.baseQueue=o=c,r.pending=null}if(o!==null){c=o.next,s=s.baseState;var f=u=null,m=null,g=c;do{var x=g.lane;if((Xn&x)===x)m!==null&&(m=m.next={lane:0,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null}),s=g.hasEagerState?g.eagerState:e(s,g.action);else{var v={lane:x,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null};m===null?(f=m=v,u=s):m=m.next=v,Ce.lanes|=x,er|=x}g=g.next}while(g!==null&&g!==c);m===null?u=s:m.next=f,zt(s,t.memoizedState)||(st=!0),t.memoizedState=s,t.baseState=u,t.baseQueue=m,r.lastRenderedState=s}if(e=r.interleaved,e!==null){o=e;do c=o.lane,Ce.lanes|=c,er|=c,o=o.next;while(o!==e)}else o===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Ga(e){var t=kt(),r=t.queue;if(r===null)throw Error(W(311));r.lastRenderedReducer=e;var s=r.dispatch,o=r.pending,c=t.memoizedState;if(o!==null){r.pending=null;var u=o=o.next;do c=e(c,u.action),u=u.next;while(u!==o);zt(c,t.memoizedState)||(st=!0),t.memoizedState=c,t.baseQueue===null&&(t.baseState=c),r.lastRenderedState=c}return[c,s]}function Wf(){}function Vf(e,t){var r=Ce,s=kt(),o=t(),c=!zt(s.memoizedState,o);if(c&&(s.memoizedState=o,st=!0),s=s.queue,Ac($f.bind(null,r,s,e),[e]),s.getSnapshot!==t||c||Ue!==null&&Ue.memoizedState.tag&1){if(r.flags|=2048,Hi(9,Gf.bind(null,r,s,o,t),void 0,null),Ze===null)throw Error(W(349));Xn&30||Hf(r,t,o)}return o}function Hf(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ce.updateQueue,t===null?(t={lastEffect:null,stores:null},Ce.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Gf(e,t,r,s){t.value=r,t.getSnapshot=s,Jf(t)&&qf(e)}function $f(e,t,r){return r(function(){Jf(t)&&qf(e)})}function Jf(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!zt(e,r)}catch{return!0}}function qf(e){var t=an(e,1);t!==null&&Rt(t,e,1,-1)}function $d(e){var t=Wt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:e},t.queue=e,e=e.dispatch=Cv.bind(null,Ce,e),[t.memoizedState,e]}function Hi(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},t=Ce.updateQueue,t===null?(t={lastEffect:null,stores:null},Ce.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e)),e}function Yf(){return kt().memoizedState}function Hs(e,t,r,s){var o=Wt();Ce.flags|=e,o.memoizedState=Hi(1|t,r,void 0,s===void 0?null:s)}function Ao(e,t,r,s){var o=kt();s=s===void 0?null:s;var c=void 0;if(ze!==null){var u=ze.memoizedState;if(c=u.destroy,s!==null&&Ec(s,u.deps)){o.memoizedState=Hi(t,r,c,s);return}}Ce.flags|=e,o.memoizedState=Hi(1|t,r,c,s)}function Jd(e,t){return Hs(8390656,8,e,t)}function Ac(e,t){return Ao(2048,8,e,t)}function Kf(e,t){return Ao(4,2,e,t)}function Qf(e,t){return Ao(4,4,e,t)}function Xf(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function em(e,t,r){return r=r!=null?r.concat([e]):null,Ao(4,4,Xf.bind(null,t,e),r)}function Mc(){}function tm(e,t){var r=kt();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&Ec(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function nm(e,t){var r=kt();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&Ec(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function rm(e,t,r){return Xn&21?(zt(r,t)||(r=lf(),Ce.lanes|=r,er|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,st=!0),e.memoizedState=r)}function jv(e,t){var r=ve;ve=r!==0&&4>r?r:4,e(!0);var s=Va.transition;Va.transition={};try{e(!1),t()}finally{ve=r,Va.transition=s}}function im(){return kt().memoizedState}function kv(e,t,r){var s=Cn(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},sm(e))om(t,r);else if(r=Ff(e,t,r,s),r!==null){var o=Xe();Rt(r,e,s,o),am(r,t,s)}}function Cv(e,t,r){var s=Cn(e),o={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(sm(e))om(t,o);else{var c=e.alternate;if(e.lanes===0&&(c===null||c.lanes===0)&&(c=t.lastRenderedReducer,c!==null))try{var u=t.lastRenderedState,f=c(u,r);if(o.hasEagerState=!0,o.eagerState=f,zt(f,u)){var m=t.interleaved;m===null?(o.next=o,Nc(t)):(o.next=m.next,m.next=o),t.interleaved=o;return}}catch{}finally{}r=Ff(e,t,o,s),r!==null&&(o=Xe(),Rt(r,e,s,o),am(r,t,s))}}function sm(e){var t=e.alternate;return e===Ce||t!==null&&t===Ce}function om(e,t){ji=xo=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function am(e,t,r){if(r&4194240){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,uc(e,r)}}var vo={readContext:jt,useCallback:$e,useContext:$e,useEffect:$e,useImperativeHandle:$e,useInsertionEffect:$e,useLayoutEffect:$e,useMemo:$e,useReducer:$e,useRef:$e,useState:$e,useDebugValue:$e,useDeferredValue:$e,useTransition:$e,useMutableSource:$e,useSyncExternalStore:$e,useId:$e,unstable_isNewReconciler:!1},Pv={readContext:jt,useCallback:function(e,t){return Wt().memoizedState=[e,t===void 0?null:t],e},useContext:jt,useEffect:Jd,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Hs(4194308,4,Xf.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Hs(4194308,4,e,t)},useInsertionEffect:function(e,t){return Hs(4,2,e,t)},useMemo:function(e,t){var r=Wt();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=Wt();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=kv.bind(null,Ce,e),[s.memoizedState,e]},useRef:function(e){var t=Wt();return e={current:e},t.memoizedState=e},useState:$d,useDebugValue:Mc,useDeferredValue:function(e){return Wt().memoizedState=e},useTransition:function(){var e=$d(!1),t=e[0];return e=jv.bind(null,e[1]),Wt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=Ce,o=Wt();if(Ne){if(r===void 0)throw Error(W(407));r=r()}else{if(r=t(),Ze===null)throw Error(W(349));Xn&30||Hf(s,t,r)}o.memoizedState=r;var c={value:r,getSnapshot:t};return o.queue=c,Jd($f.bind(null,s,c,e),[e]),s.flags|=2048,Hi(9,Gf.bind(null,s,c,r,t),void 0,null),r},useId:function(){var e=Wt(),t=Ze.identifierPrefix;if(Ne){var r=nn,s=tn;r=(s&~(1<<32-It(s)-1)).toString(32)+r,t=":"+t+"R"+r,r=Wi++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Nv++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Ev={readContext:jt,useCallback:tm,useContext:jt,useEffect:Ac,useImperativeHandle:em,useInsertionEffect:Kf,useLayoutEffect:Qf,useMemo:nm,useReducer:Ha,useRef:Yf,useState:function(){return Ha(Vi)},useDebugValue:Mc,useDeferredValue:function(e){var t=kt();return rm(t,ze.memoizedState,e)},useTransition:function(){var e=Ha(Vi)[0],t=kt().memoizedState;return[e,t]},useMutableSource:Wf,useSyncExternalStore:Vf,useId:im,unstable_isNewReconciler:!1},Tv={readContext:jt,useCallback:tm,useContext:jt,useEffect:Ac,useImperativeHandle:em,useInsertionEffect:Kf,useLayoutEffect:Qf,useMemo:nm,useReducer:Ga,useRef:Yf,useState:function(){return Ga(Vi)},useDebugValue:Mc,useDeferredValue:function(e){var t=kt();return ze===null?t.memoizedState=e:rm(t,ze.memoizedState,e)},useTransition:function(){var e=Ga(Vi)[0],t=kt().memoizedState;return[e,t]},useMutableSource:Wf,useSyncExternalStore:Vf,useId:im,unstable_isNewReconciler:!1};function At(e,t){if(e&&e.defaultProps){t=Pe({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Ll(e,t,r,s){t=e.memoizedState,r=r(s,t),r=r==null?t:Pe({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Mo={isMounted:function(e){return(e=e._reactInternals)?rr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=Xe(),o=Cn(e),c=rn(s,o);c.payload=t,r!=null&&(c.callback=r),t=jn(e,c,o),t!==null&&(Rt(t,e,o,s),Ws(t,e,o))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=Xe(),o=Cn(e),c=rn(s,o);c.tag=1,c.payload=t,r!=null&&(c.callback=r),t=jn(e,c,o),t!==null&&(Rt(t,e,o,s),Ws(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Xe(),s=Cn(e),o=rn(r,s);o.tag=2,t!=null&&(o.callback=t),t=jn(e,o,s),t!==null&&(Rt(t,e,s,r),Ws(t,e,s))}};function qd(e,t,r,s,o,c,u){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,c,u):t.prototype&&t.prototype.isPureReactComponent?!zi(r,s)||!zi(o,c):!0}function lm(e,t,r){var s=!1,o=Tn,c=t.contextType;return typeof c=="object"&&c!==null?c=jt(c):(o=at(t)?Kn:Ye.current,s=t.contextTypes,c=(s=s!=null)?zr(e,o):Tn),t=new t(r,c),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Mo,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=c),t}function Yd(e,t,r,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&Mo.enqueueReplaceState(t,t.state,null)}function Al(e,t,r,s){var o=e.stateNode;o.props=r,o.state=e.memoizedState,o.refs={},jc(e);var c=t.contextType;typeof c=="object"&&c!==null?o.context=jt(c):(c=at(t)?Kn:Ye.current,o.context=zr(e,c)),o.state=e.memoizedState,c=t.getDerivedStateFromProps,typeof c=="function"&&(Ll(e,t,c,r),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&Mo.enqueueReplaceState(o,o.state,null),po(e,r,o,s),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function Ur(e,t){try{var r="",s=t;do r+=ix(s),s=s.return;while(s);var o=r}catch(c){o=`
Error generating stack: `+c.message+`
`+c.stack}return{value:e,source:t,stack:o,digest:null}}function $a(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Ml(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Lv=typeof WeakMap=="function"?WeakMap:Map;function cm(e,t,r){r=rn(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){_o||(_o=!0,Wl=s),Ml(e,t)},r}function um(e,t,r){r=rn(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var o=t.value;r.payload=function(){return s(o)},r.callback=function(){Ml(e,t)}}var c=e.stateNode;return c!==null&&typeof c.componentDidCatch=="function"&&(r.callback=function(){Ml(e,t),typeof s!="function"&&(kn===null?kn=new Set([this]):kn.add(this));var u=t.stack;this.componentDidCatch(t.value,{componentStack:u!==null?u:""})}),r}function Kd(e,t,r){var s=e.pingCache;if(s===null){s=e.pingCache=new Lv;var o=new Set;s.set(t,o)}else o=s.get(t),o===void 0&&(o=new Set,s.set(t,o));o.has(r)||(o.add(r),e=Hv.bind(null,e,t,r),t.then(e,e))}function Qd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Xd(e,t,r,s,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=rn(-1,1),t.tag=2,jn(r,t,1))),r.lanes|=1),e)}var Av=cn.ReactCurrentOwner,st=!1;function Qe(e,t,r,s){t.child=e===null?Bf(t,null,r,s):Br(t,e.child,r,s)}function eh(e,t,r,s,o){r=r.render;var c=t.ref;return Or(t,o),s=Tc(e,t,r,s,c,o),r=Lc(),e!==null&&!st?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,ln(e,t,o)):(Ne&&r&&vc(t),t.flags|=1,Qe(e,t,s,o),t.child)}function th(e,t,r,s,o){if(e===null){var c=r.type;return typeof c=="function"&&!Uc(c)&&c.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=c,dm(e,t,c,s,o)):(e=qs(r.type,null,s,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(c=e.child,!(e.lanes&o)){var u=c.memoizedProps;if(r=r.compare,r=r!==null?r:zi,r(u,s)&&e.ref===t.ref)return ln(e,t,o)}return t.flags|=1,e=Pn(c,s),e.ref=t.ref,e.return=t,t.child=e}function dm(e,t,r,s,o){if(e!==null){var c=e.memoizedProps;if(zi(c,s)&&e.ref===t.ref)if(st=!1,t.pendingProps=s=c,(e.lanes&o)!==0)e.flags&131072&&(st=!0);else return t.lanes=e.lanes,ln(e,t,o)}return Ol(e,t,r,s,o)}function hm(e,t,r){var s=t.pendingProps,o=s.children,c=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_e(Pr,ut),ut|=r;else{if(!(r&1073741824))return e=c!==null?c.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_e(Pr,ut),ut|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=c!==null?c.baseLanes:r,_e(Pr,ut),ut|=s}else c!==null?(s=c.baseLanes|r,t.memoizedState=null):s=r,_e(Pr,ut),ut|=s;return Qe(e,t,o,r),t.child}function fm(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Ol(e,t,r,s,o){var c=at(r)?Kn:Ye.current;return c=zr(t,c),Or(t,o),r=Tc(e,t,r,s,c,o),s=Lc(),e!==null&&!st?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,ln(e,t,o)):(Ne&&s&&vc(t),t.flags|=1,Qe(e,t,r,o),t.child)}function nh(e,t,r,s,o){if(at(r)){var c=!0;co(t)}else c=!1;if(Or(t,o),t.stateNode===null)Gs(e,t),lm(t,r,s),Al(t,r,s,o),s=!0;else if(e===null){var u=t.stateNode,f=t.memoizedProps;u.props=f;var m=u.context,g=r.contextType;typeof g=="object"&&g!==null?g=jt(g):(g=at(r)?Kn:Ye.current,g=zr(t,g));var x=r.getDerivedStateFromProps,v=typeof x=="function"||typeof u.getSnapshotBeforeUpdate=="function";v||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(f!==s||m!==g)&&Yd(t,u,s,g),pn=!1;var y=t.memoizedState;u.state=y,po(t,s,u,o),m=t.memoizedState,f!==s||y!==m||ot.current||pn?(typeof x=="function"&&(Ll(t,r,x,s),m=t.memoizedState),(f=pn||qd(t,r,f,s,y,m,g))?(v||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=m),u.props=s,u.state=m,u.context=g,s=f):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{u=t.stateNode,Uf(e,t),f=t.memoizedProps,g=t.type===t.elementType?f:At(t.type,f),u.props=g,v=t.pendingProps,y=u.context,m=r.contextType,typeof m=="object"&&m!==null?m=jt(m):(m=at(r)?Kn:Ye.current,m=zr(t,m));var j=r.getDerivedStateFromProps;(x=typeof j=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(f!==v||y!==m)&&Yd(t,u,s,m),pn=!1,y=t.memoizedState,u.state=y,po(t,s,u,o);var k=t.memoizedState;f!==v||y!==k||ot.current||pn?(typeof j=="function"&&(Ll(t,r,j,s),k=t.memoizedState),(g=pn||qd(t,r,g,s,y,k,m)||!1)?(x||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(s,k,m),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(s,k,m)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||f===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=k),u.props=s,u.state=k,u.context=m,s=g):(typeof u.componentDidUpdate!="function"||f===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),s=!1)}return Il(e,t,r,s,c,o)}function Il(e,t,r,s,o,c){fm(e,t);var u=(t.flags&128)!==0;if(!s&&!u)return o&&Ud(t,r,!1),ln(e,t,c);s=t.stateNode,Av.current=t;var f=u&&typeof r.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&u?(t.child=Br(t,e.child,null,c),t.child=Br(t,null,f,c)):Qe(e,t,f,c),t.memoizedState=s.state,o&&Ud(t,r,!0),t.child}function mm(e){var t=e.stateNode;t.pendingContext?Fd(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Fd(e,t.context,!1),kc(e,t.containerInfo)}function rh(e,t,r,s,o){return Dr(),_c(o),t.flags|=256,Qe(e,t,r,s),t.child}var Rl={dehydrated:null,treeContext:null,retryLane:0};function zl(e){return{baseLanes:e,cachePool:null,transitions:null}}function pm(e,t,r){var s=t.pendingProps,o=ke.current,c=!1,u=(t.flags&128)!==0,f;if((f=u)||(f=e!==null&&e.memoizedState===null?!1:(o&2)!==0),f?(c=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),_e(ke,o&1),e===null)return El(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(u=s.children,e=s.fallback,c?(s=t.mode,c=t.child,u={mode:"hidden",children:u},!(s&1)&&c!==null?(c.childLanes=0,c.pendingProps=u):c=Ro(u,s,0,null),e=qn(e,s,r,null),c.return=t,e.return=t,c.sibling=e,t.child=c,t.child.memoizedState=zl(r),t.memoizedState=Rl,e):Oc(t,u));if(o=e.memoizedState,o!==null&&(f=o.dehydrated,f!==null))return Mv(e,t,u,s,f,o,r);if(c){c=s.fallback,u=t.mode,o=e.child,f=o.sibling;var m={mode:"hidden",children:s.children};return!(u&1)&&t.child!==o?(s=t.child,s.childLanes=0,s.pendingProps=m,t.deletions=null):(s=Pn(o,m),s.subtreeFlags=o.subtreeFlags&14680064),f!==null?c=Pn(f,c):(c=qn(c,u,r,null),c.flags|=2),c.return=t,s.return=t,s.sibling=c,t.child=s,s=c,c=t.child,u=e.child.memoizedState,u=u===null?zl(r):{baseLanes:u.baseLanes|r,cachePool:null,transitions:u.transitions},c.memoizedState=u,c.childLanes=e.childLanes&~r,t.memoizedState=Rl,s}return c=e.child,e=c.sibling,s=Pn(c,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=r),s.return=t,s.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function Oc(e,t){return t=Ro({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ms(e,t,r,s){return s!==null&&_c(s),Br(t,e.child,null,r),e=Oc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Mv(e,t,r,s,o,c,u){if(r)return t.flags&256?(t.flags&=-257,s=$a(Error(W(422))),Ms(e,t,u,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(c=s.fallback,o=t.mode,s=Ro({mode:"visible",children:s.children},o,0,null),c=qn(c,o,u,null),c.flags|=2,s.return=t,c.return=t,s.sibling=c,t.child=s,t.mode&1&&Br(t,e.child,null,u),t.child.memoizedState=zl(u),t.memoizedState=Rl,c);if(!(t.mode&1))return Ms(e,t,u,null);if(o.data==="$!"){if(s=o.nextSibling&&o.nextSibling.dataset,s)var f=s.dgst;return s=f,c=Error(W(419)),s=$a(c,s,void 0),Ms(e,t,u,s)}if(f=(u&e.childLanes)!==0,st||f){if(s=Ze,s!==null){switch(u&-u){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(s.suspendedLanes|u)?0:o,o!==0&&o!==c.retryLane&&(c.retryLane=o,an(e,o),Rt(s,e,o,-1))}return Fc(),s=$a(Error(W(421))),Ms(e,t,u,s)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=Gv.bind(null,e),o._reactRetry=t,null):(e=c.treeContext,dt=Nn(o.nextSibling),ht=t,Ne=!0,Ot=null,e!==null&&(_t[wt++]=tn,_t[wt++]=nn,_t[wt++]=Qn,tn=e.id,nn=e.overflow,Qn=t),t=Oc(t,s.children),t.flags|=4096,t)}function ih(e,t,r){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),Tl(e.return,t,r)}function Ja(e,t,r,s,o){var c=e.memoizedState;c===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:o}:(c.isBackwards=t,c.rendering=null,c.renderingStartTime=0,c.last=s,c.tail=r,c.tailMode=o)}function gm(e,t,r){var s=t.pendingProps,o=s.revealOrder,c=s.tail;if(Qe(e,t,s.children,r),s=ke.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ih(e,r,t);else if(e.tag===19)ih(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(_e(ke,s),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(r=t.child,o=null;r!==null;)e=r.alternate,e!==null&&go(e)===null&&(o=r),r=r.sibling;r=o,r===null?(o=t.child,t.child=null):(o=r.sibling,r.sibling=null),Ja(t,!1,o,r,c);break;case"backwards":for(r=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&go(e)===null){t.child=o;break}e=o.sibling,o.sibling=r,r=o,o=e}Ja(t,!0,r,null,c);break;case"together":Ja(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Gs(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ln(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),er|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(W(153));if(t.child!==null){for(e=t.child,r=Pn(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Pn(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Ov(e,t,r){switch(t.tag){case 3:mm(t),Dr();break;case 5:Zf(t);break;case 1:at(t.type)&&co(t);break;case 4:kc(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,o=t.memoizedProps.value;_e(fo,s._currentValue),s._currentValue=o;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(_e(ke,ke.current&1),t.flags|=128,null):r&t.child.childLanes?pm(e,t,r):(_e(ke,ke.current&1),e=ln(e,t,r),e!==null?e.sibling:null);_e(ke,ke.current&1);break;case 19:if(s=(r&t.childLanes)!==0,e.flags&128){if(s)return gm(e,t,r);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),_e(ke,ke.current),s)break;return null;case 22:case 23:return t.lanes=0,hm(e,t,r)}return ln(e,t,r)}var xm,Dl,vm,ym;xm=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Dl=function(){};vm=function(e,t,r,s){var o=e.memoizedProps;if(o!==s){e=t.stateNode,$n(Gt.current);var c=null;switch(r){case"input":o=ol(e,o),s=ol(e,s),c=[];break;case"select":o=Pe({},o,{value:void 0}),s=Pe({},s,{value:void 0}),c=[];break;case"textarea":o=cl(e,o),s=cl(e,s),c=[];break;default:typeof o.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=ao)}dl(r,s);var u;r=null;for(g in o)if(!s.hasOwnProperty(g)&&o.hasOwnProperty(g)&&o[g]!=null)if(g==="style"){var f=o[g];for(u in f)f.hasOwnProperty(u)&&(r||(r={}),r[u]="")}else g!=="dangerouslySetInnerHTML"&&g!=="children"&&g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(Ti.hasOwnProperty(g)?c||(c=[]):(c=c||[]).push(g,null));for(g in s){var m=s[g];if(f=o!=null?o[g]:void 0,s.hasOwnProperty(g)&&m!==f&&(m!=null||f!=null))if(g==="style")if(f){for(u in f)!f.hasOwnProperty(u)||m&&m.hasOwnProperty(u)||(r||(r={}),r[u]="");for(u in m)m.hasOwnProperty(u)&&f[u]!==m[u]&&(r||(r={}),r[u]=m[u])}else r||(c||(c=[]),c.push(g,r)),r=m;else g==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,f=f?f.__html:void 0,m!=null&&f!==m&&(c=c||[]).push(g,m)):g==="children"?typeof m!="string"&&typeof m!="number"||(c=c||[]).push(g,""+m):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&(Ti.hasOwnProperty(g)?(m!=null&&g==="onScroll"&&be("scroll",e),c||f===m||(c=[])):(c=c||[]).push(g,m))}r&&(c=c||[]).push("style",r);var g=c;(t.updateQueue=g)&&(t.flags|=4)}};ym=function(e,t,r,s){r!==s&&(t.flags|=4)};function hi(e,t){if(!Ne)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Je(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(t)for(var o=e.child;o!==null;)r|=o.lanes|o.childLanes,s|=o.subtreeFlags&14680064,s|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)r|=o.lanes|o.childLanes,s|=o.subtreeFlags,s|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function Iv(e,t,r){var s=t.pendingProps;switch(yc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Je(t),null;case 1:return at(t.type)&&lo(),Je(t),null;case 3:return s=t.stateNode,Fr(),Se(ot),Se(Ye),Pc(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Ls(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ot!==null&&(Gl(Ot),Ot=null))),Dl(e,t),Je(t),null;case 5:Cc(t);var o=$n(Zi.current);if(r=t.type,e!==null&&t.stateNode!=null)vm(e,t,r,s,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(W(166));return Je(t),null}if(e=$n(Gt.current),Ls(t)){s=t.stateNode,r=t.type;var c=t.memoizedProps;switch(s[Vt]=t,s[Fi]=c,e=(t.mode&1)!==0,r){case"dialog":be("cancel",s),be("close",s);break;case"iframe":case"object":case"embed":be("load",s);break;case"video":case"audio":for(o=0;o<yi.length;o++)be(yi[o],s);break;case"source":be("error",s);break;case"img":case"image":case"link":be("error",s),be("load",s);break;case"details":be("toggle",s);break;case"input":fd(s,c),be("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!c.multiple},be("invalid",s);break;case"textarea":pd(s,c),be("invalid",s)}dl(r,c),o=null;for(var u in c)if(c.hasOwnProperty(u)){var f=c[u];u==="children"?typeof f=="string"?s.textContent!==f&&(c.suppressHydrationWarning!==!0&&Ts(s.textContent,f,e),o=["children",f]):typeof f=="number"&&s.textContent!==""+f&&(c.suppressHydrationWarning!==!0&&Ts(s.textContent,f,e),o=["children",""+f]):Ti.hasOwnProperty(u)&&f!=null&&u==="onScroll"&&be("scroll",s)}switch(r){case"input":bs(s),md(s,c,!0);break;case"textarea":bs(s),gd(s);break;case"select":case"option":break;default:typeof c.onClick=="function"&&(s.onclick=ao)}s=o,t.updateQueue=s,s!==null&&(t.flags|=4)}else{u=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Gh(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=u.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=u.createElement(r,{is:s.is}):(e=u.createElement(r),r==="select"&&(u=e,s.multiple?u.multiple=!0:s.size&&(u.size=s.size))):e=u.createElementNS(e,r),e[Vt]=t,e[Fi]=s,xm(e,t,!1,!1),t.stateNode=e;e:{switch(u=hl(r,s),r){case"dialog":be("cancel",e),be("close",e),o=s;break;case"iframe":case"object":case"embed":be("load",e),o=s;break;case"video":case"audio":for(o=0;o<yi.length;o++)be(yi[o],e);o=s;break;case"source":be("error",e),o=s;break;case"img":case"image":case"link":be("error",e),be("load",e),o=s;break;case"details":be("toggle",e),o=s;break;case"input":fd(e,s),o=ol(e,s),be("invalid",e);break;case"option":o=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},o=Pe({},s,{value:void 0}),be("invalid",e);break;case"textarea":pd(e,s),o=cl(e,s),be("invalid",e);break;default:o=s}dl(r,o),f=o;for(c in f)if(f.hasOwnProperty(c)){var m=f[c];c==="style"?qh(e,m):c==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,m!=null&&$h(e,m)):c==="children"?typeof m=="string"?(r!=="textarea"||m!=="")&&Li(e,m):typeof m=="number"&&Li(e,""+m):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ti.hasOwnProperty(c)?m!=null&&c==="onScroll"&&be("scroll",e):m!=null&&ic(e,c,m,u))}switch(r){case"input":bs(e),md(e,s,!1);break;case"textarea":bs(e),gd(e);break;case"option":s.value!=null&&e.setAttribute("value",""+En(s.value));break;case"select":e.multiple=!!s.multiple,c=s.value,c!=null?Tr(e,!!s.multiple,c,!1):s.defaultValue!=null&&Tr(e,!!s.multiple,s.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=ao)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Je(t),null;case 6:if(e&&t.stateNode!=null)ym(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(W(166));if(r=$n(Zi.current),$n(Gt.current),Ls(t)){if(s=t.stateNode,r=t.memoizedProps,s[Vt]=t,(c=s.nodeValue!==r)&&(e=ht,e!==null))switch(e.tag){case 3:Ts(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ts(s.nodeValue,r,(e.mode&1)!==0)}c&&(t.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[Vt]=t,t.stateNode=s}return Je(t),null;case 13:if(Se(ke),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ne&&dt!==null&&t.mode&1&&!(t.flags&128))zf(),Dr(),t.flags|=98560,c=!1;else if(c=Ls(t),s!==null&&s.dehydrated!==null){if(e===null){if(!c)throw Error(W(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(W(317));c[Vt]=t}else Dr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Je(t),c=!1}else Ot!==null&&(Gl(Ot),Ot=null),c=!0;if(!c)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||ke.current&1?De===0&&(De=3):Fc())),t.updateQueue!==null&&(t.flags|=4),Je(t),null);case 4:return Fr(),Dl(e,t),e===null&&Di(t.stateNode.containerInfo),Je(t),null;case 10:return Sc(t.type._context),Je(t),null;case 17:return at(t.type)&&lo(),Je(t),null;case 19:if(Se(ke),c=t.memoizedState,c===null)return Je(t),null;if(s=(t.flags&128)!==0,u=c.rendering,u===null)if(s)hi(c,!1);else{if(De!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(u=go(e),u!==null){for(t.flags|=128,hi(c,!1),s=u.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;r!==null;)c=r,e=s,c.flags&=14680066,u=c.alternate,u===null?(c.childLanes=0,c.lanes=e,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=u.childLanes,c.lanes=u.lanes,c.child=u.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=u.memoizedProps,c.memoizedState=u.memoizedState,c.updateQueue=u.updateQueue,c.type=u.type,e=u.dependencies,c.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return _e(ke,ke.current&1|2),t.child}e=e.sibling}c.tail!==null&&Ae()>Zr&&(t.flags|=128,s=!0,hi(c,!1),t.lanes=4194304)}else{if(!s)if(e=go(u),e!==null){if(t.flags|=128,s=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),hi(c,!0),c.tail===null&&c.tailMode==="hidden"&&!u.alternate&&!Ne)return Je(t),null}else 2*Ae()-c.renderingStartTime>Zr&&r!==1073741824&&(t.flags|=128,s=!0,hi(c,!1),t.lanes=4194304);c.isBackwards?(u.sibling=t.child,t.child=u):(r=c.last,r!==null?r.sibling=u:t.child=u,c.last=u)}return c.tail!==null?(t=c.tail,c.rendering=t,c.tail=t.sibling,c.renderingStartTime=Ae(),t.sibling=null,r=ke.current,_e(ke,s?r&1|2:r&1),t):(Je(t),null);case 22:case 23:return Bc(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?ut&1073741824&&(Je(t),t.subtreeFlags&6&&(t.flags|=8192)):Je(t),null;case 24:return null;case 25:return null}throw Error(W(156,t.tag))}function Rv(e,t){switch(yc(t),t.tag){case 1:return at(t.type)&&lo(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Fr(),Se(ot),Se(Ye),Pc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Cc(t),null;case 13:if(Se(ke),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(W(340));Dr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Se(ke),null;case 4:return Fr(),null;case 10:return Sc(t.type._context),null;case 22:case 23:return Bc(),null;case 24:return null;default:return null}}var Os=!1,qe=!1,zv=typeof WeakSet=="function"?WeakSet:Set,q=null;function Cr(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){Te(e,t,s)}else r.current=null}function Bl(e,t,r){try{r()}catch(s){Te(e,t,s)}}var sh=!1;function Dv(e,t){if(bl=io,e=Nf(),xc(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var o=s.anchorOffset,c=s.focusNode;s=s.focusOffset;try{r.nodeType,c.nodeType}catch{r=null;break e}var u=0,f=-1,m=-1,g=0,x=0,v=e,y=null;t:for(;;){for(var j;v!==r||o!==0&&v.nodeType!==3||(f=u+o),v!==c||s!==0&&v.nodeType!==3||(m=u+s),v.nodeType===3&&(u+=v.nodeValue.length),(j=v.firstChild)!==null;)y=v,v=j;for(;;){if(v===e)break t;if(y===r&&++g===o&&(f=u),y===c&&++x===s&&(m=u),(j=v.nextSibling)!==null)break;v=y,y=v.parentNode}v=j}r=f===-1||m===-1?null:{start:f,end:m}}else r=null}r=r||{start:0,end:0}}else r=null;for(Sl={focusedElem:e,selectionRange:r},io=!1,q=t;q!==null;)if(t=q,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,q=e;else for(;q!==null;){t=q;try{var k=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var C=k.memoizedProps,R=k.memoizedState,b=t.stateNode,_=b.getSnapshotBeforeUpdate(t.elementType===t.type?C:At(t.type,C),R);b.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var S=t.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(T){Te(t,t.return,T)}if(e=t.sibling,e!==null){e.return=t.return,q=e;break}q=t.return}return k=sh,sh=!1,k}function ki(e,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var o=s=s.next;do{if((o.tag&e)===e){var c=o.destroy;o.destroy=void 0,c!==void 0&&Bl(t,r,c)}o=o.next}while(o!==s)}}function Oo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function Fl(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function _m(e){var t=e.alternate;t!==null&&(e.alternate=null,_m(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Vt],delete t[Fi],delete t[kl],delete t[_v],delete t[wv])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function wm(e){return e.tag===5||e.tag===3||e.tag===4}function oh(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||wm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ul(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=ao));else if(s!==4&&(e=e.child,e!==null))for(Ul(e,t,r),e=e.sibling;e!==null;)Ul(e,t,r),e=e.sibling}function Zl(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(Zl(e,t,r),e=e.sibling;e!==null;)Zl(e,t,r),e=e.sibling}var Ve=null,Mt=!1;function fn(e,t,r){for(r=r.child;r!==null;)bm(e,t,r),r=r.sibling}function bm(e,t,r){if(Ht&&typeof Ht.onCommitFiberUnmount=="function")try{Ht.onCommitFiberUnmount(ko,r)}catch{}switch(r.tag){case 5:qe||Cr(r,t);case 6:var s=Ve,o=Mt;Ve=null,fn(e,t,r),Ve=s,Mt=o,Ve!==null&&(Mt?(e=Ve,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ve.removeChild(r.stateNode));break;case 18:Ve!==null&&(Mt?(e=Ve,r=r.stateNode,e.nodeType===8?Ua(e.parentNode,r):e.nodeType===1&&Ua(e,r),Ii(e)):Ua(Ve,r.stateNode));break;case 4:s=Ve,o=Mt,Ve=r.stateNode.containerInfo,Mt=!0,fn(e,t,r),Ve=s,Mt=o;break;case 0:case 11:case 14:case 15:if(!qe&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){o=s=s.next;do{var c=o,u=c.destroy;c=c.tag,u!==void 0&&(c&2||c&4)&&Bl(r,t,u),o=o.next}while(o!==s)}fn(e,t,r);break;case 1:if(!qe&&(Cr(r,t),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(f){Te(r,t,f)}fn(e,t,r);break;case 21:fn(e,t,r);break;case 22:r.mode&1?(qe=(s=qe)||r.memoizedState!==null,fn(e,t,r),qe=s):fn(e,t,r);break;default:fn(e,t,r)}}function ah(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new zv),t.forEach(function(s){var o=$v.bind(null,e,s);r.has(s)||(r.add(s),s.then(o,o))})}}function Tt(e,t){var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var o=r[s];try{var c=e,u=t,f=u;e:for(;f!==null;){switch(f.tag){case 5:Ve=f.stateNode,Mt=!1;break e;case 3:Ve=f.stateNode.containerInfo,Mt=!0;break e;case 4:Ve=f.stateNode.containerInfo,Mt=!0;break e}f=f.return}if(Ve===null)throw Error(W(160));bm(c,u,o),Ve=null,Mt=!1;var m=o.alternate;m!==null&&(m.return=null),o.return=null}catch(g){Te(o,t,g)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Sm(t,e),t=t.sibling}function Sm(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Tt(t,e),Zt(e),s&4){try{ki(3,e,e.return),Oo(3,e)}catch(C){Te(e,e.return,C)}try{ki(5,e,e.return)}catch(C){Te(e,e.return,C)}}break;case 1:Tt(t,e),Zt(e),s&512&&r!==null&&Cr(r,r.return);break;case 5:if(Tt(t,e),Zt(e),s&512&&r!==null&&Cr(r,r.return),e.flags&32){var o=e.stateNode;try{Li(o,"")}catch(C){Te(e,e.return,C)}}if(s&4&&(o=e.stateNode,o!=null)){var c=e.memoizedProps,u=r!==null?r.memoizedProps:c,f=e.type,m=e.updateQueue;if(e.updateQueue=null,m!==null)try{f==="input"&&c.type==="radio"&&c.name!=null&&Vh(o,c),hl(f,u);var g=hl(f,c);for(u=0;u<m.length;u+=2){var x=m[u],v=m[u+1];x==="style"?qh(o,v):x==="dangerouslySetInnerHTML"?$h(o,v):x==="children"?Li(o,v):ic(o,x,v,g)}switch(f){case"input":al(o,c);break;case"textarea":Hh(o,c);break;case"select":var y=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!c.multiple;var j=c.value;j!=null?Tr(o,!!c.multiple,j,!1):y!==!!c.multiple&&(c.defaultValue!=null?Tr(o,!!c.multiple,c.defaultValue,!0):Tr(o,!!c.multiple,c.multiple?[]:"",!1))}o[Fi]=c}catch(C){Te(e,e.return,C)}}break;case 6:if(Tt(t,e),Zt(e),s&4){if(e.stateNode===null)throw Error(W(162));o=e.stateNode,c=e.memoizedProps;try{o.nodeValue=c}catch(C){Te(e,e.return,C)}}break;case 3:if(Tt(t,e),Zt(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{Ii(t.containerInfo)}catch(C){Te(e,e.return,C)}break;case 4:Tt(t,e),Zt(e);break;case 13:Tt(t,e),Zt(e),o=e.child,o.flags&8192&&(c=o.memoizedState!==null,o.stateNode.isHidden=c,!c||o.alternate!==null&&o.alternate.memoizedState!==null||(zc=Ae())),s&4&&ah(e);break;case 22:if(x=r!==null&&r.memoizedState!==null,e.mode&1?(qe=(g=qe)||x,Tt(t,e),qe=g):Tt(t,e),Zt(e),s&8192){if(g=e.memoizedState!==null,(e.stateNode.isHidden=g)&&!x&&e.mode&1)for(q=e,x=e.child;x!==null;){for(v=q=x;q!==null;){switch(y=q,j=y.child,y.tag){case 0:case 11:case 14:case 15:ki(4,y,y.return);break;case 1:Cr(y,y.return);var k=y.stateNode;if(typeof k.componentWillUnmount=="function"){s=y,r=y.return;try{t=s,k.props=t.memoizedProps,k.state=t.memoizedState,k.componentWillUnmount()}catch(C){Te(s,r,C)}}break;case 5:Cr(y,y.return);break;case 22:if(y.memoizedState!==null){ch(v);continue}}j!==null?(j.return=y,q=j):ch(v)}x=x.sibling}e:for(x=null,v=e;;){if(v.tag===5){if(x===null){x=v;try{o=v.stateNode,g?(c=o.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none"):(f=v.stateNode,m=v.memoizedProps.style,u=m!=null&&m.hasOwnProperty("display")?m.display:null,f.style.display=Jh("display",u))}catch(C){Te(e,e.return,C)}}}else if(v.tag===6){if(x===null)try{v.stateNode.nodeValue=g?"":v.memoizedProps}catch(C){Te(e,e.return,C)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===e)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===e)break e;for(;v.sibling===null;){if(v.return===null||v.return===e)break e;x===v&&(x=null),v=v.return}x===v&&(x=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:Tt(t,e),Zt(e),s&4&&ah(e);break;case 21:break;default:Tt(t,e),Zt(e)}}function Zt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(wm(r)){var s=r;break e}r=r.return}throw Error(W(160))}switch(s.tag){case 5:var o=s.stateNode;s.flags&32&&(Li(o,""),s.flags&=-33);var c=oh(e);Zl(e,c,o);break;case 3:case 4:var u=s.stateNode.containerInfo,f=oh(e);Ul(e,f,u);break;default:throw Error(W(161))}}catch(m){Te(e,e.return,m)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Bv(e,t,r){q=e,Nm(e)}function Nm(e,t,r){for(var s=(e.mode&1)!==0;q!==null;){var o=q,c=o.child;if(o.tag===22&&s){var u=o.memoizedState!==null||Os;if(!u){var f=o.alternate,m=f!==null&&f.memoizedState!==null||qe;f=Os;var g=qe;if(Os=u,(qe=m)&&!g)for(q=o;q!==null;)u=q,m=u.child,u.tag===22&&u.memoizedState!==null?uh(o):m!==null?(m.return=u,q=m):uh(o);for(;c!==null;)q=c,Nm(c),c=c.sibling;q=o,Os=f,qe=g}lh(e)}else o.subtreeFlags&8772&&c!==null?(c.return=o,q=c):lh(e)}}function lh(e){for(;q!==null;){var t=q;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:qe||Oo(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!qe)if(r===null)s.componentDidMount();else{var o=t.elementType===t.type?r.memoizedProps:At(t.type,r.memoizedProps);s.componentDidUpdate(o,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var c=t.updateQueue;c!==null&&Gd(t,c,s);break;case 3:var u=t.updateQueue;if(u!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Gd(t,u,r)}break;case 5:var f=t.stateNode;if(r===null&&t.flags&4){r=f;var m=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":m.autoFocus&&r.focus();break;case"img":m.src&&(r.src=m.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var g=t.alternate;if(g!==null){var x=g.memoizedState;if(x!==null){var v=x.dehydrated;v!==null&&Ii(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}qe||t.flags&512&&Fl(t)}catch(y){Te(t,t.return,y)}}if(t===e){q=null;break}if(r=t.sibling,r!==null){r.return=t.return,q=r;break}q=t.return}}function ch(e){for(;q!==null;){var t=q;if(t===e){q=null;break}var r=t.sibling;if(r!==null){r.return=t.return,q=r;break}q=t.return}}function uh(e){for(;q!==null;){var t=q;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Oo(4,t)}catch(m){Te(t,r,m)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var o=t.return;try{s.componentDidMount()}catch(m){Te(t,o,m)}}var c=t.return;try{Fl(t)}catch(m){Te(t,c,m)}break;case 5:var u=t.return;try{Fl(t)}catch(m){Te(t,u,m)}}}catch(m){Te(t,t.return,m)}if(t===e){q=null;break}var f=t.sibling;if(f!==null){f.return=t.return,q=f;break}q=t.return}}var Fv=Math.ceil,yo=cn.ReactCurrentDispatcher,Ic=cn.ReactCurrentOwner,Nt=cn.ReactCurrentBatchConfig,ge=0,Ze=null,Re=null,He=0,ut=0,Pr=Mn(0),De=0,Gi=null,er=0,Io=0,Rc=0,Ci=null,it=null,zc=0,Zr=1/0,Kt=null,_o=!1,Wl=null,kn=null,Is=!1,_n=null,wo=0,Pi=0,Vl=null,$s=-1,Js=0;function Xe(){return ge&6?Ae():$s!==-1?$s:$s=Ae()}function Cn(e){return e.mode&1?ge&2&&He!==0?He&-He:Sv.transition!==null?(Js===0&&(Js=lf()),Js):(e=ve,e!==0||(e=window.event,e=e===void 0?16:pf(e.type)),e):1}function Rt(e,t,r,s){if(50<Pi)throw Pi=0,Vl=null,Error(W(185));Ji(e,r,s),(!(ge&2)||e!==Ze)&&(e===Ze&&(!(ge&2)&&(Io|=r),De===4&&vn(e,He)),lt(e,s),r===1&&ge===0&&!(t.mode&1)&&(Zr=Ae()+500,Lo&&On()))}function lt(e,t){var r=e.callbackNode;Sx(e,t);var s=ro(e,e===Ze?He:0);if(s===0)r!==null&&yd(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(r!=null&&yd(r),t===1)e.tag===0?bv(dh.bind(null,e)):Of(dh.bind(null,e)),vv(function(){!(ge&6)&&On()}),r=null;else{switch(cf(s)){case 1:r=cc;break;case 4:r=of;break;case 16:r=no;break;case 536870912:r=af;break;default:r=no}r=Am(r,jm.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function jm(e,t){if($s=-1,Js=0,ge&6)throw Error(W(327));var r=e.callbackNode;if(Ir()&&e.callbackNode!==r)return null;var s=ro(e,e===Ze?He:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=bo(e,s);else{t=s;var o=ge;ge|=2;var c=Cm();(Ze!==e||He!==t)&&(Kt=null,Zr=Ae()+500,Jn(e,t));do try{Wv();break}catch(f){km(e,f)}while(!0);bc(),yo.current=c,ge=o,Re!==null?t=0:(Ze=null,He=0,t=De)}if(t!==0){if(t===2&&(o=xl(e),o!==0&&(s=o,t=Hl(e,o))),t===1)throw r=Gi,Jn(e,0),vn(e,s),lt(e,Ae()),r;if(t===6)vn(e,s);else{if(o=e.current.alternate,!(s&30)&&!Uv(o)&&(t=bo(e,s),t===2&&(c=xl(e),c!==0&&(s=c,t=Hl(e,c))),t===1))throw r=Gi,Jn(e,0),vn(e,s),lt(e,Ae()),r;switch(e.finishedWork=o,e.finishedLanes=s,t){case 0:case 1:throw Error(W(345));case 2:Vn(e,it,Kt);break;case 3:if(vn(e,s),(s&130023424)===s&&(t=zc+500-Ae(),10<t)){if(ro(e,0)!==0)break;if(o=e.suspendedLanes,(o&s)!==s){Xe(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=jl(Vn.bind(null,e,it,Kt),t);break}Vn(e,it,Kt);break;case 4:if(vn(e,s),(s&4194240)===s)break;for(t=e.eventTimes,o=-1;0<s;){var u=31-It(s);c=1<<u,u=t[u],u>o&&(o=u),s&=~c}if(s=o,s=Ae()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Fv(s/1960))-s,10<s){e.timeoutHandle=jl(Vn.bind(null,e,it,Kt),s);break}Vn(e,it,Kt);break;case 5:Vn(e,it,Kt);break;default:throw Error(W(329))}}}return lt(e,Ae()),e.callbackNode===r?jm.bind(null,e):null}function Hl(e,t){var r=Ci;return e.current.memoizedState.isDehydrated&&(Jn(e,t).flags|=256),e=bo(e,t),e!==2&&(t=it,it=r,t!==null&&Gl(t)),e}function Gl(e){it===null?it=e:it.push.apply(it,e)}function Uv(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var o=r[s],c=o.getSnapshot;o=o.value;try{if(!zt(c(),o))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function vn(e,t){for(t&=~Rc,t&=~Io,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-It(t),s=1<<r;e[r]=-1,t&=~s}}function dh(e){if(ge&6)throw Error(W(327));Ir();var t=ro(e,0);if(!(t&1))return lt(e,Ae()),null;var r=bo(e,t);if(e.tag!==0&&r===2){var s=xl(e);s!==0&&(t=s,r=Hl(e,s))}if(r===1)throw r=Gi,Jn(e,0),vn(e,t),lt(e,Ae()),r;if(r===6)throw Error(W(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Vn(e,it,Kt),lt(e,Ae()),null}function Dc(e,t){var r=ge;ge|=1;try{return e(t)}finally{ge=r,ge===0&&(Zr=Ae()+500,Lo&&On())}}function tr(e){_n!==null&&_n.tag===0&&!(ge&6)&&Ir();var t=ge;ge|=1;var r=Nt.transition,s=ve;try{if(Nt.transition=null,ve=1,e)return e()}finally{ve=s,Nt.transition=r,ge=t,!(ge&6)&&On()}}function Bc(){ut=Pr.current,Se(Pr)}function Jn(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,xv(r)),Re!==null)for(r=Re.return;r!==null;){var s=r;switch(yc(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&lo();break;case 3:Fr(),Se(ot),Se(Ye),Pc();break;case 5:Cc(s);break;case 4:Fr();break;case 13:Se(ke);break;case 19:Se(ke);break;case 10:Sc(s.type._context);break;case 22:case 23:Bc()}r=r.return}if(Ze=e,Re=e=Pn(e.current,null),He=ut=t,De=0,Gi=null,Rc=Io=er=0,it=Ci=null,Gn!==null){for(t=0;t<Gn.length;t++)if(r=Gn[t],s=r.interleaved,s!==null){r.interleaved=null;var o=s.next,c=r.pending;if(c!==null){var u=c.next;c.next=o,s.next=u}r.pending=s}Gn=null}return e}function km(e,t){do{var r=Re;try{if(bc(),Vs.current=vo,xo){for(var s=Ce.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}xo=!1}if(Xn=0,Ue=ze=Ce=null,ji=!1,Wi=0,Ic.current=null,r===null||r.return===null){De=1,Gi=t,Re=null;break}e:{var c=e,u=r.return,f=r,m=t;if(t=He,f.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){var g=m,x=f,v=x.tag;if(!(x.mode&1)&&(v===0||v===11||v===15)){var y=x.alternate;y?(x.updateQueue=y.updateQueue,x.memoizedState=y.memoizedState,x.lanes=y.lanes):(x.updateQueue=null,x.memoizedState=null)}var j=Qd(u);if(j!==null){j.flags&=-257,Xd(j,u,f,c,t),j.mode&1&&Kd(c,g,t),t=j,m=g;var k=t.updateQueue;if(k===null){var C=new Set;C.add(m),t.updateQueue=C}else k.add(m);break e}else{if(!(t&1)){Kd(c,g,t),Fc();break e}m=Error(W(426))}}else if(Ne&&f.mode&1){var R=Qd(u);if(R!==null){!(R.flags&65536)&&(R.flags|=256),Xd(R,u,f,c,t),_c(Ur(m,f));break e}}c=m=Ur(m,f),De!==4&&(De=2),Ci===null?Ci=[c]:Ci.push(c),c=u;do{switch(c.tag){case 3:c.flags|=65536,t&=-t,c.lanes|=t;var b=cm(c,m,t);Hd(c,b);break e;case 1:f=m;var _=c.type,S=c.stateNode;if(!(c.flags&128)&&(typeof _.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(kn===null||!kn.has(S)))){c.flags|=65536,t&=-t,c.lanes|=t;var T=um(c,f,t);Hd(c,T);break e}}c=c.return}while(c!==null)}Em(r)}catch(z){t=z,Re===r&&r!==null&&(Re=r=r.return);continue}break}while(!0)}function Cm(){var e=yo.current;return yo.current=vo,e===null?vo:e}function Fc(){(De===0||De===3||De===2)&&(De=4),Ze===null||!(er&268435455)&&!(Io&268435455)||vn(Ze,He)}function bo(e,t){var r=ge;ge|=2;var s=Cm();(Ze!==e||He!==t)&&(Kt=null,Jn(e,t));do try{Zv();break}catch(o){km(e,o)}while(!0);if(bc(),ge=r,yo.current=s,Re!==null)throw Error(W(261));return Ze=null,He=0,De}function Zv(){for(;Re!==null;)Pm(Re)}function Wv(){for(;Re!==null&&!mx();)Pm(Re)}function Pm(e){var t=Lm(e.alternate,e,ut);e.memoizedProps=e.pendingProps,t===null?Em(e):Re=t,Ic.current=null}function Em(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Rv(r,t),r!==null){r.flags&=32767,Re=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{De=6,Re=null;return}}else if(r=Iv(r,t,ut),r!==null){Re=r;return}if(t=t.sibling,t!==null){Re=t;return}Re=t=e}while(t!==null);De===0&&(De=5)}function Vn(e,t,r){var s=ve,o=Nt.transition;try{Nt.transition=null,ve=1,Vv(e,t,r,s)}finally{Nt.transition=o,ve=s}return null}function Vv(e,t,r,s){do Ir();while(_n!==null);if(ge&6)throw Error(W(327));r=e.finishedWork;var o=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(W(177));e.callbackNode=null,e.callbackPriority=0;var c=r.lanes|r.childLanes;if(Nx(e,c),e===Ze&&(Re=Ze=null,He=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Is||(Is=!0,Am(no,function(){return Ir(),null})),c=(r.flags&15990)!==0,r.subtreeFlags&15990||c){c=Nt.transition,Nt.transition=null;var u=ve;ve=1;var f=ge;ge|=4,Ic.current=null,Dv(e,r),Sm(r,e),uv(Sl),io=!!bl,Sl=bl=null,e.current=r,Bv(r),px(),ge=f,ve=u,Nt.transition=c}else e.current=r;if(Is&&(Is=!1,_n=e,wo=o),c=e.pendingLanes,c===0&&(kn=null),vx(r.stateNode),lt(e,Ae()),t!==null)for(s=e.onRecoverableError,r=0;r<t.length;r++)o=t[r],s(o.value,{componentStack:o.stack,digest:o.digest});if(_o)throw _o=!1,e=Wl,Wl=null,e;return wo&1&&e.tag!==0&&Ir(),c=e.pendingLanes,c&1?e===Vl?Pi++:(Pi=0,Vl=e):Pi=0,On(),null}function Ir(){if(_n!==null){var e=cf(wo),t=Nt.transition,r=ve;try{if(Nt.transition=null,ve=16>e?16:e,_n===null)var s=!1;else{if(e=_n,_n=null,wo=0,ge&6)throw Error(W(331));var o=ge;for(ge|=4,q=e.current;q!==null;){var c=q,u=c.child;if(q.flags&16){var f=c.deletions;if(f!==null){for(var m=0;m<f.length;m++){var g=f[m];for(q=g;q!==null;){var x=q;switch(x.tag){case 0:case 11:case 15:ki(8,x,c)}var v=x.child;if(v!==null)v.return=x,q=v;else for(;q!==null;){x=q;var y=x.sibling,j=x.return;if(_m(x),x===g){q=null;break}if(y!==null){y.return=j,q=y;break}q=j}}}var k=c.alternate;if(k!==null){var C=k.child;if(C!==null){k.child=null;do{var R=C.sibling;C.sibling=null,C=R}while(C!==null)}}q=c}}if(c.subtreeFlags&2064&&u!==null)u.return=c,q=u;else e:for(;q!==null;){if(c=q,c.flags&2048)switch(c.tag){case 0:case 11:case 15:ki(9,c,c.return)}var b=c.sibling;if(b!==null){b.return=c.return,q=b;break e}q=c.return}}var _=e.current;for(q=_;q!==null;){u=q;var S=u.child;if(u.subtreeFlags&2064&&S!==null)S.return=u,q=S;else e:for(u=_;q!==null;){if(f=q,f.flags&2048)try{switch(f.tag){case 0:case 11:case 15:Oo(9,f)}}catch(z){Te(f,f.return,z)}if(f===u){q=null;break e}var T=f.sibling;if(T!==null){T.return=f.return,q=T;break e}q=f.return}}if(ge=o,On(),Ht&&typeof Ht.onPostCommitFiberRoot=="function")try{Ht.onPostCommitFiberRoot(ko,e)}catch{}s=!0}return s}finally{ve=r,Nt.transition=t}}return!1}function hh(e,t,r){t=Ur(r,t),t=cm(e,t,1),e=jn(e,t,1),t=Xe(),e!==null&&(Ji(e,1,t),lt(e,t))}function Te(e,t,r){if(e.tag===3)hh(e,e,r);else for(;t!==null;){if(t.tag===3){hh(t,e,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(kn===null||!kn.has(s))){e=Ur(r,e),e=um(t,e,1),t=jn(t,e,1),e=Xe(),t!==null&&(Ji(t,1,e),lt(t,e));break}}t=t.return}}function Hv(e,t,r){var s=e.pingCache;s!==null&&s.delete(t),t=Xe(),e.pingedLanes|=e.suspendedLanes&r,Ze===e&&(He&r)===r&&(De===4||De===3&&(He&130023424)===He&&500>Ae()-zc?Jn(e,0):Rc|=r),lt(e,t)}function Tm(e,t){t===0&&(e.mode&1?(t=js,js<<=1,!(js&130023424)&&(js=4194304)):t=1);var r=Xe();e=an(e,t),e!==null&&(Ji(e,t,r),lt(e,r))}function Gv(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Tm(e,r)}function $v(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,o=e.memoizedState;o!==null&&(r=o.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(W(314))}s!==null&&s.delete(t),Tm(e,r)}var Lm;Lm=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||ot.current)st=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return st=!1,Ov(e,t,r);st=!!(e.flags&131072)}else st=!1,Ne&&t.flags&1048576&&If(t,ho,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Gs(e,t),e=t.pendingProps;var o=zr(t,Ye.current);Or(t,r),o=Tc(null,t,s,e,o,r);var c=Lc();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,at(s)?(c=!0,co(t)):c=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,jc(t),o.updater=Mo,t.stateNode=o,o._reactInternals=t,Al(t,s,e,r),t=Il(null,t,s,!0,c,r)):(t.tag=0,Ne&&c&&vc(t),Qe(null,t,o,r),t=t.child),t;case 16:s=t.elementType;e:{switch(Gs(e,t),e=t.pendingProps,o=s._init,s=o(s._payload),t.type=s,o=t.tag=qv(s),e=At(s,e),o){case 0:t=Ol(null,t,s,e,r);break e;case 1:t=nh(null,t,s,e,r);break e;case 11:t=eh(null,t,s,e,r);break e;case 14:t=th(null,t,s,At(s.type,e),r);break e}throw Error(W(306,s,""))}return t;case 0:return s=t.type,o=t.pendingProps,o=t.elementType===s?o:At(s,o),Ol(e,t,s,o,r);case 1:return s=t.type,o=t.pendingProps,o=t.elementType===s?o:At(s,o),nh(e,t,s,o,r);case 3:e:{if(mm(t),e===null)throw Error(W(387));s=t.pendingProps,c=t.memoizedState,o=c.element,Uf(e,t),po(t,s,null,r);var u=t.memoizedState;if(s=u.element,c.isDehydrated)if(c={element:s,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=c,t.memoizedState=c,t.flags&256){o=Ur(Error(W(423)),t),t=rh(e,t,s,r,o);break e}else if(s!==o){o=Ur(Error(W(424)),t),t=rh(e,t,s,r,o);break e}else for(dt=Nn(t.stateNode.containerInfo.firstChild),ht=t,Ne=!0,Ot=null,r=Bf(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Dr(),s===o){t=ln(e,t,r);break e}Qe(e,t,s,r)}t=t.child}return t;case 5:return Zf(t),e===null&&El(t),s=t.type,o=t.pendingProps,c=e!==null?e.memoizedProps:null,u=o.children,Nl(s,o)?u=null:c!==null&&Nl(s,c)&&(t.flags|=32),fm(e,t),Qe(e,t,u,r),t.child;case 6:return e===null&&El(t),null;case 13:return pm(e,t,r);case 4:return kc(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Br(t,null,s,r):Qe(e,t,s,r),t.child;case 11:return s=t.type,o=t.pendingProps,o=t.elementType===s?o:At(s,o),eh(e,t,s,o,r);case 7:return Qe(e,t,t.pendingProps,r),t.child;case 8:return Qe(e,t,t.pendingProps.children,r),t.child;case 12:return Qe(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,o=t.pendingProps,c=t.memoizedProps,u=o.value,_e(fo,s._currentValue),s._currentValue=u,c!==null)if(zt(c.value,u)){if(c.children===o.children&&!ot.current){t=ln(e,t,r);break e}}else for(c=t.child,c!==null&&(c.return=t);c!==null;){var f=c.dependencies;if(f!==null){u=c.child;for(var m=f.firstContext;m!==null;){if(m.context===s){if(c.tag===1){m=rn(-1,r&-r),m.tag=2;var g=c.updateQueue;if(g!==null){g=g.shared;var x=g.pending;x===null?m.next=m:(m.next=x.next,x.next=m),g.pending=m}}c.lanes|=r,m=c.alternate,m!==null&&(m.lanes|=r),Tl(c.return,r,t),f.lanes|=r;break}m=m.next}}else if(c.tag===10)u=c.type===t.type?null:c.child;else if(c.tag===18){if(u=c.return,u===null)throw Error(W(341));u.lanes|=r,f=u.alternate,f!==null&&(f.lanes|=r),Tl(u,r,t),u=c.sibling}else u=c.child;if(u!==null)u.return=c;else for(u=c;u!==null;){if(u===t){u=null;break}if(c=u.sibling,c!==null){c.return=u.return,u=c;break}u=u.return}c=u}Qe(e,t,o.children,r),t=t.child}return t;case 9:return o=t.type,s=t.pendingProps.children,Or(t,r),o=jt(o),s=s(o),t.flags|=1,Qe(e,t,s,r),t.child;case 14:return s=t.type,o=At(s,t.pendingProps),o=At(s.type,o),th(e,t,s,o,r);case 15:return dm(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,o=t.pendingProps,o=t.elementType===s?o:At(s,o),Gs(e,t),t.tag=1,at(s)?(e=!0,co(t)):e=!1,Or(t,r),lm(t,s,o),Al(t,s,o,r),Il(null,t,s,!0,e,r);case 19:return gm(e,t,r);case 22:return hm(e,t,r)}throw Error(W(156,t.tag))};function Am(e,t){return sf(e,t)}function Jv(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bt(e,t,r,s){return new Jv(e,t,r,s)}function Uc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function qv(e){if(typeof e=="function")return Uc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===oc)return 11;if(e===ac)return 14}return 2}function Pn(e,t){var r=e.alternate;return r===null?(r=bt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function qs(e,t,r,s,o,c){var u=2;if(s=e,typeof e=="function")Uc(e)&&(u=1);else if(typeof e=="string")u=5;else e:switch(e){case vr:return qn(r.children,o,c,t);case sc:u=8,o|=8;break;case nl:return e=bt(12,r,t,o|2),e.elementType=nl,e.lanes=c,e;case rl:return e=bt(13,r,t,o),e.elementType=rl,e.lanes=c,e;case il:return e=bt(19,r,t,o),e.elementType=il,e.lanes=c,e;case Uh:return Ro(r,o,c,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Bh:u=10;break e;case Fh:u=9;break e;case oc:u=11;break e;case ac:u=14;break e;case mn:u=16,s=null;break e}throw Error(W(130,e==null?e:typeof e,""))}return t=bt(u,r,t,o),t.elementType=e,t.type=s,t.lanes=c,t}function qn(e,t,r,s){return e=bt(7,e,s,t),e.lanes=r,e}function Ro(e,t,r,s){return e=bt(22,e,s,t),e.elementType=Uh,e.lanes=r,e.stateNode={isHidden:!1},e}function qa(e,t,r){return e=bt(6,e,null,t),e.lanes=r,e}function Ya(e,t,r){return t=bt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Yv(e,t,r,s,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ta(0),this.expirationTimes=Ta(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ta(0),this.identifierPrefix=s,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Zc(e,t,r,s,o,c,u,f,m){return e=new Yv(e,t,r,f,m),t===1?(t=1,c===!0&&(t|=8)):t=0,c=bt(3,null,null,t),e.current=c,c.stateNode=e,c.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},jc(c),e}function Kv(e,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:xr,key:s==null?null:""+s,children:e,containerInfo:t,implementation:r}}function Mm(e){if(!e)return Tn;e=e._reactInternals;e:{if(rr(e)!==e||e.tag!==1)throw Error(W(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(at(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(W(171))}if(e.tag===1){var r=e.type;if(at(r))return Mf(e,r,t)}return t}function Om(e,t,r,s,o,c,u,f,m){return e=Zc(r,s,!0,e,o,c,u,f,m),e.context=Mm(null),r=e.current,s=Xe(),o=Cn(r),c=rn(s,o),c.callback=t??null,jn(r,c,o),e.current.lanes=o,Ji(e,o,s),lt(e,s),e}function zo(e,t,r,s){var o=t.current,c=Xe(),u=Cn(o);return r=Mm(r),t.context===null?t.context=r:t.pendingContext=r,t=rn(c,u),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=jn(o,t,u),e!==null&&(Rt(e,o,u,c),Ws(e,o,u)),u}function So(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function fh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Wc(e,t){fh(e,t),(e=e.alternate)&&fh(e,t)}function Qv(){return null}var Im=typeof reportError=="function"?reportError:function(e){console.error(e)};function Vc(e){this._internalRoot=e}Do.prototype.render=Vc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(W(409));zo(e,t,null,null)};Do.prototype.unmount=Vc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;tr(function(){zo(null,e,null,null)}),t[on]=null}};function Do(e){this._internalRoot=e}Do.prototype.unstable_scheduleHydration=function(e){if(e){var t=hf();e={blockedOn:null,target:e,priority:t};for(var r=0;r<xn.length&&t!==0&&t<xn[r].priority;r++);xn.splice(r,0,e),r===0&&mf(e)}};function Hc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Bo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function mh(){}function Xv(e,t,r,s,o){if(o){if(typeof s=="function"){var c=s;s=function(){var g=So(u);c.call(g)}}var u=Om(t,s,e,0,null,!1,!1,"",mh);return e._reactRootContainer=u,e[on]=u.current,Di(e.nodeType===8?e.parentNode:e),tr(),u}for(;o=e.lastChild;)e.removeChild(o);if(typeof s=="function"){var f=s;s=function(){var g=So(m);f.call(g)}}var m=Zc(e,0,!1,null,null,!1,!1,"",mh);return e._reactRootContainer=m,e[on]=m.current,Di(e.nodeType===8?e.parentNode:e),tr(function(){zo(t,m,r,s)}),m}function Fo(e,t,r,s,o){var c=r._reactRootContainer;if(c){var u=c;if(typeof o=="function"){var f=o;o=function(){var m=So(u);f.call(m)}}zo(t,u,e,o)}else u=Xv(r,t,e,o,s);return So(u)}uf=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=vi(t.pendingLanes);r!==0&&(uc(t,r|1),lt(t,Ae()),!(ge&6)&&(Zr=Ae()+500,On()))}break;case 13:tr(function(){var s=an(e,1);if(s!==null){var o=Xe();Rt(s,e,1,o)}}),Wc(e,1)}};dc=function(e){if(e.tag===13){var t=an(e,134217728);if(t!==null){var r=Xe();Rt(t,e,134217728,r)}Wc(e,134217728)}};df=function(e){if(e.tag===13){var t=Cn(e),r=an(e,t);if(r!==null){var s=Xe();Rt(r,e,t,s)}Wc(e,t)}};hf=function(){return ve};ff=function(e,t){var r=ve;try{return ve=e,t()}finally{ve=r}};ml=function(e,t,r){switch(t){case"input":if(al(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var o=To(s);if(!o)throw Error(W(90));Wh(s),al(s,o)}}}break;case"textarea":Hh(e,r);break;case"select":t=r.value,t!=null&&Tr(e,!!r.multiple,t,!1)}};Qh=Dc;Xh=tr;var ey={usingClientEntryPoint:!1,Events:[Yi,br,To,Yh,Kh,Dc]},fi={findFiberByHostInstance:Hn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ty={bundleType:fi.bundleType,version:fi.version,rendererPackageName:fi.rendererPackageName,rendererConfig:fi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:cn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=nf(e),e===null?null:e.stateNode},findFiberByHostInstance:fi.findFiberByHostInstance||Qv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rs.isDisabled&&Rs.supportsFiber)try{ko=Rs.inject(ty),Ht=Rs}catch{}}mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ey;mt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Hc(t))throw Error(W(200));return Kv(e,t,null,r)};mt.createRoot=function(e,t){if(!Hc(e))throw Error(W(299));var r=!1,s="",o=Im;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=Zc(e,1,!1,null,null,r,!1,s,o),e[on]=t.current,Di(e.nodeType===8?e.parentNode:e),new Vc(t)};mt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(W(188)):(e=Object.keys(e).join(","),Error(W(268,e)));return e=nf(t),e=e===null?null:e.stateNode,e};mt.flushSync=function(e){return tr(e)};mt.hydrate=function(e,t,r){if(!Bo(t))throw Error(W(200));return Fo(null,e,t,!0,r)};mt.hydrateRoot=function(e,t,r){if(!Hc(e))throw Error(W(405));var s=r!=null&&r.hydratedSources||null,o=!1,c="",u=Im;if(r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onRecoverableError!==void 0&&(u=r.onRecoverableError)),t=Om(t,null,e,1,r??null,o,!1,c,u),e[on]=t.current,Di(e),s)for(e=0;e<s.length;e++)r=s[e],o=r._getVersion,o=o(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,o]:t.mutableSourceEagerHydrationData.push(r,o);return new Do(t)};mt.render=function(e,t,r){if(!Bo(t))throw Error(W(200));return Fo(null,e,t,!1,r)};mt.unmountComponentAtNode=function(e){if(!Bo(e))throw Error(W(40));return e._reactRootContainer?(tr(function(){Fo(null,null,e,!1,function(){e._reactRootContainer=null,e[on]=null})}),!0):!1};mt.unstable_batchedUpdates=Dc;mt.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!Bo(r))throw Error(W(200));if(e==null||e._reactInternals===void 0)throw Error(W(38));return Fo(e,t,r,!1,s)};mt.version="18.3.1-next-f1338f8080-20240426";function Rm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Rm)}catch(e){console.error(e)}}Rm(),Ih.exports=mt;var Uo=Ih.exports,ph=Uo;el.createRoot=ph.createRoot,el.hydrateRoot=ph.hydrateRoot;const ny="modulepreload",ry=function(e){return"/"+e},gh={},Er=function(t,r,s){let o=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),f=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));o=Promise.allSettled(r.map(m=>{if(m=ry(m),m in gh)return;gh[m]=!0;const g=m.endsWith(".css"),x=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${x}`))return;const v=document.createElement("link");if(v.rel=g?"stylesheet":ny,g||(v.as="script"),v.crossOrigin="",v.href=m,f&&v.setAttribute("nonce",f),document.head.appendChild(v),g)return new Promise((y,j)=>{v.addEventListener("load",y),v.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${m}`)))})}))}function c(u){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=u,window.dispatchEvent(f),!f.defaultPrevented)throw u}return o.then(u=>{for(const f of u||[])f.status==="rejected"&&c(f.reason);return t().catch(c)})},Xt=8192,en=16384,Qc=class Qc{static async generate(t,r,s,o={}){const c=`${this.baseUrl}/generate`;try{const u=await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},signal:o.signal,body:JSON.stringify({model:t,prompt:r,stream:!1,format:s,options:{num_ctx:o.num_ctx||Xt,num_predict:o.num_predict||en,num_gpu:-1,num_thread:0}})});if(!u.ok)throw new Error(`Ollama error: ${u.statusText}`);return(await u.json()).response}catch(u){throw u instanceof Error&&u.name==="AbortError"?(console.log("Ollama generation cancelled"),new Error("Generation cancelled")):(console.error("Ollama Service Error:",u),u)}}static async generateWithThinking(t,r,s={}){var c,u;const o=`${this.baseUrl}/chat`;try{const f=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},signal:s.signal,body:JSON.stringify({model:t,messages:[{role:"user",content:r}],stream:!1,think:!0,options:{num_ctx:s.num_ctx||Xt,num_predict:s.num_predict||en,num_gpu:-1,num_thread:0}})});if(!f.ok)throw new Error(`Ollama thinking error: ${f.statusText}`);const m=await f.json();return{response:((c=m.message)==null?void 0:c.content)||"",thinking:((u=m.message)==null?void 0:u.thinking)||""}}catch(f){throw f instanceof Error&&f.name==="AbortError"?(console.log("Ollama thinking generation cancelled"),new Error("Thinking generation cancelled")):(console.error("Ollama Thinking Error:",f),f)}}static async streamGenerateWithThinking(t,r,s,o,c={}){var f,m;const u=`${this.baseUrl}/chat`;try{const g=await fetch(u,{method:"POST",headers:{"Content-Type":"application/json"},signal:c.signal,body:JSON.stringify({model:t,messages:[{role:"user",content:r}],stream:!0,think:!0,options:{num_ctx:c.num_ctx||Xt,num_predict:c.num_predict||en,num_gpu:-1,num_thread:0}})});if(!g.ok)throw new Error(`Ollama thinking stream error: ${g.statusText}`);if(!g.body)throw new Error("Ollama thinking stream body is null");const x=g.body.getReader(),v=new TextDecoder;for(;;){const{done:y,value:j}=await x.read();if(y)break;const C=v.decode(j,{stream:!0}).split(`
`);for(const R of C)if(R.trim())try{const b=JSON.parse(R);if((f=b.message)!=null&&f.thinking&&s(b.message.thinking),(m=b.message)!=null&&m.content&&o(b.message.content),b.done)break}catch{}}}catch(g){throw g instanceof Error&&g.name==="AbortError"?(console.log("Ollama thinking streaming cancelled"),new Error("Thinking streaming cancelled")):(console.error("Ollama Thinking Streaming Error:",g),g)}}static async streamGenerate(t,r,s,o={}){const c=`${this.baseUrl}/generate`;try{const u=await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},signal:o.signal,body:JSON.stringify({model:t,prompt:r,stream:!0,options:{num_ctx:o.num_ctx||Xt,num_predict:o.num_predict||en,num_gpu:-1,num_thread:0}})});if(!u.ok)throw new Error(`Ollama stream error: ${u.statusText}`);if(!u.body)throw new Error("Ollama stream body is null");const f=u.body.getReader(),m=new TextDecoder;for(;;){const{done:g,value:x}=await f.read();if(g)break;const y=m.decode(x,{stream:!0}).split(`
`);for(const j of y)if(j.trim())try{const k=JSON.parse(j);if(k.response&&s(k.response),k.done)break}catch{}}}catch(u){throw u instanceof Error&&u.name==="AbortError"?(console.log("Ollama streaming cancelled"),new Error("Streaming cancelled")):(console.error("Ollama Streaming Error:",u),u)}}static async chat(t,r,s,o={}){const c=`${this.baseUrl}/chat`;try{const u=await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},signal:o.signal,body:JSON.stringify({model:t,messages:r,stream:!0,options:{num_ctx:o.num_ctx||Xt,num_predict:o.num_predict||en,num_gpu:-1,num_thread:0}})});if(!u.ok)throw new Error(`Ollama chat stream error: ${u.statusText}`);if(!u.body)throw new Error("Ollama chat stream body is null");const f=u.body.getReader(),m=new TextDecoder;for(;;){const{done:g,value:x}=await f.read();if(g)break;const y=m.decode(x,{stream:!0}).split(`
`);for(const j of y)if(j.trim())try{const k=JSON.parse(j);if(k.message&&k.message.content&&s(k.message.content),k.done)break}catch{}}}catch(u){throw u instanceof Error&&u.name==="AbortError"?(console.log("Ollama chat cancelled"),new Error("Chat cancelled")):(console.error("Ollama Chat Error:",u),u)}}static async embeddings(t,r,s={}){const o=`${this.baseUrl}/embeddings`;try{const c=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},signal:s.signal,body:JSON.stringify({model:t,prompt:r,options:{num_ctx:s.num_ctx||Xt,num_predict:s.num_predict||en,num_gpu:-1,num_thread:0}})});if(!c.ok)throw new Error(`Ollama embeddings error: ${c.statusText}`);return(await c.json()).embedding}catch(c){throw c instanceof Error&&c.name==="AbortError"?(console.log("Ollama embeddings cancelled"),new Error("Embeddings cancelled")):(console.error("Ollama Embeddings Error:",c),c)}}static async listModels(){try{return(await(await fetch(`${this.baseUrl}/tags`)).json()).models.map(s=>s.name)}catch(t){return console.error("Failed to list Ollama models:",t),[]}}static async getRunningModels(){try{return(await(await fetch(`${this.baseUrl}/ps`)).json()).models||[]}catch(t){return console.error("Failed to get running models:",t),[]}}};Qc.baseUrl="http://127.0.0.1:11434/api";let Ie=Qc;const Ka=Object.freeze(Object.defineProperty({__proto__:null,DEFAULT_num_ctx:Xt,DEFAULT_num_predict:en,OllamaService:Ie},Symbol.toStringTag,{value:"Module"})),iy="SignalFrameDB",sy=1,Xc=class Xc{static async init(){return this.db?this.db:new Promise((t,r)=>{const s=indexedDB.open(iy,sy);s.onupgradeneeded=o=>{const c=o.target.result;c.objectStoreNames.contains("analysis")||c.createObjectStore("analysis",{keyPath:"date"}),c.objectStoreNames.contains("global")||c.createObjectStore("global")},s.onsuccess=o=>{this.db=o.target.result,t(this.db)},s.onerror=o=>r(o)})}static async saveAnalysis(t,r){const s=await this.init();return new Promise((o,c)=>{const m=s.transaction(["analysis"],"readwrite").objectStore("analysis").put({date:t,...r,timestamp:new Date().getTime()});m.onsuccess=()=>o(!0),m.onerror=()=>c(m.error)})}static async getAnalysis(t){const r=await this.init();return new Promise((s,o)=>{const f=r.transaction(["analysis"],"readonly").objectStore("analysis").get(t);f.onsuccess=()=>s(f.result),f.onerror=()=>o(f.error)})}static async getAllDates(){const t=await this.init();return new Promise((r,s)=>{const u=t.transaction(["analysis"],"readonly").objectStore("analysis").getAllKeys();u.onsuccess=()=>r(u.result.sort()),u.onerror=()=>s(u.error)})}static async saveGlobal(t,r){const s=await this.init();return new Promise((o,c)=>{const m=s.transaction(["global"],"readwrite").objectStore("global").put(r,t);m.onsuccess=()=>o(!0),m.onerror=()=>c(m.error)})}static async getGlobal(t){const r=await this.init();return new Promise((s,o)=>{const f=r.transaction(["global"],"readonly").objectStore("global").get(t);f.onsuccess=()=>s(f.result),f.onerror=()=>o(f.error)})}};Xc.db=null;let pe=Xc;const xh=Object.freeze(Object.defineProperty({__proto__:null,StorageService:pe},Symbol.toStringTag,{value:"Module"})),oy={extremelyNegative:-4,veryNegative:-3,negative:-2,somewhatNegative:-1,neutral:0,interesting:.5,positive:2,veryPositive:3},$l=[{id:"progressive",name:"Progressive",description:"Socialist-leaning analysis emphasizing collective welfare and economic equality",weights:{extremelyNegative:-5,veryNegative:-3.5,negative:-2,somewhatNegative:-1,neutral:0,interesting:1,positive:2.5,veryPositive:4},guidelines:`
Sentiment Analysis Guidelines - Progressive Approach:

- extremely-negative: Systemic economic collapses, mass layoffs, austerity measures, corporate exploitation, environmental disasters
- very-negative: Major economic crises, widening inequality, significant social safety net cuts, labor rights violations
- negative: Economic downturns, corporate consolidation, reduced social services, rising unemployment, policy regressive for working class
- somewhat-negative: Emerging economic challenges, early signs of inequality, corporate influence on policy, gradual social service erosion
- neutral: Routine economic events, policy announcements, market fluctuations without clear social impact
- interesting: Economic experiments, alternative economic models, emerging labor movements, discussions of systemic change
- positive: Labor rights advances, social program expansions, wealth redistribution efforts, corporate accountability measures, environmental protections
- very-positive: Major social welfare expansions, significant labor victories, transformative economic policies, worker empowerment initiatives

Prioritize economic equality, social safety nets, and protection of vulnerable populations. View economic events through lens of class dynamics and systemic power structures.`},{id:"balanced",name:"Balanced",description:"Neutral, objective sentiment analysis",weights:oy,guidelines:`
Sentiment Analysis Guidelines - Balanced Approach:

- extremely-negative: Large-scale humanitarian crises, major disasters, wars with significant casualties
- very-negative: Serious conflicts, major economic crises, significant political instability
- negative: Economic downturns, political tensions, concerning developments
- somewhat-negative: Minor escalations, emerging concerns, slight negative trends
- neutral: Factual reports, scheduled events, data without clear positive/negative implications
- interesting: Unusual developments, emerging trends, notable but not clearly positive/negative
- positive: Economic improvements, diplomatic progress, beneficial developments
- very-positive: Major breakthroughs, significant peace agreements, transformative positive events

Focus on objective impact assessment rather than emotional or ideological reactions.`},{id:"conservative",name:"Conservative",description:"Capitalist-leaning analysis emphasizing free markets and individual responsibility",weights:{extremelyNegative:-3,veryNegative:-2.5,negative:-1.5,somewhatNegative:-.5,neutral:0,interesting:.25,positive:1.5,veryPositive:2},guidelines:`
Sentiment Analysis Guidelines - Conservative Approach:

- extremely-negative: Only for catastrophic events with widespread severe impact
- very-negative: Major crises with confirmed significant negative consequences
- negative: Clear negative developments with documented impact
- somewhat-negative: Minor negative trends or potential concerns
- neutral: Default position - most events should be considered neutral unless clearly positive/negative
- interesting: Notable developments that don't clearly fit other categories
- positive: Confirmed beneficial developments with measurable positive impact
- very-positive: Exceptional positive events with widespread beneficial effects

Default to neutral classification when in doubt. Require strong evidence for extreme sentiment classifications. Consider traditional values, institutional stability, and gradual change as generally positive. View political shifts through lens of established order and proven principles. Prioritize free market principles, individual responsibility, and economic growth as positive indicators.`}];function Gc(e){return $l.find(t=>t.id===e)||$l[0]}function ay(e){return e.guidelines.trim()}const mi={narrative:"narrative briefing",signals:"delta signals",insights:"hidden insights",map:"map coordinates",relations:"relation trackers",bigPicture:"grand strategy analysis"},Zo=`
- extremely-negative: Active conflict, major human rights violations, total market collapse, or massive loss of life, disasters, wars.
- very-negative: Significant escalations in tension, religious/political crackdowns, or major economic downturns, riots.
- negative: General negative news, minor diplomatic friction, or unfavorable economic indicators, protests.
- somewhat-negative: Emerging concerns or slight escalations in regional tension, civil unrest.
- neutral: Raw data points, scheduled events, or shifts without immediate clear impact.
- interesting: Unpredictable or unusual developments that aren't clearly good or bad.
- positive: Diplomatic resolutions, medical breakthroughs, signs of economic recovery, justice being served.
- very-positive: Peaceful resolutions to long-standing conflicts or transformative humanitarian progress, fall of a dictator.
`;class ly{constructor(){this.controllers=new Map}createController(t){this.cancelJob(t);const r=new AbortController;return this.controllers.set(t,r),r}cancelJob(t){const r=this.controllers.get(t);return r?(r.abort(),this.controllers.delete(t),console.log(`Cancelled AI job: ${t}`),!0):!1}cancelAll(){for(const[t,r]of this.controllers)r.abort(),console.log(`Cancelled AI job: ${t}`);this.controllers.clear()}isJobRunning(t){return this.controllers.has(t)}getRunningJobs(){return Array.from(this.controllers.keys())}cleanupJob(t){this.controllers.delete(t)}}const rt=new ly;async function Jl(e=7){try{const r=(await pe.getAllDates()).slice(-e).reverse(),s=[];for(const o of r){const c=await pe.getAnalysis(o);if(c&&Array.isArray(c.signals))for(const u of c.signals){const f=typeof u=="string"?u:u!=null&&u.text?String(u.text):"";f&&s.push(f)}}return s}catch{return[]}}function zm(e){return e.map((t,r)=>({feedId:String(r),source:t.source,title:t.title,timestamp:t.timestamp,category:t.category}))}async function Dm(e){try{const t=await pe.getAllDates();let r="";const s=t.slice(-7).reverse();for(const o of s){const c=await pe.getAnalysis(o);c&&c.foreignRelations&&c.foreignRelations.length>0&&(r+=`DATE: ${o}
`,c.foreignRelations.forEach(u=>{e.find(m=>m.id===u.id||m.countryA.toLowerCase()===u.countryA.toLowerCase()&&m.countryB.toLowerCase()===u.countryB.toLowerCase())&&(r+=`- ${u.countryA} vs ${u.countryB} (${u.topic}): ${u.status} [${u.sentiment}]
`)}),r+=`
`)}return r.trim()}catch(t){return console.error("Error getting historical context:",t),""}}async function $c(e,t=[],r,s=null,o,c,u,f){const m=`full-process-${Date.now()}`,g=rt.createController(m);try{const x=Fm(e),v=zm(e),y={num_ctx:r.numCtx,num_predict:r.numPredict,signal:g.signal};try{o==null||o(`Generating ${mi.narrative}...`);const j=Um(x);let k="",C="";r.enableThinking?(o==null||o("Deep reasoning (thinking mode)..."),await Ie.streamGenerateWithThinking(r.model,j,U=>{C+=U,u==null||u(C)},U=>{k+=U,c==null||c(k)},y)):c?await Ie.streamGenerate(r.model,j,U=>{k+=U,c(k)},y):k=await Ie.generate(r.model,j,void 0,y),f==null||f("narrative"),o==null||o(`Generating ${mi.signals}...`);const R=await Jl(7),b=await Ie.generate(r.model,Zm(x,v,R,r),"json",y),_=Gm($m(pi(b),e),R),S=_.map(U=>`- ${U.text} [Sentiment: ${U.sentiment}]`).join(`
`);f==null||f("signals"),o==null||o(`Identifying ${mi.insights}...`);const T=await Ie.generate(r.model,Wm(x,v,S,_),"json",y);f==null||f("insights"),o==null||o(`Triangulating ${mi.map}...`);const z=await Ie.generate(r.model,Vm(x,S),"json",y);f==null||f("map"),o==null||o(`Updating ${mi.relations}...`);const F=await Dm(t),D=await Ie.generate(r.model,Hm(x,t,k,_,ql(pi(T)),s,F),"json",y);return f==null||f("relations"),{narrative:Jc(k),thinkingTrace:C.trim(),signals:_,insights:ql(pi(T),e),mapPoints:Jm(pi(z),_),foreignRelations:qm(pi(D),t),rawOutputs:{narrative:k,signals:b,insights:T,map:z,relations:D}}}catch(j){return yy(j)}}catch(x){throw x instanceof Error&&(x.message.includes("cancelled")||x.message.includes("AbortError")||x.name==="AbortError")?(console.log("Full situation processing was cancelled"),new Error("Processing cancelled")):x}finally{rt.cleanupJob(m)}}async function Bm(e,t,r){const s=`big-picture-${Date.now()}`,o=rt.createController(s);try{const c=e.map(x=>`DATE: ${x.date}
SUMMARY: ${x.narrative}
SIGNALS: ${x.signals.length} detected.`).join(`

`),u={num_ctx:t.numCtx,num_predict:t.numPredict,signal:o.signal},f=e.map(x=>{let v="neutral";if(x.signals&&x.signals.length>0){const C=x.signals.find(R=>R.sentiment.includes("negative"));C&&(v=C.sentiment)}let y="Situation Report",j=x.narrative||"";const k=j.split(`
`).filter(C=>C.trim().length>0);return k.length>0&&(y=k[0].replace(/[*#]/g,"").trim(),j=k.slice(1).join(" ")),{date:x.date,title:y,summary:j,sentiment:v}}).sort((x,v)=>x.date.localeCompare(v.date)),m=`
Based on the following historical data of daily briefings, write a "Grand Narrative" that explains the overall trajectory of world events.
Focus on the connections between days, the escalation of tensions, or the resolution of conflicts.
This should be a high-level strategic overview, not a day-by-day recount.
Identify the "Meta-Narrative" - what is the big story happening underneath the noise?

HISTORY:
${c}
`;let g="";return r?await Ie.streamGenerate(t.model,m,x=>{g+=x,r(x)},u):g=await Ie.generate(t.model,m,void 0,u),{summary:Jc(g),timeline:f}}catch(c){throw c instanceof Error&&(c.message.includes("cancelled")||c.message.includes("AbortError")||c.name==="AbortError")?(console.log("Big picture processing was cancelled"),new Error("Processing cancelled")):c}finally{rt.cleanupJob(s)}}function cy(e,t){const r=new Set((e.evidence||[]).map(u=>u.feedId).filter(Boolean)),s=t.map(u=>{const f=`${u.title||""} ${u.content||""}`.toLowerCase(),m=Qi(String(e.text||"").toLowerCase(),f);return{f:u,score:m}}).sort((u,f)=>f.score-u.score),o=[],c=new Set;for(const u of t)r.has(u.id)&&!c.has(u.id)&&(o.push(u),c.add(u.id));for(const{f:u}of s){if(o.length>=12)break;c.has(u.id)||(o.push(u),c.add(u.id))}return o}function uy(e,t,r){const s=t.map((o,c)=>({feedId:String(c),source:o.source,title:o.title,timestamp:o.timestamp,category:o.category,content:o.content}));return`You are an elite intelligence analyst.
Generate a structured Deep Dive for the provided Signal.

CRITICAL JSON REQUIREMENTS:
- Return ONLY strict JSON. No markdown. No prose outside JSON.
- All strings must be valid JSON strings.
- If a field is unknown, omit it (do NOT use null).

DATE: ${r}

SIGNAL:
${JSON.stringify(e)}

FEED INDEX (for citations):
${JSON.stringify(s)}

Return EXACTLY one JSON object with this shape:
{
  "signalId": string,
  "generatedAt": string,
  "header": {
    "title": string,
    "text": string,
    "sentiment": string,
    "deltaType": string,
    "category": string
  },
  "fiveWs": {
    "who": string[],
    "what": string,
    "where": string,
    "when": string,
    "why": string,
    "soWhat": string
  },
  "evidence": [
    { "feedId": string, "source": string, "title": string, "timestamp": string, "quote": string }
  ],
  "counterpoints": [
    { "claimA": string, "claimB": string, "evidenceA": EvidenceRef[], "evidenceB": EvidenceRef[] }
  ],
  "watchNext": string[]
}

Rules:
- evidence.feedId MUST come from FEED INDEX.
- Always include at least 1 evidence item.
- Show as many signals as possible without duplicates or similar enough to each other that a user would consider them the same.
`}function dy(e){let t=String(e||"").trim();if(!t)return{success:!1,data:null,error:"Empty response",canRetry:!0};const r=[()=>JSON.parse(t),()=>{const u=t.indexOf("{"),f=t.lastIndexOf("}");if(u!==-1&&f!==-1&&f>u){const m=t.substring(u,f+1);return JSON.parse(m)}throw new Error("JSON extraction failed")}];let s=null;for(const u of r)try{const f=u();if(f&&typeof f=="object"&&!Array.isArray(f))return{success:!0,data:f,canRetry:!1};throw new Error("Parsed value was not a JSON object")}catch(f){s=f}const o=(s==null?void 0:s.message)||"Unknown parsing error",c=!o.includes("Empty response");return{success:!1,data:null,error:`JSON parsing failed: ${o}`,canRetry:c}}async function hy(e,t,r,s){const o=cy(e,t),c=uy(e,o,r),u={num_ctx:s.numCtx,num_predict:s.numPredict},f=await Ie.generate(s.model,c,"json",u),m=dy(f);if(!m.success)throw new Error(m.error||"Deep dive JSON parsing error");const g=m.data,x=new Date().toISOString();console.log(g);const v=g.header&&typeof g.header=="object"?g.header:{},y=g.fiveWs&&typeof g.fiveWs=="object"?g.fiveWs:{};return{signalId:String(g.signalId||e.id||""),generatedAt:String(g.generatedAt||x),header:{title:String(v.title||e.title||"Error generating signal title"),text:String(v.text||e.text||"Error generating signal text"),sentiment:String(v.sentiment||e.sentiment||"neutral"),deltaType:v.deltaType?String(v.deltaType):e.deltaType,category:v.category?String(v.category):e.category},fiveWs:{who:Array.isArray(y.who)?y.who.map(j=>String(j)):void 0,what:y.what?String(y.what):void 0,where:y.where?String(y.where):void 0,when:y.when?String(y.when):void 0,why:y.why?String(y.why):void 0,soWhat:y.soWhat?String(y.soWhat):void 0},evidence:Yn(g.evidence,o),counterpoints:Array.isArray(g.counterpoints)?g.counterpoints.map(j=>({claimA:String(j.claimA||""),claimB:String(j.claimB||""),evidenceA:Yn(j.evidenceA,o),evidenceB:Yn(j.evidenceB,o)})).filter(j=>j.claimA&&j.claimB):void 0,watchNext:Array.isArray(g.watchNext)?g.watchNext.map(j=>String(j)).filter(Boolean):void 0}}function Fm(e){const t=e.reduce((r,s)=>(r[s.category]||(r[s.category]=[]),r[s.category].push(`[${s.source}] ${s.content}`),r),{});return Object.entries(t).map(([r,s])=>`### CATEGORY: ${r}
${s.join(`
`)}`).join(`

`)}function Um(e){return`Analyze these news feeds and provide a short but comprehensive Situation Briefing. 
Do not focus on only one event. Instead, synthesize the top 5 most critical global themes currently developing.
Keep the tone clinical, objective, and professional. Skip introductions and closings. Do not include any additional text and especially do not include any em dashes or other additional formatting. Just text.

Feeds:
${e}`}function fy(e){if(!e.length)return"None";const t=e.slice(0,20).map(r=>r.replace(/[`\n]/g," ").trim()).filter(Boolean);return t.length?t.map(r=>`- ${r}`).join(`
`):"None"}function my(e){const t=String(e||"").trim();return t?t.split(`
`).map(s=>s.trim()).filter(Boolean).slice(0,12).join(`
`):"None provided."}function Zm(e,t,r=[],s){let o="";if(s!=null&&s.sentimentProfile){const u=Gc(s.sentimentProfile);o=ay(u)}const c=`Act as a senior intelligence officer. Examine the following news feeds and identify 5-8 distinct signals by following these rules:
1. A signal is NOT just a headline; it is a shift in state, a pivot point, or a significant escalation. It can also be a shift in sentiment or seemingly minor events that could lead towards something much more significant.
2. DEDUPLICATE: If multiple sources report on the same event, synthesize them into ONE high-level signal with the most critical takeaway. DO NOT repeat yourself.
3. EXCLUDE: Sports scores/updates, celebrity gossip, movie release, and hyper-local crime stories (unless there are mass casualties).
4. CRITICAL: You MUST return a JSON ARRAY starting with [ and ending with ]. Do NOT return a single object.
5. The sentiment is not significance. Therefore the sentiment of a signal does not qualify or disqualify it.
6. INCLUDE: Tech/AI, Financial, Conflicts, Geopolitical, Science, Health

FEED INDEX (for citations):
${JSON.stringify(t)}

RECENT SIGNALS (last 7 days, for novelty/dedup):
${fy(r)}

Your response MUST start with [ and end with ] and contain 5-8 signal objects like this:
[
  {
    "title": string,
    "text": string,
    "sentiment": string,
    "category": "Tech/AI",
    "deltaType": "policy",
    "importance": number,
    "novelty": number,
    "explain": string,
    "shareText": string,
    "evidence": [
      { "feedId": string, "source": string, "title": string, "timestamp": string, "quote": string }
    ],
    "contradictions": [
      {
        "claimA": string,
        "claimB": string,
        "evidenceA": [{ "feedId": string, "source": string, "title": string, "timestamp": string, "quote": string }],
        "evidenceB": [{ "feedId": string, "source": string, "title": string, "timestamp": string, "quote": string }]
      }
    ]
  }
]

Rules:
- You MUST return exactly 5-8 signals in the array
- title: MAX ~20 words, shareable headline (e.g., "Crackdown Intensifies Amid Protests")
- text: 1-2 sentences detailed description of the signal (e.g., "Authorities are escalating violent crackdowns on nationwide protests, with reports of mass arrests and lethal force being used against demonstrators.")
- importance is 0..100.
- novelty is 0..100 (lower if similar to RECENT SIGNALS).
- feedId MUST be the numeric index from FEED INDEX.
- Always include at least 1 evidence source item.
- Each signal should cover different topics/events (don't repeat the same Iran story multiple times)

SENTIMENT GUIDELINES:
${o||Zo}

Feeds:
${e}`;return console.log("Signals prompt length:",c.length),console.log("Feed index length:",t.length),c}function Wm(e,t,r="",s=[]){const o=my(r),c=s.map(u=>`- ${u.text} [ID: ${u.id||"unknown"}]`).join(`
`);return`You are the lead analyst in an intelligence fusion cell. Derive non-obvious, second-order insights grounded in the provided reporting and signals.

DATA SOURCES:
FEED INDEX (JSON, use feedId exactly as provided when citing evidence):
${JSON.stringify(t)}

SIGNALS SUMMARY (for cross-referencing):
${o}

SIGNALS WITH IDS (use these IDs in signalId when an insight directly relates to a signal):
${c}

RAW FEED CONTEXT:
${e}

OUTPUT FORMAT (STRICT JSON):
[
  {
    "text": "Observation | Strategic implication",
    "sentiment": "neutral",
    "signalId": "sig_abc123", // Optional: id of the related signal if this insight is derived from a specific signal
    "evidence": [
      { "feedId": string, "source": string, "title": string, "timestamp": string, "quote": string }
    ]
  }
]

RULES:
- Return 3-6 distinct insights when the feeds support it. If fewer than three credible insights exist, return only those that are defensible; otherwise return an empty array.
- Each insight must feature at least one evidence object (prefer two from different sources) that ties the inference to the feed data.
- If an insight is derived from a specific signal, include its signalId (from the SIGNALS SUMMARY) to enable direct association.
- Use feedId values from the FEED INDEX verbatim. Never invent ids or cite sources not present in the data.
- Do not output markdown, commentary, or the example placeholders (e.g., never literally write "INSIGHT | ANALYSIS").
- Keep evidence quotes under 180 characters and extract meaningful phrases, not entire articles.
- Sentiment must use the authorized taxonomy.
- If no credible insight exists, return [] exactly.

SENTIMENT GUIDELINES:
${Zo}`}function Vm(e,t=""){return`Generate geographical map coordinates for the Signals listed below.
CRITICAL: You MUST attempt to generate a map point for EVERY Signal provided.
If a specific city/location is not mentioned, deduce the most relevant country or region (e.g. use the capital city).
ENSURE DIVERSITY: Do not put all points on the same coordinate. Spread them out if they are in the same country.

Return ONLY strict JSON. No comments, no markdown, no explanations.

Return a JSON array of objects with this exact structure:
[
  {
    "lat": number,
    "lng": number,
    "title": string,
    "sentiment": string,
    "category": "Tech/AI"|"Financial"|"Conflicts"|"Geopolitical"|"Other",
    "description": string,
    "sourceLink": string,
    "signalId": string
  }
]

Schema requirements:
- "lat" and "lng" MUST be numbers (no strings).
- "title" should be a concise place name.
- "description" MUST summarize the signal in <=120 characters.
- "sourceLink" MUST be a URL or empty string if unknown.
- "signalId" MUST match the id field for the related signal when available, otherwise use an empty string.
- Use the provided sentiment list exactly as-is.

SIGNALS TO PLOT:
${t}

SENTIMENT GUIDELINES:
${Zo}

Feeds (for reference/coordinates):
${e}`}function Hm(e,t,r="",s=[],o=[],c=null,u=""){let f=`### INTELLIGENCE CONTEXT
`;return r&&(f+=`CURRENT SITUATION NARRATIVE:
${r}

`),s&&s.length&&(f+=`SIGNALS:
${s.map(m=>`- ${m.text} (${m.sentiment})`).join(`
`)}

`),o&&o.length&&(f+=`HIDDEN INSIGHTS:
${o.map(m=>`- ${m.text}`).join(`
`)}

`),c&&(f+=`THE BIG PICTURE (STRATEGIC OVERVIEW):
${c.summary}

`),u&&(f+=`HISTORICAL CONTEXT (Previous relevant data):
${u}

`),`Act as a geopolitical analyst. Update status/sentiment for these geopolitical trackers using the provided Intelligence Context, News Feeds, and Historical Context.
CRITICAL: You MUST return a JSON object for EVERY SINGLE TRACKER in the EXACT ORDER they are listed below.
IMPORTANT: Analyze both current and historical data to provide comprehensive briefings. If no current data exists but historical data is relevant, provide a summary based on historical patterns.

TRACKERS:
${t.map((m,g)=>`${g+1}. ID: "${m.id}" | ${m.countryA} vs ${m.countryB} (Topic: ${m.topic})`).join(`
`)}

If the provided data does not contain specific information about a pair, you MUST still return it with:
- "status": "No new developments found in current scan."
- "sentiment": "neutral"

Return JSON array: [{"id": "...", "countryA": "...", "countryB": "...", "status": "...", "sentiment": "..."}]

SENTIMENT GUIDELINES (Use these EXACT strings for the sentiment field):
${Zo}

${f}

RAW FEEDS:
${e}`}function Ys(e){let t=e.trim();if(!t)return{success:!1,data:[],error:"Empty response",canRetry:!0};const r=[()=>{let u=JSON.parse(t);if(typeof u=="object"&&u!==null&&!Array.isArray(u)){if(u.title||u.text)return console.log("WARNING: AI returned single object instead of array. Converting to array but prompt needs fixing."),[u];const m=Object.values(u).find(v=>Array.isArray(v));if(m&&Array.isArray(m))return m.flat(1);const g=Object.keys(u);if(g.every(v=>v.includes("|")||v.length>20))return g;const x=Object.values(u);return x.every(v=>typeof v=="string")&&x.length>1?x:[u]}return Array.isArray(u)?u.flat(1):[u]},()=>{if(t.startsWith("[")&&!t.endsWith("]")){let u=t;u.includes('"')&&u.split('"').length%2===0&&(u+='"'),u.includes("{")&&u.split("{").length>u.split("}").length&&(u+="}"),u+="]";const f=JSON.parse(u);if(Array.isArray(f))return f.flat(1)}throw new Error("Incomplete array fix failed")},()=>{const u=t.indexOf("["),f=t.lastIndexOf("]");if(u!==-1&&f!==-1&&f>u){const m=t.substring(u,f+1);return JSON.parse(m).flat(1)}throw new Error("JSON extraction failed")},()=>{if(t.includes('"text":')&&t.includes('"sentiment":')){const u=t.split('"text":').slice(1),f=[];for(let m=0;m<u.length;m++){const g=u[m];let x=g.length;if(m<u.length-1){const y=g.indexOf('", "text":');y!==-1&&(x=y+1)}let v='{"text":'+g.substring(0,x);!v.endsWith("}")&&!v.endsWith('"}')&&(v+='"',v.endsWith("}")||(v+="}"));try{const y=JSON.parse(v);y.text&&y.sentiment&&f.push(y)}catch{continue}}if(f.length>0)return f}throw new Error("Duplicate key parsing failed")}];let s=null;for(let u=0;u<r.length;u++)try{const f=r[u]();if(Array.isArray(f)&&f.length>0)return{success:!0,data:f,canRetry:!1}}catch(f){s=f;continue}const o=(s==null?void 0:s.message)||"Unknown parsing error",c=!o.includes("Empty response");return{success:!1,data:[{error:`JSON parsing failed: ${o}`}],error:`JSON parsing failed: ${o}`,canRetry:c}}function pi(e){const t=Ys(e);return t.success?t.data:Array.isArray(t.data)?t.data.filter(s=>!(typeof s=="object"&&s!==null&&"error"in s)):[]}function Jc(e){return e.trim().replace(/^(Briefing|Analysis|Summary):/i,"").trim()}const No="neutral";function py(e){let t=2166136261;for(let r=0;r<e.length;r++)t^=e.charCodeAt(r),t=Math.imul(t,16777619);return(t>>>0).toString(16)}function gy(e){if(!e)return;const t=String(e).trim(),r=t.toLowerCase();return r.includes("tech")||r.includes("ai")?"Tech/AI":r.includes("fin")?"Financial":r.includes("conflict")||r.includes("war")||r.includes("security")?"Conflicts":r.includes("geo")||r.includes("diplom")?"Geopolitical":t?"Other":void 0}function xy(e){if(!e)return;const t=String(e).trim().toLowerCase();return new Set(["escalation","deescalation","policy","market","breakthrough","disruption","other"]).has(t)?t:void 0}function Yn(e,t){if(!Array.isArray(e))return[];const r=new Map;t.forEach((u,f)=>{r.set(String(u.id),u),r.set(String(f),u)});const s=e.map(u=>{const f=u!=null&&u.feedId?String(u.feedId):"";if(!f)return null;let m=r.get(f);if(!m&&u.title){const g=u.title.toLowerCase();m=t.find(x=>{var v;return((v=x.title)==null?void 0:v.toLowerCase())===g||x.title&&Qi(x.title.toLowerCase(),g)>.8})}return{feedId:f,source:u!=null&&u.source?String(u.source):m==null?void 0:m.source,title:u!=null&&u.title?String(u.title):m==null?void 0:m.title,link:m==null?void 0:m.link,timestamp:u!=null&&u.timestamp?String(u.timestamp):m==null?void 0:m.timestamp,quote:u!=null&&u.quote?String(u.quote):void 0}}).filter(Boolean),o=new Set,c=[];for(const u of s)o.has(u.feedId)||(o.add(u.feedId),c.push(u));return c}function Gm(e,t){if(!Array.isArray(e)||!e.length||!t.length)return e;const r=t.map(s=>String(s).toLowerCase().trim()).filter(Boolean);return e.map(s=>{if(typeof s.novelty=="number")return s;const o=String(s.text||"").toLowerCase();let c=0;for(const f of r)if(c=Math.max(c,Qi(o,f)),c>=1)break;const u=Math.round((1-Math.min(1,c))*100);return{...s,novelty:u}})}function vy(e){const t=[],r=new Set;for(const s of e){const o=s.text.toLowerCase().trim().replace(/[^\w\s]/g,"").replace(/\s+/g," ");if(r.has(o))continue;let c=!1;for(const u of t){const f=u.text.toLowerCase().trim().replace(/[^\w\s]/g,"").replace(/\s+/g," ");if(Qi(o,f)>.4&&s.sentiment===u.sentiment){if(c=!0,s.text.length>u.text.length){const g=t.indexOf(u);t[g]=s}break}}c||(t.push(s),r.add(o))}return t}function Qi(e,t){const r=new Set(e.split(" ").filter(u=>u.length>1)),s=new Set(t.split(" ").filter(u=>u.length>1));if(r.size===0||s.size===0)return 0;const o=new Set([...r].filter(u=>s.has(u))),c=new Set([...r,...s]);return o.size/c.size}function $m(e,t=[]){if(e.some(o=>typeof o=="object"&&o!==null&&"error"in o&&typeof o.error=="string"&&!("title"in o)&&!("text"in o)&&!("sentiment"in o)))return console.error("Error detected in raw signals data:",e),[];const s=e.map(o=>{var _;if(typeof o=="string")return{text:o,sentiment:No};let c="";if(o.text)c=o.text;else if(o.title)c=o.title;else if(o.content)c=o.content;else if(o.event)c=o.event;else{const S=Object.keys(o).filter(T=>T!=="sentiment"&&T!=="level");if(S.length===1){const T=S[0];c=String(o[T])}else{const T=S.find(z=>typeof o[z]=="string"&&o[z].length>10&&!z.includes("sentiment")&&!z.includes("level"));c=T?String(o[T]):JSON.stringify(o)}}const u=(o.sentiment||o.level||No).toLowerCase(),m=new Set(["extremely-negative","very-negative","negative","somewhat-negative","neutral","interesting","positive","very-positive"]).has(u)?u:"neutral",g=o.title?String(o.title):void 0,x=gy(o.category),v=xy(o.deltaType),y=Yn(o.evidence,t),j=(Array.isArray(o.contradictions)?o.contradictions:[]).map(S=>({...S,evidenceA:Yn(S.evidenceA,t),evidenceB:Yn(S.evidenceB,t)})),k=typeof o.importance=="number"?o.importance:typeof o.importance=="string"?parseFloat(o.importance):void 0,C=typeof o.novelty=="number"?o.novelty:typeof o.novelty=="string"?parseFloat(o.novelty):void 0,R=`${g||""}|${c}|${x||""}|${v||""}|${((_=y[0])==null?void 0:_.feedId)||""}`;return{id:o.id?String(o.id):`sig_${py(R)}`,title:g,text:c,sentiment:m,category:x,deltaType:v,importance:k,novelty:C,explain:o.explain?String(o.explain):void 0,shareText:o.shareText?String(o.shareText):void 0,evidence:y,contradictions:j}});return console.log(`Processed ${s.length} signals`),s.length>0&&console.log("First signal:",s[0].title),vy(s)}function ql(e,t=[]){if(console.log("Raw insights data:",e),e.some(s=>typeof s=="object"&&s!==null&&"error"in s&&typeof s.error=="string")){const s=e.find(o=>typeof o=="object"&&o!==null&&"error"in o);throw console.error("AI returned error for insights:",s),new Error((s==null?void 0:s.error)||"JSON parsing error in insights")}return e.map(s=>{if(typeof s=="string")return{text:s,sentiment:No};let o="";if(s.text)o=s.text;else if(s.trend&&s.impact)o=`${s.trend} | ${s.impact}`;else{const x=Object.keys(s).filter(v=>v!=="sentiment"&&v!=="evidence").filter(v=>{const y=String(s[v]);return!y.startsWith("http")&&!y.match(/^\d+$/)});if(x.length===1){const v=x[0];o=String(s[v])}else if(x.length>1){const v=x.find(y=>typeof s[y]=="string"&&s[y].length>20&&!s[y].startsWith("http")&&!y.includes("sentiment"));o=v?String(s[v]):JSON.stringify(s)}else o="Unable to parse insight content - AI returned URLs instead of text"}(o.startsWith("http")||o.length<10)&&(o="AI model returned invalid content format - expected insight text");let c=String(s.sentiment||No).toLowerCase();const u={1:"extremely-negative",2:"very-negative",3:"negative",4:"somewhat-negative",5:"neutral",6:"interesting",7:"positive",8:"very-positive"};u[c]&&(c=u[c]);const f=Yn(s.evidence,t),m=s.signalId?String(s.signalId):void 0;return{text:o,sentiment:c,evidence:f,signalId:m}}).filter(s=>s.text.length>10)}function Jm(e,t=[]){if(console.log("Raw map points data:",e),e.some(c=>typeof c=="object"&&c!==null&&"error"in c&&typeof c.error=="string")){const c=e.find(u=>typeof u=="object"&&u!==null&&"error"in u);return console.error("AI returned error for map points:",c),[]}if(!Array.isArray(e)||e.length===0)return console.warn("Map points raw data is not an array or is empty:",e),[];const s=Array.isArray(t)?t:[],o=c=>{const u=String(c||"").toLowerCase();if(!u)return null;let f=null,m=0;for(const g of s){const x=Qi(u,String(g.text||"").toLowerCase());x>m&&(m=x,f=g)}return m>.2?f:null};return e.map((c,u)=>{let f=String(c.description||"").trim();f.length>100&&(f=f.substring(0,97)+"...");const m=o(String(c.description||c.title||""));return{id:`map-${u}`,lat:Number(c.lat)||0,lng:Number(c.lng)||0,title:c.title||"Event",sentiment:c.sentiment||"neutral",category:c.category||"Geopolitical",description:f,sourceLink:c.sourceLink||c.source_link||c.link||"",signalId:m==null?void 0:m.id}})}function qm(e,t){if(e.some(s=>typeof s=="object"&&s!==null&&"error"in s&&typeof s.error=="string")){const s=e.find(o=>typeof o=="object"&&o!==null&&"error"in o);throw new Error((s==null?void 0:s.error)||"JSON parsing error in relations")}return t.map(s=>{let o=e.find(f=>f.id===s.id);if(o||(o=e.find(f=>{var m,g,x,v;return((m=f.countryA)==null?void 0:m.toLowerCase())===s.countryA.toLowerCase()&&((g=f.countryB)==null?void 0:g.toLowerCase())===s.countryB.toLowerCase()||((x=f.countryA)==null?void 0:x.toLowerCase())===s.countryB.toLowerCase()&&((v=f.countryB)==null?void 0:v.toLowerCase())===s.countryA.toLowerCase()})),!o)return s;let c=String(o.sentiment||s.sentiment).toLowerCase();const u={1:"extremely-negative",2:"very-negative",3:"negative",4:"somewhat-negative",5:"neutral",6:"interesting",7:"positive",8:"very-positive",tension:"negative",conflict:"extremely-negative"};return u[c]&&(c=u[c]),{...s,status:String(o.status||s.status),sentiment:c,lastUpdate:new Date().toISOString()}})}function yy(e){return console.error("AI Error:",e),{narrative:"Engine error.",thinkingTrace:"",signals:[],insights:[],mapPoints:[],foreignRelations:[]}}async function Ym(e,t,r=[],s,o,c={},u){const f=`section-${e}-${Date.now()}`,m=rt.createController(f);try{if(e==="rss"){if(await new Promise(C=>setTimeout(C,500)),!t||t.length===0)throw new Error("No RSS feeds available. Please try refreshing feeds.");return{feeds:t}}const g=Fm(t),x=zm(t),v={num_ctx:s.numCtx,num_predict:s.numPredict,signal:m.signal};if(e==="narrative"){let C="";const R=Um(g);o?await Ie.streamGenerate(s.model,R,_=>{C+=_,o(C)},v):C=await Ie.generate(s.model,R,void 0,v);const b={narrative:C||""};return{narrative:Jc(C),rawOutputs:b}}const y={signals:async()=>{const C=await Jl(7);return Zm(g,x,C,s)},insights:Wm(g,x,c.signalsText||""),map:Vm(g,c.signalsText||""),relations:async()=>{const C=await Dm(r);return Hm(g,r,c.narrative||"",c.signals||[],c.insights||[],c.bigPicture||null,C)}};let j,k;if(e==="relations")j=await Ie.generate(s.model,await y.relations(),"json",v),k=Ys(j);else if(e==="signals"){let C="",R={success:!1,data:[],error:"No attempt made",canRetry:!0};for(let b=0;b<2;b++){const _=await y.signals(),S=b===0?"":`

FINAL CHECK (MANDATORY): Output ONLY a JSON array with 5-8 signal objects. If you produced a single object, wrap it in an array and add additional distinct signals until there are 5-8 total. Do not output any prose or markdown.`;if(C=await Ie.generate(s.model,`${_}${S}`,void 0,v),R=Ys(C),!R.success)continue;const T=String(C||"").trim(),z=T.startsWith("{")&&!T.startsWith("["),F=Array.isArray(R.data)&&R.data.length<5;if(!z&&!F)break}j=C,k=R}else j=await Ie.generate(s.model,y[e],"json",v),k=Ys(j);if(!k.success)throw u&&u(k.error||"Unknown JSON parsing error",k.canRetry),new Error(k.error);if(e==="signals"){const C=await Jl(7),R={signals:j||""};return{signals:Gm($m(k.data,t),C),rawOutputs:R}}if(e==="insights"){const C={insights:j||""};return{insights:ql(k.data,t),rawOutputs:C}}if(e==="map"){const C={map:j||""};return{mapPoints:Jm(k.data,c.signals||[]),rawOutputs:C}}if(e==="relations"){const C={relations:j||""};return{foreignRelations:qm(k.data,r),rawOutputs:C}}return $c(t,r,s,c.bigPicture)}catch(g){throw g instanceof Error&&(g.message.includes("cancelled")||g.message.includes("AbortError")||g.name==="AbortError")?(console.log(`Section ${e} processing was cancelled`),new Error("Processing cancelled")):g}finally{rt.cleanupJob(f)}}const _y=Object.freeze(Object.defineProperty({__proto__:null,cancellationTokenManager:rt,generateDeepDive:hy,processBigPicture:Bm,processSingleSection:Ym,processSituation:$c},Symbol.toStringTag,{value:"Module"})),wy=new URL("data:image/gif;base64,R0lGODlheAA8ALMAAJkAAM2Dg////60zM7RDQ+/X1/jt7eS7u8Vubp8QEL9gYKUeHtulpZ0LC5sFBZkBASH5BAAAAAAALAAAAAB4ADwAAAT/EMhJq7046827/2AojmRpnmiqrmzrvnAsz3Rt33iu73zv/8CgcEgsAheCpHKZlDCfAid0mTCiBsrCYWtYSgVarhewNBQYjEJXsLCesEkEoDFnKL9yesPeJCcPbQ4PAANdbW4lcAIIDQYGA0h9SoyOkHd+Bw4EB44MCIaIiZMJXQSRUX6LpAKml0kLhVCHoSKKcpAAfKiThG26TgYAAVOztCC2AAoIkAeSccnLC827wcOyxrWjawsEzqrb3bts4U/F2B22DWoMyd6M6+3i7AoFAmYB9ebnG8gODoRr8ADwB9BbADoLqiTIt++DIgNbDtRzlQTilone7IVR86qhB0VT/8SFFBlSn8eTKFOqXMmypUsbAQIQ0LAg5qGaMXPmVEAg5gAMPQOYTBZzggIGERFUIVLxJ9AkMwGQewIoCbsLawJcSPAHQIJpZZwKUWJgaLioU5kcADBtKQUFZC8gSKJAWEUxrJhmcUvhrIRwWi/AXWQBrIC6FeoVkNClgFsFBqKOXbLYgl+pSQJjBVMh0sS1fTMTEk0B15DME6+GzotZgGYL1iTbZcWnWG0AkVS7yRzLdYXLgDPkptC4tWauAlSn5ltEdG/Ef6FGT06guvVZbSUMDlzPwNK5rFuDgd7cd7zwwENqHiyHbZKl1hArrgBZCSAjpAGAfzQdrXrinA0ngb5nxlkgDVliTfYaH2W15h911lVXTGyxUcDHALcJtkaDp5k3AR+OpechBrkVtxofulmwkFV6vebVRAWI6OIFhrVHAUbhYbAKaAqquMZED85owWDvwZaFBTZO0AyPQeRX2hrSFcjBGikOqMSMI+7Y4lNKPHiATjkZmaOFHVWQRAEy4UPXlhgQ+eAUBnL2VJUA4HgkmxhUKB4UNCZpQYxbIYCRAUK+NENChiaq6KKMNuroo5BGKumklFZq6aWY0hIBADs=",import.meta.url).href,Qa=new URL("/assets/logo-ny-times-C4BOoqR6.png",import.meta.url).href,by=new URL("data:image/webp;base64,UklGRsoDAABXRUJQVlA4TL4DAAAvH8AHAAk1bRswHWfKn3BJRPQ/25qPfaGobSTHCLYcguOPqr4Pj5q2jeBgxuqmQrjfTNs2hjAg0/ijqnrt7n9MAED4xA5bH5qXXf0/gwJIoGPbtmqr6mPj7qQOEUTUmbo4kaZE/t1ttcY5vF8Fu7VtLdu2zLV/d5dIgcyhAC2CFoiJKYaIEtxiJ9WMCtx5Dt3Ytl1b0ZgHU6dABORCMHiauMiivfa11vqsUNi2bSOle/eMh32aA0BQpKqkVVmtltVqtdOqeqKWajVN0/REIwBOICAVqUqpqqpEWgrtNJtmLQAiIkWkValWJaKqSkrLrGkaU5rSAooUkVKJacR8XdWqWkoV2eqlyFo1hJSidqt2WtshpSlNI6VUpZEQKY3V+qplKlU2m2JKaUpB2W+jStkdYpqWZUojstVQ1Uo0PaEoY4w0rW2aUqUYaUopKFWtoGSyHDGllGItVVaVmig9sdJWbKVUbWgaVhXWE1OpeEJJVVUqa1GKaSulrRSqNZVWWC2n1pKjz7j26UlKYoVEiMT775x//qwNx9919atYaKgY+/CtZ/MfpSnHnuv+V1/jQB997cOvf6yqnXrv3v4G7H38sZ87tbVUg4NZWbsoBd/Q6VZ3lWr9D7USwr6lu91NPaEz//Phj0HkzJudfO0hgM9//GqQztlP+uevJ8PRN3z56WVOcTHm8h89Fk38/e+9+M6HWi3ufvFc+8JzAC+/89b/hnjw7Y+nPhbw46/28uuvuN31EOEh81iX25rSNI00BQDWGuAwACXzEBocAAzrCVppSlNio3EYKgDcHtwyFyPmAtATaqU0qGSjsDQGAK7uunXpusaqoc5QVrRSqlrZNTIwuACc+vTufeeRi/HAjjUdO2+/sv/+xj3oCVlVQynYweARA3DohU59CiAgwR+/Mf9vuovdT2e77lzHpeFg/f//hCZDyZDL5QDoLsCcg+n/06VaZMjccj/9+PMv35fcsrtffdmTNNe7bzr8Eg/heHALj7l13HW7/onnvXC4a+Y21HU057fffvHHn75zl4sLn3xRMfz8s8/++evv2dzczbrNjXUb6+KeefHhehKnxrKBm8YcJuSWDS5hmFNimBPQaOiSIfI/GJyxAuYwjGKsM4Q4AwpolGEU2ij/MfKYlLmJw7YZjgCYE0KjjI3DykDIf46bsDmNG4E5GIqDIYQwZCPK1BiF9PiXCRzmmmTYHTJ0oDAERjV3piFhJN2/cGP7GWE8DIh9LWTEKEYEdP8ADgMBjJxJAJNwptA1AdXUOAA0",import.meta.url).href,Km=[{url:"https://feeds.bbci.co.uk/news/world/rss.xml",category:"World",source:"BBC World",logo:wy,enabled:!0},{url:"https://www.theguardian.com/world/rss",category:"World",source:"The Guardian",logo:"../images/logo-guardian.png",enabled:!0},{url:"https://www.aljazeera.com/xml/rss/all.xml",category:"World",source:"Al Jazeera",logo:"../images/logo-al-jazeera.png",enabled:!0},{url:"https://rss.nytimes.com/services/xml/rss/nyt/World.xml",category:"World",source:"NY Times World",logo:Qa,enabled:!0},{url:"https://feeds.content.dowjones.io/public/rss/mw_topstories",category:"Business",source:"MarketWatch",logo:"../images/logo-marketwatch.png",enabled:!0},{url:"https://techcrunch.com/feed/",category:"Technology",source:"TechCrunch",logo:by,enabled:!0},{url:"https://www.theverge.com/rss/index.xml",category:"Technology",source:"The Verge",logo:"../images/logo-verge.png",enabled:!0},{url:"https://arstechnica.com/feed/",category:"Technology",source:"Ars Technica",logo:"../images/logo-ars-technica.png",enabled:!0},{url:"https://rss.nytimes.com/services/xml/rss/nyt/Science.xml",category:"Science",source:"NY Times Science",logo:Qa,enabled:!0},{url:"http://feeds.bbci.co.uk/news/science_and_environment/rss.xml",category:"Science",source:"BBC Science",logo:"../images/logo-bbc-news.gif",enabled:!0},{url:"http://feeds.bbci.co.uk/news/health/rss.xml",category:"Health",source:"BBC Health",logo:"../images/logo-bbc-news.gif",enabled:!0},{url:"https://rss.nytimes.com/services/xml/rss/nyt/Health.xml",category:"Health",source:"NY Times Health",logo:Qa,enabled:!0}];function Ks(e,t=128,r=128){if(!e)return e;try{const s=new URL(e);return s.hostname.includes("ichef.bbci.co.uk")?s.pathname.includes("/standard/")?s.pathname.replace(/\/standard\/\d+\//,`/standard/${t}/`):(s.searchParams.set("resize",`${t}`),s.toString()):s.hostname.includes("platform.theverge.com")?(s.searchParams.set("w",t.toString()),s.searchParams.set("h",r.toString()),s.searchParams.set("crop","1"),s.toString()):s.hostname.includes("cdn.arstechnica.net")?s.pathname.includes("-1152x648")?s.pathname.replace(/-\d+x\d+/,`-${t}x${r}`):(s.searchParams.set("w",t.toString()),s.searchParams.set("h",r.toString()),s.searchParams.set("crop","1"),s.toString()):s.hostname.includes("static01.nyt.com")?(s.searchParams.set("w",t.toString()),s.searchParams.set("h",r.toString()),s.searchParams.set("q","75"),s.searchParams.set("auto","webp"),s.toString()):s.hostname.includes("i.guim.co.uk")?(s.searchParams.set("width",t.toString()),s.searchParams.set("height",r.toString()),s.searchParams.set("quality","85"),s.toString()):((s.hostname.includes("aljazeera.net")||s.hostname.includes("cnbc.com")||s.hostname.includes("marketwatch.com")||s.hostname.includes("wsj.net")||s.hostname.includes("economist.com"))&&(s.searchParams.set("w",t.toString()),s.searchParams.set("h",r.toString())),s.toString())}catch{return e}}const Sy=[e=>`https://corsproxy.io/?${encodeURIComponent(e)}`,e=>`https://api.allorigins.win/raw?url=${encodeURIComponent(e)}`,e=>`https://cors.eu.org/${e}`],Ny=[e=>`https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(e)}`,null];async function jy(e,t=!1){let r=null;for(const s of Sy)try{const o=s(e),c=await fetch(o,{signal:AbortSignal.timeout(1e4)});if(c.ok)return c}catch(o){r=o,console.warn(`Proxy failed for ${e}, trying next...`)}throw r||new Error(`All proxies failed for ${e}`)}async function ky(e){try{const u=Ny[0](e),f=await fetch(u,{signal:AbortSignal.timeout(1e4)});if(!f.ok)throw new Error(`RSS2JSON HTTP ${f.status}`);const m=await f.json();if(m.status==="ok"&&m.items)return m;throw new Error("RSS2JSON returned malformed payload")}catch{console.warn(`RSS2JSON failed for ${e}, falling back to raw XML parsing...`)}const r=await(await jy(e,!0)).text(),c=new DOMParser().parseFromString(r,"text/xml").querySelectorAll("item");return{status:"ok",items:Array.from(c).map(u=>{var v,y,j,k,C,R,b;const f=((v=u.querySelector("description"))==null?void 0:v.textContent)||"";let m="";const g=u.getElementsByTagName("media:content")[0],x=u.querySelector("enclosure");if(g&&g.getAttribute("url"))m=Ks(g.getAttribute("url")||"");else if(x&&((y=x.getAttribute("type"))!=null&&y.startsWith("image"))&&x.getAttribute("url"))m=Ks(x.getAttribute("url")||"");else if(f){const _=f.match(/<img[^>]+src="([^">]+)"/);_&&(m=Ks(_[1]))}return{title:((j=u.querySelector("title"))==null?void 0:j.textContent)||"",link:((k=u.querySelector("link"))==null?void 0:k.textContent)||"",description:f,pubDate:((C=u.querySelector("pubDate"))==null?void 0:C.textContent)||new Date().toISOString(),guid:((R=u.querySelector("guid"))==null?void 0:R.textContent)||((b=u.querySelector("link"))==null?void 0:b.textContent)||"",enclosure:{link:m}}})}}let Ln={defaultFeeds:Cy(Km),userFeeds:[]};function Cy(e){return e.map(t=>({url:t.url,category:t.category,source:t.source,logo:t.logo,enabled:t.enabled??!0}))}function Py(){return{...Ln}}function Ey(e,t){Ln.defaultFeeds=Ln.defaultFeeds.map(r=>r.url===e?{...r,enabled:t}:r)}function Ty(e){const t={...e,id:Date.now().toString(),enabled:!0};return Ln.userFeeds.push(t),t}function Ly(e){Ln.userFeeds=Ln.userFeeds.filter(t=>t.id!==e)}function Ay(){const e=Ln.defaultFeeds.filter(r=>r.enabled),t=Ln.userFeeds.filter(r=>r.enabled).map(r=>({url:r.url,category:r.category,source:r.name,enabled:!0,logo:void 0}));return[...e,...t]}const My=[//i,//i,//i,//i,//i,//i,//i,//i,//i,//i,//i,//i,//i,//i,//i,//i,//i,/NFL/i,/NBA/i,/MLB/i,/NHL/i,/FIFA/i,/UEFA/i,/vs./i,/FA Cup/i,/\bFootball\b/i,/\bBasketball\b/i,/\bBaseball\b/i,/\bSoccer\b/i,/\bTennis\b/i,/\bGolf\b/i,/\bCricket\b/i,/\bRugby\b/i,/\bF1\b/i,/Formula 1/i,/NASCAR/i,/Olympics/i,/Olympiad/i,/Super Bowl/i,/World Cup/i,/Touchdown/i,/Quarterback/i,/Playoff/i,/Championship/i,/Kardashian/i,/Taylor\s?Swift/i,/Beyonce/i,/Hollywood/i,/\bMovie\b/i,/\bCinema\b/i,/Film Review/i,/Box Office/i,/Celebrity/i,/Gossip/i,/Red Carpet/i,/Grammy/i,/Oscar/i,/Emmy/i,/Reality TV/i,/Sitcom/i,/Netflix Series/i,/Spoiler/i,/Trailer/i,/Vacation/i,/Resort/i,/\bHotel\b/i,/\bCruise\b/i,/Airline Deals/i,/Travel Guide/i,/\bFashion\b/i,/\bStyle\b/i,/\bBeauty\b/i,/Makeup/i,/Skincare/i,/\bDiet\b/i,/\bRecipe\b/i,/Dating/i,/Horoscope/i,/Astrology/i,/Lottery/i,/Powerball/i,/Mega Millions/i];function vh(e){return My.some(t=>t.test(e))}async function yh(e){const t=new Date().toLocaleDateString("en-CA"),r=!e||e===t;console.log(`Fetching ${r?"latest":"historical"} feeds for ${e||"Today"}...`);const s=[];let o=Ay();if(!r&&e){const[m,g,x]=e.split("-").map(Number),v=new Date(m,g-1,x);v.setDate(v.getDate()+1);const y=v.getFullYear(),j=String(v.getMonth()+1).padStart(2,"0"),k=String(v.getDate()).padStart(2,"0"),C=`${y}-${j}-${k}`;o=[...o,{url:`https://news.google.com/rss/search?q=after:${e}+before:${C}&hl=en-US&gl=US&ceid=US:en`,category:"Geopolitical",source:"Google News Archive",enabled:!0}]}const c=o.map(async m=>{try{const g=await ky(m.url);if(g.status==="ok"&&g.items)return g.items.map(x=>{var _;const y=(x.description||"").replace(/<[^>]*>/g," ").replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/\s+/g," ").trim(),j=y.length>1500?y.substring(0,1500)+"...":y,k=x.pubDate||new Date().toISOString(),C=k.includes("UTC")||k.includes("Z")?k:`${k} UTC`,R=((_=x.enclosure)==null?void 0:_.link)||x.thumbnail||"",b=Ks(R);return{id:x.guid||x.link,source:m.source,timestamp:C,content:j?`${x.title}. ${j}`:x.title,category:m.category,title:x.title||"",link:x.link,picture:b}})}catch(g){console.warn(`Failed to fetch feed ${m.source}:`,g)}return[]});(await Promise.all(c)).forEach(m=>s.push(...m));const f=s.filter(m=>{if(vh(m.content)||m.title&&vh(m.title))return!1;if(e)try{return new Date(m.timestamp).toLocaleDateString("en-CA")===e}catch{return!1}return!0});return console.log(`Ingested ${f.length} signals for ${e||"Today"}. (Filtered out noise and duplicates)`),f.sort((m,g)=>new Date(g.timestamp).getTime()-new Date(m.timestamp).getTime())}class Oy{constructor(){this.audioContext=null,this.masterVolume=.5,typeof window<"u"&&window.AudioContext&&(this.audioContext=new AudioContext)}setMasterVolume(t){this.masterVolume=Math.max(0,Math.min(1,t))}getMasterVolume(){return this.masterVolume}play(t={}){if(!this.audioContext)return;this.audioContext.state==="suspended"&&this.audioContext.resume();const[r=1,s=0,o=220,c=0,u=0,f=.1,m=0,g=0,x=0,v=0,y=0,j=0,k=0,C=0,R=0,b=1,_=0,S=0,T=0,z=0,F=0]=[t.volume||1,t.randomness||0,t.frequency||220,t.attack||0,t.sustain||0,t.release||.1,t.slide||0,t.deltaSlide||0,t.pitchJump||0,t.pitchJumpTime||0,t.repeatTime||0,t.noise||0,t.modulation||0,t.bitCrush||0,t.delay||0,t.sustainVolume||1,t.decay||0,t.tremolo||0,t.phaser||0,t.lowpass||0,t.highpass||0];let D=Math.PI*2,U=[],ie=0;for(let we=0;we<44100;++we)if(ie<we){ie=we;let M=0,G=we/44100,Z=G<c?c&&G/c:G<c+u?1:G<c+u+f?1-(G-c-u)/f*(1-_):_;Z*=S?1-Math.sin(D*G*7)*S*.5:1;let ee=Math.sin(D*o*G*(1+m*G)+Math.sin(D*x*G)*v)*(1-j*Math.random());k&&(ee*=Math.sin(D*k*G)),C&&(ee=Math.round(ee*(1<<C))/(1<<C)),M=ee*Z*this.masterVolume*r,(z||F)&&(M=M*(1-z)+(U[we-1]||0)*z),U.push(M),y&&(ie+=Math.floor(44100*y))}const Y=this.audioContext.createBuffer(1,U.length,44100);Y.getChannelData(0).set(U);const fe=this.audioContext.createBufferSource();if(fe.buffer=Y,R){const we=this.audioContext.createDelay(1);we.delayTime.value=R;const M=this.audioContext.createGain();M.gain.value=.5,fe.connect(we),we.connect(M),M.connect(this.audioContext.destination)}fe.connect(this.audioContext.destination),fe.start()}playCompletion(){this.play({volume:.3,frequency:800,attack:.01,sustain:.1,release:.2,slide:.3,modulation:10,decay:.2})}playSuccess(){this.play({volume:.25,frequency:523.25,attack:.01,sustain:.05,release:.1,slide:.2,modulation:5})}playNotification(){this.play({volume:.2,frequency:440,attack:.02,sustain:.08,release:.15,modulation:8,tremolo:.1})}playPing(){this.play({volume:.15,frequency:1200,attack:.001,sustain:.05,release:.1,slide:-.5,modulation:0})}playMultiplePings(t){for(let r=0;r<t;r++)setTimeout(()=>{this.playPing()},r*150)}}const gn=new Oy,Qm=()=>{const e=new Date,t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0");return`${t}-${r}-${s}`},Iy={currentDate:Qm(),availableDates:[],narrative:"",signals:[],insights:[],feeds:[],mapPoints:[],foreignRelations:[],isProcessing:!1,processingStatus:"Idle",isProcessingSection:{narrative:!1,signals:!1,insights:!1,map:!1,relations:!1,rss:!1,bigPicture:!1},completedSections:new Set,bigPicture:null,thinkingTrace:"",aiConfig:{model:"",numCtx:Xt,numPredict:en,enableThinking:!1},availableModels:[],runningModels:[],aiStatus:{isOnline:!1,lastChecked:null,lastError:null},lastUpdated:null,jsonError:{hasError:!1,error:"",canRetry:!1,sectionId:null,retryCount:0},metricDefs:[],dailyMetrics:{},deepDiveBySignalId:{},activeDeepDiveSignalId:null,isGeneratingDeepDive:!1,rawOutputs:{},activeRawOutput:null,sectionGenerationTimes:{},sectionFailures:{narrative:{hasFailed:!1,error:"",failedAt:null,retryCount:0,lastRetryAt:null,nextRetryAt:null,isRetrying:!1},signals:{hasFailed:!1,error:"",failedAt:null,retryCount:0,lastRetryAt:null,nextRetryAt:null,isRetrying:!1},insights:{hasFailed:!1,error:"",failedAt:null,retryCount:0,lastRetryAt:null,nextRetryAt:null,isRetrying:!1},map:{hasFailed:!1,error:"",failedAt:null,retryCount:0,lastRetryAt:null,nextRetryAt:null,isRetrying:!1},relations:{hasFailed:!1,error:"",failedAt:null,retryCount:0,lastRetryAt:null,nextRetryAt:null,isRetrying:!1},rss:{hasFailed:!1,error:"",failedAt:null,retryCount:0,lastRetryAt:null,nextRetryAt:null,isRetrying:!1},bigPicture:{hasFailed:!1,error:"",failedAt:null,retryCount:0,lastRetryAt:null,nextRetryAt:null,isRetrying:!1}},soundVolume:.5};let w={...Iy};const pr=new Set;function oe(){pr.forEach(e=>e({...w}))}function zs(e){const t=Date.now();w.timers=w.timers||{},w.timers[e]=t}function Un(e){var s;const t=Date.now(),r=(s=w.timers)==null?void 0:s[e];if(r){const o=t-r;w={...w,sectionGenerationTimes:{...w.sectionGenerationTimes,[e]:o}},delete w.timers[e]}}async function Lt(){w.currentDate&&(await pe.saveAnalysis(w.currentDate,{narrative:w.narrative,signals:w.signals,insights:w.insights,feeds:w.feeds,mapPoints:w.mapPoints,foreignRelations:w.foreignRelations,dailyMetrics:w.dailyMetrics,lastUpdated:w.lastUpdated}),await pe.saveGlobal("ai_config",w.aiConfig),await pe.saveGlobal("bigPicture",w.bigPicture),await pe.saveGlobal("relation_defs",w.foreignRelations.map(e=>({id:e.id,countryA:e.countryA,countryB:e.countryB,topic:e.topic}))),await pe.saveGlobal("metric_defs",w.metricDefs),await pe.saveGlobal("deep_dive_cache",w.deepDiveBySignalId),await pe.saveGlobal("sound_volume",w.soundVolume))}function gt(){const[e,t]=I.useState(w);I.useEffect(()=>{pr.add(t),(async()=>{const Z=Qm(),[ee,O,V,P,H]=await Promise.all([pe.getAnalysis(Z),pe.getGlobal("ai_config"),pe.getGlobal("relation_defs"),pe.getAllDates(),pe.getGlobal("bigPicture")]),[ne,Q,re,J]=await Promise.all([pe.getGlobal("source_credibility"),pe.getGlobal("metric_defs"),pe.getGlobal("deep_dive_cache"),pe.getGlobal("sound_volume")]);if(O&&(w.aiConfig=O),H&&(w.bigPicture=H),Q&&Array.isArray(Q)&&(w.metricDefs=Q),re&&typeof re=="object"&&(w.deepDiveBySignalId=re),typeof J=="number"&&J>=0&&J<=1&&(w.soundVolume=J),w.availableDates=P.length>0?P:[Z],w.currentDate=Z,ee){const K=w.bigPicture;Object.assign(w,ee),K&&(w.bigPicture=K),w.dailyMetrics||(w.dailyMetrics={}),w.lastUpdated&&(w.lastUpdated=new Date(w.lastUpdated))}else if(V){const K=await j();w.foreignRelations=V.map(Ee=>{const X=K.find(ue=>ue.id===Ee.id);return X||{...Ee,status:"Awaiting discovery...",sentiment:"neutral",lastUpdate:new Date().toISOString()}})}oe(),Y(),le()})();const G=setInterval(()=>{Y()},5e3);return()=>{pr.delete(t),clearInterval(G),Y()}},[]);const r=I.useCallback(M=>{const G=w.metricDefs.findIndex(ee=>ee.id===M.id),Z=[...w.metricDefs];G>=0?Z[G]=M:Z.push(M),w={...w,metricDefs:Z},oe(),Lt()},[]),s=I.useCallback(M=>{w={...w,metricDefs:w.metricDefs.filter(G=>G.id!==M)},oe(),Lt()},[]),o=I.useCallback(M=>{w={...w,activeDeepDiveSignalId:M},oe()},[]),c=I.useCallback(()=>{w={...w,activeDeepDiveSignalId:null},oe()},[]),u=I.useCallback(async M=>{if(w.deepDiveBySignalId[M]){w={...w,activeDeepDiveSignalId:M},oe();return}const Z=w.signals.find(ee=>(ee.id||"")===M);if(Z){w={...w,isGeneratingDeepDive:!0,activeDeepDiveSignalId:M},oe();try{const{generateDeepDive:ee}=await Er(async()=>{const{generateDeepDive:V}=await Promise.resolve().then(()=>_y);return{generateDeepDive:V}},void 0),O=await ee(Z,w.feeds,w.currentDate,w.aiConfig);w={...w,deepDiveBySignalId:{...w.deepDiveBySignalId,[M]:O},isGeneratingDeepDive:!1},oe(),Lt()}catch{w={...w,isGeneratingDeepDive:!1},oe()}}},[]),f=I.useCallback((M,G)=>{w={...w,rawOutputs:{...w.rawOutputs,[M]:G}},oe()},[]),m=I.useCallback(M=>{w={...w,activeRawOutput:M},oe()},[]),g=I.useCallback(M=>{console.log("Clearing section:",M),M==="narrative"?w={...w,narrative:""}:M==="signals"?w={...w,signals:[]}:M==="insights"?w={...w,insights:[]}:M==="map"?w={...w,mapPoints:[]}:M==="relations"&&(w={...w,foreignRelations:[]});const G={...w.rawOutputs};delete G[M],w={...w,rawOutputs:G},oe()},[]),x=I.useCallback(()=>{w={...w,activeRawOutput:null},oe()},[]),v=I.useCallback((M,G)=>{const Z=new Date,ee=Math.min(1e3*Math.pow(2,w.sectionFailures[M].retryCount),3e4),O=new Date(Z.getTime()+ee);w={...w,sectionFailures:{...w.sectionFailures,[M]:{hasFailed:!0,error:G,failedAt:Z,retryCount:w.sectionFailures[M].retryCount+1,lastRetryAt:null,nextRetryAt:O,isRetrying:!1}}},oe()},[]),y=I.useCallback(M=>{w={...w,sectionFailures:{...w.sectionFailures,[M]:{hasFailed:!1,error:"",failedAt:null,retryCount:0,lastRetryAt:null,nextRetryAt:null,isRetrying:!1}}},oe()},[]),j=async()=>{try{const M=await pe.getAllDates();for(let G=M.length-1;G>=0;G--){const Z=await pe.getAnalysis(M[G]);if(Z&&Z.foreignRelations&&Z.foreignRelations.length>0)return Z.foreignRelations}}catch{}return[]},k=I.useCallback(async M=>{if(w.isProcessing)return;const G=await pe.getGlobal("relation_defs"),Z=w.bigPicture;w.currentDate=M;const ee=await pe.getAnalysis(M);if(ee){if(Object.assign(w,ee),w.lastUpdated&&(w.lastUpdated=new Date(w.lastUpdated)),Z&&(w.bigPicture=Z),w.dailyMetrics||(w.dailyMetrics={}),G){const O=w.foreignRelations;w.foreignRelations=G.map(V=>{const P=O.find(H=>H.id===V.id);return P?{...V,status:P.status,sentiment:P.sentiment,lastUpdate:P.lastUpdate}:{...V,status:"No data for this date.",sentiment:"neutral",lastUpdate:new Date().toISOString()}})}}else w.narrative="",w.signals=[],w.insights=[],w.feeds=[],w.mapPoints=[],w.dailyMetrics={},w.lastUpdated=null,Z&&(w.bigPicture=Z),G&&(w.foreignRelations=G.map(O=>({...O,status:"No data for this date.",sentiment:"neutral",lastUpdate:new Date().toISOString()})));oe()},[]),C=I.useCallback(async()=>{if(w.isProcessing)return;const M=rt.getRunningJobs();M.length>0&&(console.log(`Cancelling ${M.length} existing jobs before full refresh`),rt.cancelAll());let G=w.foreignRelations;if(G.every(Z=>Z.status==="No data for this date."||Z.status.includes("Awaiting"))){const Z=await j();Z.length>0&&(G=await pe.getGlobal("relation_defs").then(ee=>ee?ee.map(O=>{const V=Z.find(P=>P.id===O.id);return V||O}):Z))}w={...w,isProcessing:!0,processingStatus:"Initializing Intelligence Network...",thinkingTrace:"",isProcessingSection:{rss:!0,narrative:!1,signals:!1,insights:!1,map:!1,relations:!1,bigPicture:!1},completedSections:new Set},zs("full-scan"),zs("rss"),oe();try{let Z=w.feeds;!Z||Z.length===0?(w={...w,processingStatus:"Fetching latest feeds..."},oe(),Z=await yh(w.currentDate)):(w={...w,processingStatus:"Using cached feeds..."},oe());const ee=await $c(Z,G,w.aiConfig,w.bigPicture,V=>{w={...w,processingStatus:V},oe()},V=>{w={...w,narrative:V},oe()},V=>{w={...w,thinkingTrace:V},oe()},V=>{const P=["rss","narrative","signals","insights","map","relations"],H=V,ne=P.indexOf(H);w={...w,completedSections:new Set([...w.completedSections,V])},Un(V);const Q={...w.isProcessingSection};if(Q[H]=!1,ne<P.length-1){const re=P[ne+1];Q[re]=!0,zs(re)}w={...w,isProcessingSection:Q},oe()});if(w={...w,...ee,feeds:Z,isProcessing:!1,processingStatus:"Scan Complete",isProcessingSection:{narrative:!1,signals:!1,insights:!1,map:!1,relations:!1,rss:!1,bigPicture:!1},lastUpdated:new Date},Un("full-scan"),w.soundVolume>0&&(gn.setMasterVolume(w.soundVolume),gn.playCompletion()),ee.rawOutputs){const V=ee.rawOutputs;w={...w,rawOutputs:{...w.rawOutputs,...V}}}const O=await pe.getAllDates();w.availableDates=O,oe(),Lt()}catch(Z){Un("full-scan"),["narrative","signals","insights","map","relations"].forEach(Un),w={...w,isProcessing:!1,processingStatus:"Error"},Z instanceof Error&&Z.message.includes("Processing cancelled")&&(console.log("Full processing was cancelled by user"),w={...w,processingStatus:"Cancelled"}),oe()}},[]),R=I.useCallback(async()=>{if(!w.isProcessing){w={...w,isProcessing:!0,processingStatus:"Updating Feeds..."},oe();try{const M=await yh(w.currentDate);w={...w,feeds:M,isProcessing:!1,processingStatus:"Feed Update Complete",lastUpdated:new Date},oe(),Lt()}catch{w={...w,isProcessing:!1,processingStatus:"Feed Update Failed"},oe()}}},[]),b=I.useCallback((M,G,Z)=>{w={...w,jsonError:{hasError:!0,error:M,canRetry:Z,sectionId:G,retryCount:w.jsonError.retryCount}},oe()},[]),_=I.useCallback(()=>{w={...w,jsonError:{hasError:!1,error:"",canRetry:!1,sectionId:null,retryCount:0}},oe()},[]),S=I.useCallback(async(M,G=!1)=>{var O;if(console.log(`refreshSection called for ${M}`,{isProcessing:w.isProcessing,isProcessingSection:w.isProcessingSection[M],feedsLength:w.feeds.length,runningJobs:rt.getRunningJobs(),force:G}),w.isProcessing||w.feeds.length===0){console.log("refreshSection blocked:",{isProcessing:w.isProcessing,feedsLength:w.feeds.length});return}if(!G&&w.isProcessingSection[M]){console.log("refreshSection blocked: section already processing",{sectionId:M,isProcessingSection:w.isProcessingSection[M]});return}const ee=rt.getRunningJobs().filter(V=>V.includes(`section-${M}-`));if(console.log(`Found ${ee.length} jobs for section ${M}:`,ee),ee.length>0&&(console.log(`Cancelling ${ee.length} existing jobs for section ${M}`),ee.forEach(V=>rt.cancelJob(V)),w={...w,isProcessingSection:{...w.isProcessingSection,[M]:!1}},Un(M),oe(),await new Promise(V=>setTimeout(V,100))),w.isProcessingSection[M]){console.log("Section still processing after cancellation attempt:",{sectionId:M,isProcessingSection:w.isProcessingSection[M]});return}w={...w,isProcessingSection:{...w.isProcessingSection,[M]:!0}},zs(M),oe();try{const V=await Ym(M,w.feeds,w.foreignRelations,w.aiConfig,M==="narrative"?P=>{w={...w,narrative:P},oe()}:void 0,{narrative:w.narrative,signals:w.signals,signalsText:((O=w.signals)==null?void 0:O.map(P=>`- ${P.text} [Sentiment: ${P.sentiment}]`).join(`
`))||"",insights:w.insights,bigPicture:w.bigPicture},(P,H)=>{b(P,M,H)});if(w={...w,...V,isProcessingSection:{...w.isProcessingSection,[M]:!1}},Un(M),w.soundVolume>0)if(gn.setMasterVolume(w.soundVolume),M==="signals"&&w.signals.length>0){const P=w.signals.length;P>1?gn.playMultiplePings(P):gn.playCompletion()}else gn.playCompletion();if(V.rawOutputs){const P=V.rawOutputs;w={...w,rawOutputs:{...w.rawOutputs,...P}}}oe(),Lt()}catch(V){if(console.error("refreshSection error for",M,":",V),Un(M),w={...w,isProcessingSection:{...w.isProcessingSection,[M]:!1}},V instanceof Error&&V.message.includes("Processing cancelled")){console.log(`Section ${M} processing was cancelled by user`),oe();return}v(M,String(V)),oe()}},[b]),T=I.useCallback(async()=>{if(w.isProcessing||w.isProcessingSection.bigPicture)return;const G=rt.getRunningJobs().filter(Z=>Z.includes("big-picture-"));G.length>0&&(console.log(`Cancelling ${G.length} existing big picture jobs`),G.forEach(Z=>rt.cancelJob(Z))),w={...w,isProcessingSection:{...w.isProcessingSection,bigPicture:!0}},oe();try{const Z=await pe.getAllDates(),O=(await Promise.all(Z.map(async P=>{const H=await pe.getAnalysis(P);return{date:P,narrative:(H==null?void 0:H.narrative)||"",signals:(H==null?void 0:H.signals)||[],insights:(H==null?void 0:H.insights)||[]}}))).filter(P=>P.narrative.length>0),V=await Bm(O,w.aiConfig,P=>{});w={...w,bigPicture:{summary:V.summary,timeline:V.timeline.map(P=>({...P,sentiment:P.sentiment||"neutral"})),lastUpdated:new Date().toISOString()},isProcessingSection:{...w.isProcessingSection,bigPicture:!1}},oe(),Lt()}catch(Z){console.error(Z),w={...w,isProcessingSection:{...w.isProcessingSection,bigPicture:!1}},Z instanceof Error&&Z.message.includes("Processing cancelled")&&console.log("Big picture processing was cancelled by user"),oe()}},[]),z=I.useCallback((M,G,Z)=>{const ee={id:Math.random().toString(36).substr(2,9),countryA:M,countryB:G,topic:Z,status:"Added - waiting for scan...",sentiment:"neutral",lastUpdate:new Date().toISOString()};w={...w,foreignRelations:[...w.foreignRelations,ee]},oe(),Lt()},[]),F=I.useCallback(M=>{w={...w,foreignRelations:w.foreignRelations.filter(G=>G.id!==M)},oe(),Lt()},[]),D=I.useCallback(async()=>{try{const{OllamaService:M}=await Er(async()=>{const{OllamaService:Z}=await Promise.resolve().then(()=>Ka);return{OllamaService:Z}},void 0),G=await M.listModels();w={...w,availableModels:G},oe()}catch{}},[]),U=I.useCallback(M=>{w={...w,aiConfig:{...w.aiConfig,...M}},oe(),Lt()},[]),ie=I.useCallback(async M=>{const G=w.sectionFailures[M];if(!(!G.hasFailed||G.isRetrying)){w={...w,sectionFailures:{...w.sectionFailures,[M]:{...G,isRetrying:!0,lastRetryAt:new Date}}},oe();try{await S(M,!0),y(M)}catch(Z){const ee=new Date,O=Math.min(1e3*Math.pow(2,G.retryCount+1),3e4),V=new Date(ee.getTime()+O);w={...w,sectionFailures:{...w.sectionFailures,[M]:{...G,error:`Retry failed: ${Z}`,retryCount:G.retryCount+1,lastRetryAt:ee,nextRetryAt:V,isRetrying:!1}}},oe()}}},[S,y]),Y=I.useCallback(async()=>{try{const{OllamaService:M}=await Er(async()=>{const{OllamaService:Z}=await Promise.resolve().then(()=>Ka);return{OllamaService:Z}},void 0),G=await M.getRunningModels();w={...w,runningModels:G},pr.forEach(Z=>Z({...w}))}catch{}},[]),le=I.useCallback(async()=>{try{const{OllamaService:M}=await Er(async()=>{const{OllamaService:ee}=await Promise.resolve().then(()=>Ka);return{OllamaService:ee}},void 0),[G,Z]=await Promise.all([M.listModels(),M.getRunningModels()]);w={...w,availableModels:G,runningModels:Z,aiStatus:{isOnline:!0,lastChecked:new Date,lastError:null}},pr.forEach(ee=>ee({...w}))}catch(M){w={...w,aiStatus:{isOnline:!1,lastChecked:new Date,lastError:M instanceof Error?M.message:"Unknown error"}},pr.forEach(G=>G({...w}))}},[]),fe=I.useCallback(async M=>{_(),w={...w,isProcessingSection:{...w.isProcessingSection,[M]:!0}},oe();try{await S(M,!0)}catch(G){w={...w,jsonError:{hasError:!0,error:`Retry failed: ${G}`,canRetry:!0,sectionId:M,retryCount:w.jsonError.retryCount+1},isProcessingSection:{...w.isProcessingSection,[M]:!1}},oe()}},[S,_]),we=I.useCallback(M=>{const G=Math.max(0,Math.min(1,M));w={...w,soundVolume:G},oe(),Lt()},[]);return I.useEffect(()=>{const M=setInterval(()=>{const G=new Date;let Z=!1;Object.entries(w.sectionFailures).forEach(([ee,O])=>{O.hasFailed&&!O.isRetrying&&O.nextRetryAt&&G>=O.nextRetryAt&&(ie(ee),Z=!0)}),Z&&oe()},1e3);return()=>clearInterval(M)},[ie]),{...e,refresh:C,refreshFeeds:R,refreshSection:S,generateBigPicture:T,addRelation:z,removeRelation:F,fetchAvailableModels:D,updateAiConfig:U,fetchRunningModels:Y,loadDate:k,setJsonError:b,clearJsonError:_,retryJsonSection:fe,upsertMetricDef:r,removeMetricDef:s,openDeepDive:o,closeDeepDive:c,generateDeepDive:u,setRawOutput:f,showRawOutput:m,hideRawOutput:x,clearSection:g,setSoundVolume:we,sectionGenerationTimes:w.sectionGenerationTimes,sectionFailures:w.sectionFailures,setSectionFailure:v,clearSectionFailure:y,retryFailedSection:ie}}function Xm({isOpen:e,onClose:t,sectionId:r,title:s}){const{rawOutputs:o}=gt(),c=o[r],f=(m=>{try{const g=JSON.parse(m);return JSON.stringify(g,null,2)}catch{const g=m.match(/\{[\s\S]*\}/);if(g)try{const x=JSON.parse(g[0]);return JSON.stringify(x,null,2)}catch{return m}return m}})(c||"");return I.useEffect(()=>{const m=g=>{g.key==="Escape"&&t()};if(e)return document.addEventListener("keydown",m),()=>document.removeEventListener("keydown",m)},[e,t]),!e||!c?null:a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-md p-4",children:a.jsxs("div",{className:"relative w-full max-w-5xl max-h-[85vh] bg-gradient-to-br from-slate-900 to-slate-800 border border-slate-700/50 rounded-3xl shadow-2xl shadow-black/50 overflow-hidden backdrop-blur-xl",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-700/50 bg-gradient-to-r from-slate-800/50 to-slate-700/50 backdrop-blur-sm",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-xl font-bold text-white font-display mb-2",children:"Raw AI Output"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-sm text-slate-300",children:s}),a.jsx("span",{className:"text-slate-500",children:""}),a.jsx("span",{className:"text-sm font-mono bg-slate-700/50 px-3 py-1 rounded-lg text-slate-300 border border-slate-600/50",children:r})]})]}),a.jsx("button",{onClick:t,className:"p-3 rounded-xl bg-slate-700/50 hover:bg-slate-600/50 transition-all duration-200 text-slate-400 hover:text-white border border-slate-600/30 hover:border-slate-500/50","aria-label":"Close modal",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),a.jsx("div",{className:"p-6 overflow-y-auto max-h-[60vh] custom-scrollbar",children:a.jsxs("div",{className:"bg-slate-900/80 border border-slate-700/50 rounded-2xl p-6 backdrop-blur-sm",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),a.jsx("span",{className:"text-sm font-mono text-slate-400 uppercase tracking-wider",children:"Raw Response"}),a.jsxs("span",{className:"text-xs text-slate-500",children:["(",c.length.toLocaleString()," characters)"]})]}),a.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(c)},className:"text-sm px-4 py-2 bg-blue-600/20 text-blue-400 rounded-lg hover:bg-blue-600/30 transition-all duration-200 flex items-center gap-2 border border-blue-500/30 hover:border-blue-400/50",children:[a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),a.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),"Copy to Clipboard"]})]}),a.jsx("div",{className:"bg-slate-950/50 rounded-xl p-4 border border-slate-800/50",children:a.jsx("pre",{className:"text-sm text-slate-200 font-mono whitespace-pre-wrap leading-relaxed overflow-x-auto",children:f.split(`
`).map((m,g)=>a.jsxs("div",{className:"flex",children:[a.jsx("span",{className:"text-slate-600 select-none mr-4 text-right",style:{minWidth:"2.5ch"},children:g+1}),a.jsx("span",{className:"flex-1",children:m.split(/(["{}\[\]:,])/).map((x,v)=>x==='"'?a.jsx("span",{className:"text-green-400",children:x},v):x==="{"||x==="}"?a.jsx("span",{className:"text-orange-400 font-bold",children:x},v):x==="["||x==="]"?a.jsx("span",{className:"text-blue-400 font-bold",children:x},v):x===":"?a.jsx("span",{className:"text-purple-400 font-bold",children:x},v):x===","?a.jsx("span",{className:"text-slate-400",children:x},v):x.trim()&&!m.includes('"'+x+'"')&&m.includes(x+":")?a.jsx("span",{className:"text-blue-300",children:x},v):x.trim()&&(m.includes('"'+x+'"')||m.match(/"[^"]*"/))?a.jsx("span",{className:"text-green-300",children:x},v):x.trim()&&!isNaN(Number(x))?a.jsx("span",{className:"text-yellow-300",children:x},v):x==="true"||x==="false"?a.jsx("span",{className:"text-cyan-400 font-semibold",children:x},v):x==="null"?a.jsx("span",{className:"text-slate-500 font-semibold",children:x},v):a.jsx("span",{children:x},v))})]},g))})})]})}),a.jsx("div",{className:"p-4 border-t border-slate-700/50 bg-gradient-to-r from-slate-800/30 to-slate-700/30 backdrop-blur-sm",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-slate-500",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),a.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),a.jsx("p",{className:"text-xs text-slate-400",children:"Unprocessed raw output from the AI model before any parsing or formatting"})]})})]})})}const Xi=e=>{if(e<1e3)return`${e}ms`;const t=Math.floor(e/1e3);if(t<60)return`${t}s`;const r=Math.floor(t/60),s=t%60;return`${r.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`};function Wo({children:e,className:t="",isLoading:r=!1,loadingLabel:s="Processing...",loadingSpinnerClassName:o="border-accent-primary",loadingLabelClassName:c="text-accent-primary",loadingOverlayContent:u}){const f=["relative bg-bg-card backdrop-blur-xl border border-white/10 rounded-2xl p-6 transition-all hover:border-white/20",r?"section-loading":"",t].filter(Boolean).join(" ");return a.jsxs("section",{className:f,children:[r&&a.jsx("div",{className:"section-loading-overlay",children:u||a.jsxs(a.Fragment,{children:[a.jsx("div",{className:`w-8 h-8 border-2 border-t-transparent rounded-full animate-spin mb-2 ${o}`}),s&&a.jsx("span",{className:`text-[0.6rem] uppercase tracking-widest font-bold ${c}`,children:s})]})}),e]})}function Vo({title:e,icon:t,accentClassName:r="bg-accent-primary",className:s="",badges:o,actions:c}){const u=Array.isArray(o)?o.filter(Boolean):o?[o]:[];return a.jsxs("div",{className:`flex flex-col lg:flex-row justify-between items-start gap-4 lg:gap-6 ${s}`,children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:`w-1 h-5 rounded-full mt-1 ${r}`}),a.jsx("div",{children:a.jsxs("div",{className:"flex items-center gap-3 text-text-primary font-display text-xl font-semibold",children:[t&&a.jsx("span",{className:"text-text-secondary/80",children:t}),a.jsx("span",{children:e}),u.length>0&&a.jsx("div",{className:"flex flex-wrap items-center gap-2",children:u.map((f,m)=>a.jsx("span",{className:"shrink-0",children:f},m))})]})})]}),c&&a.jsx("div",{className:"flex flex-wrap items-center gap-2 lg:justify-end",children:c})]})}function Ho({label:e="Regenerate",className:t="",...r}){const c=["text-[0.6rem] uppercase tracking-widest font-bold px-2 py-1 rounded border transition-all","bg-white/5 border-white/10 text-white/80 hover:bg-white/10 hover:text-white disabled:opacity-50 disabled:cursor-not-allowed",t].filter(Boolean).join(" ");return a.jsx("button",{className:c,...r,children:e})}const Ry={neutral:"bg-white/5 border-white/10 text-text-secondary",accent:"bg-accent-secondary/20 border-accent-secondary/30 text-accent-secondary",warning:"bg-orange-500/20 border-orange-500/40 text-orange-300",info:"bg-accent-primary/10 border-accent-primary/30 text-accent-primary",success:"bg-emerald-500/15 border-emerald-500/30 text-emerald-300"};function St({children:e,tone:t="neutral",className:r=""}){return a.jsx("span",{className:`text-[0.55rem] uppercase tracking-widest font-bold px-2 py-0.5 rounded border whitespace-nowrap ${Ry[t]} ${r}`.trim(),children:e})}function zy(){const{narrative:e,thinkingTrace:t,isProcessing:r,isProcessingSection:s,refreshSection:o,aiConfig:c,rawOutputs:u,activeRawOutput:f,showRawOutput:m,hideRawOutput:g,sectionGenerationTimes:x}=gt(),v=s.narrative&&!r,[y,j]=I.useState(!1),k=t&&t.length>0,C=I.useMemo(()=>{const b=[];return c.enableThinking&&b.push(a.jsx(St,{tone:"accent",children:"Thinking Mode"},"thinking")),x.narrative&&b.push(a.jsx(St,{tone:"info",children:Xi(x.narrative)},"duration")),b},[c.enableThinking,x.narrative]),R=I.useMemo(()=>!e||r?null:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ho,{onClick:()=>o("narrative",!0)}),u.narrative&&a.jsx("button",{onClick:()=>m("narrative"),className:"text-[0.6rem] uppercase tracking-widest font-bold px-2 py-1 rounded bg-orange-500/20 border border-orange-500/30 text-orange-300 hover:bg-orange-500/30 transition-all",children:"Raw Output"})]}),[r,e,u.narrative,o,m]);return a.jsxs(Wo,{isLoading:v,loadingOverlayContent:a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-8 h-8 border-2 border-accent-primary border-t-transparent rounded-full animate-spin mb-2"}),a.jsx("span",{className:"text-[0.6rem] uppercase tracking-widest font-bold text-accent-primary",children:"Regenerating Briefing..."})]}),children:[a.jsx(Vo,{className:"mb-6",title:"Current Narrative",icon:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),a.jsx("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]}),badges:C,actions:R}),r&&!e?a.jsx("div",{className:"loading-skeleton h-24 bg-white/5 animate-pulse rounded"}):a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"text-text-primary leading-relaxed whitespace-pre-wrap",children:e||"No narrative generated yet. Start a scan to begin."}),k&&a.jsxs("div",{className:"mt-6 border-t border-white/10 pt-4",children:[a.jsxs("button",{onClick:()=>j(!y),className:"w-full flex items-center justify-between gap-3 text-left group",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`text-accent-secondary transition-transform duration-300 ${y?"rotate-90":""}`,children:a.jsx("path",{d:"M9 18l6-6-6-6"})}),a.jsx("span",{className:"text-[0.65rem] uppercase tracking-widest font-bold text-accent-secondary group-hover:opacity-100 opacity-70 transition-opacity",children:"AI Reasoning Trace"}),a.jsxs("span",{className:"text-[0.5rem] text-text-secondary bg-white/5 px-2 py-0.5 rounded-full",children:[Math.round(t.length/100)*100,"+ chars"]})]}),a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"text-text-secondary opacity-40",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),a.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]})]}),y&&a.jsxs("div",{className:"mt-3 animate-in slide-in-from-top-2 duration-300",children:[a.jsxs("div",{className:"relative bg-black/30 border border-accent-secondary/20 rounded-xl p-4 max-h-[400px] overflow-y-auto",children:[a.jsx("div",{className:"absolute top-0 left-0 right-4 h-6 bg-gradient-to-b from-black/30 to-transparent pointer-events-none rounded-t-xl z-10"}),a.jsx("pre",{className:"text-xs text-text-secondary font-mono whitespace-pre-wrap leading-relaxed pt-2",children:t}),a.jsx("div",{className:"absolute bottom-0 left-0 right-4 h-6 bg-gradient-to-t from-black/30 to-transparent pointer-events-none rounded-b-xl"})]}),a.jsx("p",{className:"text-[0.5rem] text-text-secondary mt-2 italic opacity-60",children:"This is the model's internal reasoning process before generating the final narrative."})]})]}),r&&c.enableThinking&&t&&a.jsxs("div",{className:"mt-4 p-3 bg-accent-secondary/10 border border-accent-secondary/20 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("div",{className:"w-2 h-2 bg-accent-secondary rounded-full animate-pulse"}),a.jsx("span",{className:"text-[0.6rem] uppercase tracking-widest font-bold text-accent-secondary",children:"Deep Reasoning in Progress..."})]}),a.jsxs("pre",{className:"text-xs text-text-secondary font-mono whitespace-pre-wrap max-h-32 overflow-hidden",children:[t.slice(-500),"..."]})]})]}),a.jsx(Xm,{isOpen:f==="narrative",onClose:g,sectionId:"narrative",title:"Current Narrative"})]})}function Go({isOpen:e,onClose:t,children:r,className:s="",backdropClassName:o="fixed inset-0 z-[110] flex items-center justify-center p-6 bg-bg-darker/80 backdrop-blur-md animate-in fade-in duration-300",modalId:c="modal"}){return I.useEffect(()=>{const u=v=>{v.key==="Escape"&&e&&t()};let f=!1,m=null;const g=v=>{f=!0,m=v.target},x=v=>{const y=v.target,j=window.getSelection(),C=((j==null?void 0:j.toString())||"").length>0&&!(j!=null&&j.isCollapsed),R=(m==null?void 0:m.getAttribute("data-modal-id"))===c,b=y.getAttribute("data-modal-id")===c;f&&R&&b&&!C&&t(),f=!1,m=null};return e&&(document.addEventListener("keydown",u),document.addEventListener("mousedown",g),document.addEventListener("mouseup",x)),()=>{document.removeEventListener("keydown",u),document.removeEventListener("mousedown",g),document.removeEventListener("mouseup",x)}},[e,t,c]),e?Uo.createPortal(a.jsx("div",{"data-modal-id":c,className:o,children:r}),document.body):null}const Dy=e=>{switch(e){case"extremely-negative":return"var(--crit-bright-red)";case"very-negative":return"var(--crit-red)";case"negative":return"var(--crit-orange)";case"somewhat-negative":return"var(--crit-yellow)";case"neutral":return"var(--crit-gray)";case"interesting":return"var(--crit-blue)";case"positive":return"var(--crit-green)";case"very-positive":return"var(--crit-bright-green)";default:return"var(--crit-gray)"}};function By({isOpen:e,onClose:t,data:r,isGenerating:s}){return e?a.jsx(Go,{isOpen:e,onClose:t,modalId:"deep-dive-modal",children:a.jsxs("div",{className:"bg-bg-card border border-white/10 rounded-2xl p-0 max-w-4xl w-full max-h-[90vh] overflow-hidden relative shadow-2xl flex flex-col",children:[a.jsxs("div",{className:"p-8 border-b border-white/5 bg-gradient-to-br from-white/5 to-transparent relative",children:[a.jsx("button",{onClick:t,className:"absolute top-6 right-6 p-2 text-text-tertiary hover:text-white transition-colors rounded-full hover:bg-white/5",children:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),s?a.jsxs("div",{className:"py-12 flex flex-col items-center justify-center text-center",children:[a.jsx("div",{className:"w-16 h-16 border-4 border-accent-primary/20 border-t-accent-primary rounded-full animate-spin mb-6"}),a.jsx("h2",{className:"text-xl font-bold text-text-primary mb-2 italic",children:"Generating Deep Intelligence Analysis..."}),a.jsx("p",{className:"text-text-secondary text-sm max-w-md",children:"AI is cross-referencing multiple sources to provide a comprehensive breakdown of this signal."})]}):r?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(St,{tone:"accent",children:"Deep Dive Analysis"}),r.header.category&&a.jsx("span",{className:"px-2 py-1 rounded bg-slate-500/20 text-slate-300 text-[0.65rem] uppercase tracking-widest font-bold",children:r.header.category}),a.jsxs("span",{className:"text-[0.6rem] text-text-tertiary uppercase tracking-widest ml-auto",children:["Generated: ",new Date(r.generatedAt).toLocaleString()]})]}),a.jsx("h2",{className:"text-3xl font-bold text-text-primary mb-4 leading-tight tracking-tight",children:r.header.title}),a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-[0.65rem] uppercase tracking-widest text-text-secondary font-bold",children:"Status Assessment:"}),a.jsx("span",{className:"px-3 py-1 rounded-full text-white text-[0.65rem] font-bold uppercase tracking-wider",style:{backgroundColor:Dy(r.header.sentiment)},children:r.header.sentiment.replace("-"," ")})]}),r.header.deltaType&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-[0.65rem] uppercase tracking-widest text-text-secondary font-bold",children:"Vector:"}),a.jsx("span",{className:"px-3 py-1 rounded-full bg-purple-500/20 text-purple-300 text-[0.65rem] font-bold uppercase tracking-wider border border-purple-500/20",children:r.header.deltaType})]})]})]}):a.jsx("div",{className:"py-12 text-center",children:a.jsx("p",{className:"text-text-secondary italic",children:"No data available for this deep dive."})})]}),r&&!s&&a.jsx("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-10",children:[a.jsxs("div",{className:"space-y-8",children:[a.jsxs("section",{children:[a.jsxs("h3",{className:"text-[0.7rem] uppercase tracking-[0.2em] text-accent-secondary font-bold mb-4 flex items-center gap-2",children:[a.jsx("span",{className:"w-4 h-[1px] bg-accent-secondary"}),"Briefing Summary"]}),a.jsx("p",{className:"text-text-secondary text-base leading-relaxed",children:r.header.text})]}),a.jsxs("section",{className:"bg-white/5 border border-white/10 rounded-xl p-6 shadow-inner",children:[a.jsxs("h3",{className:"text-[0.7rem] uppercase tracking-[0.2em] text-accent-primary font-bold mb-6 flex items-center gap-2",children:[a.jsx("span",{className:"w-4 h-[1px] bg-accent-primary"}),"Intelligence Breakdown (5Ws)"]}),a.jsxs("div",{className:"space-y-5",children:[r.fiveWs.who&&r.fiveWs.who.length>0&&a.jsxs("div",{className:"flex gap-4",children:[a.jsx("div",{className:"w-16 shrink-0 text-[0.6rem] uppercase font-black text-text-tertiary bg-white/5 rounded h-6 flex items-center justify-center border border-white/5",children:"WHO"}),a.jsx("div",{className:"flex flex-wrap gap-2 text-text-primary text-sm font-medium",children:r.fiveWs.who.join(", ")})]}),r.fiveWs.what&&a.jsxs("div",{className:"flex gap-4",children:[a.jsx("div",{className:"w-16 shrink-0 text-[0.6rem] uppercase font-black text-text-tertiary bg-white/5 rounded h-6 flex items-center justify-center border border-white/5",children:"WHAT"}),a.jsx("div",{className:"text-text-primary text-sm leading-snug",children:r.fiveWs.what})]}),r.fiveWs.where&&a.jsxs("div",{className:"flex gap-4",children:[a.jsx("div",{className:"w-16 shrink-0 text-[0.6rem] uppercase font-black text-text-tertiary bg-white/5 rounded h-6 flex items-center justify-center border border-white/5",children:"WHERE"}),a.jsx("div",{className:"text-text-primary text-sm font-medium",children:r.fiveWs.where})]}),r.fiveWs.when&&a.jsxs("div",{className:"flex gap-4",children:[a.jsx("div",{className:"w-16 shrink-0 text-[0.6rem] uppercase font-black text-text-tertiary bg-white/5 rounded h-6 flex items-center justify-center border border-white/5",children:"WHEN"}),a.jsx("div",{className:"text-text-primary text-sm",children:r.fiveWs.when})]}),r.fiveWs.why&&a.jsxs("div",{className:"flex gap-4",children:[a.jsx("div",{className:"w-16 shrink-0 text-[0.6rem] uppercase font-black text-text-tertiary bg-white/5 rounded h-6 flex items-center justify-center border border-white/5",children:"WHY"}),a.jsx("div",{className:"text-text-secondary text-sm italic leading-snug",children:r.fiveWs.why})]}),r.fiveWs.soWhat&&a.jsxs("div",{className:"mt-8 pt-6 border-t border-white/10",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"text-accent-secondary",children:[a.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),a.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),a.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),a.jsx("span",{className:"text-[0.65rem] uppercase tracking-widest text-accent-secondary font-black",children:"Strategic Significance"})]}),a.jsx("p",{className:"text-text-primary text-sm font-bold leading-relaxed border-l-2 border-accent-secondary pl-4 py-1",children:r.fiveWs.soWhat})]})]})]})]}),a.jsxs("div",{className:"space-y-8",children:[a.jsxs("section",{children:[a.jsxs("h3",{className:"text-[0.7rem] uppercase tracking-[0.2em] text-accent-secondary font-bold mb-4 flex items-center gap-2",children:[a.jsx("span",{className:"w-4 h-[1px] bg-accent-secondary"}),"Source References"]}),a.jsx("div",{className:"space-y-3",children:r.evidence.map((o,c)=>a.jsxs("div",{className:"bg-white/5 border border-white/5 rounded-lg p-4 transition-all hover:bg-white/10",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("span",{className:"text-[0.65rem] font-bold text-accent-primary",children:o.source}),o.timestamp&&a.jsx("span",{className:"text-[0.55rem] text-text-tertiary uppercase",children:new Date(o.timestamp).toLocaleDateString()})]}),a.jsx("h4",{className:"text-xs font-semibold text-text-primary mb-2 leading-tight",children:o.title}),o.quote&&a.jsx("p",{className:"text-xs italic text-text-secondary border-l border-white/10 pl-3 mb-2",children:o.quote}),o.link&&a.jsx("a",{href:o.link,target:"_blank",rel:"noopener noreferrer",className:"text-[0.6rem] text-accent-secondary hover:underline flex items-center gap-1",children:"Open Article "})]},c))})]}),r.counterpoints&&r.counterpoints.length>0&&a.jsxs("section",{children:[a.jsxs("h3",{className:"text-[0.7rem] uppercase tracking-[0.2em] text-orange-400 font-bold mb-4 flex items-center gap-2",children:[a.jsx("span",{className:"w-4 h-[1px] bg-orange-400"}),"Main Perspectives"]}),a.jsx("div",{className:"space-y-4",children:r.counterpoints.map((o,c)=>a.jsx("div",{className:"bg-orange-500/5 border border-orange-500/10 rounded-xl p-4",children:a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-[0.6rem] uppercase tracking-widest text-red-400 font-bold mb-1",children:"Perspective A"}),a.jsx("p",{className:"text-xs text-text-primary font-medium leading-snug",children:o.claimA})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-[0.6rem] uppercase tracking-widest text-blue-400 font-bold mb-1",children:"Perspective B"}),a.jsx("p",{className:"text-xs text-text-primary font-medium leading-snug",children:o.claimB})]})]})},c))})]}),r.watchNext&&r.watchNext.length>0&&a.jsxs("section",{className:"bg-accent-primary/5 border border-accent-primary/20 rounded-xl p-5 mt-auto",children:[a.jsxs("h3",{className:"text-[0.65rem] uppercase tracking-widest text-accent-primary font-bold mb-4 flex items-center gap-2",children:[a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[a.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),a.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),"Watch For"]}),a.jsx("ul",{className:"space-y-2",children:r.watchNext.map((o,c)=>a.jsxs("li",{className:"text-xs text-text-primary flex items-start gap-2",children:[a.jsx("span",{className:"text-accent-primary mt-0.5",children:""}),o]},c))})]})]})]})}),r&&!s&&a.jsx("div",{className:"p-4 bg-white/2 border-t border-white/5 text-center",children:a.jsx("p",{className:"text-[0.6rem] text-text-tertiary uppercase tracking-widest",children:"Framework Identity: SI-7764-B  SignalFrame Intelligence Node"})})]})}):null}function qc({error:e,onRetry:t,onCancel:r,countdown:s=5,isRetrying:o=!1}){const[c,u]=I.useState(s),[f,m]=I.useState(!0),g=I.useRef(t);I.useEffect(()=>{g.current=t},[t]),I.useEffect(()=>{o||(u(s),m(!0))},[e,s,o]),I.useEffect(()=>{o&&m(!1)},[o]),I.useEffect(()=>{if(!f||c<=0||o){c===0&&f&&!o&&(console.log("JsonErrorDisplay: Auto-retry triggered"),m(!1),g.current());return}const y=setInterval(()=>{u(j=>j<=1?(m(!1),0):j-1)},1e3);return()=>clearInterval(y)},[c,f,o]);const x=()=>{f&&c>0&&(m(!1),u(0)),t()},v=()=>{m(!1),r()};return a.jsx("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-4 mb-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"w-5 h-5 text-red-400 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-sm font-medium text-red-400 mb-2",children:"AI Response Error"}),a.jsx("p",{className:"text-xs text-red-300 mb-3",children:e}),a.jsxs("div",{className:"flex gap-2",children:[f&&c>0&&!o&&a.jsxs("div",{className:"flex items-center gap-2 text-xs text-yellow-400 bg-yellow-500/10 px-3 py-2 rounded border border-yellow-500/30",children:[a.jsx("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),a.jsxs("span",{children:["Auto-retry in ",c,"s..."]})]}),a.jsx("button",{onClick:x,disabled:o,className:"text-xs px-3 py-2 bg-blue-500/20 text-blue-400 rounded border border-blue-500/30 hover:bg-blue-500/30 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:o?a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"w-3 h-3 animate-spin",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Retrying..."]}):a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),f&&c>0?"Retry Now":"Regenerate"]})}),f&&c>0&&a.jsxs("button",{onClick:v,className:"text-xs px-3 py-2 bg-gray-500/20 text-gray-400 rounded border border-gray-500/30 hover:bg-gray-500/30 transition-colors flex items-center gap-2",children:[a.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Cancel"]})]})]})]})})}const _h=e=>{switch(e){case"extremely-negative":return"var(--crit-bright-red)";case"very-negative":return"var(--crit-red)";case"negative":return"var(--crit-orange)";case"somewhat-negative":return"var(--crit-yellow)";case"neutral":return"var(--crit-gray)";case"interesting":return"var(--crit-blue)";case"positive":return"var(--crit-green)";case"very-positive":return"var(--crit-bright-green)";default:return"var(--crit-gray)"}},wh={"extremely-negative":0,"very-negative":1,negative:2,"somewhat-negative":3,neutral:4,interesting:5,positive:6,"very-positive":7};function Fy(){const{signals:e,insights:t,isProcessing:r,isProcessingSection:s,refreshSection:o,jsonError:c,clearJsonError:u,retryJsonSection:f,rawOutputs:m,activeRawOutput:g,showRawOutput:x,hideRawOutput:v,sectionGenerationTimes:y,sectionFailures:j,retryFailedSection:k,clearSectionFailure:C,generateDeepDive:R,closeDeepDive:b,deepDiveBySignalId:_,activeDeepDiveSignalId:S,isGeneratingDeepDive:T}=gt(),[z,F]=I.useState("none"),[D,U]=I.useState(null),ie=s.signals&&!r,Y=j.signals,le=Y==null?void 0:Y.hasFailed,fe=Y==null?void 0:Y.isRetrying,we=I.useMemo(()=>{const P=[];return P.push(a.jsx(St,{tone:e.length>0?"neutral":"warning",children:e.length>0?`${e.length} signals`:"No signals"},"count")),y.signals&&P.push(a.jsx(St,{tone:"info",children:Xi(y.signals)},"duration")),le?P.push(a.jsx(St,{tone:"warning",children:"Generation Failed"},"failed")):fe&&P.push(a.jsx(St,{tone:"accent",children:"Retrying..."},"retrying")),P},[le,fe,y.signals,e.length]),M=I.useMemo(()=>{const P=e.length>0&&!le&&a.jsxs("div",{className:"flex bg-white/5 rounded-lg p-1 border border-white/10",children:[a.jsx("button",{onClick:()=>F("none"),className:`text-[0.55rem] px-2 py-1 mx-1 rounded font-medium transition-all ${z==="none"?"bg-gray-500 text-white":"text-text-secondary hover:text-text-primary"}`,children:"Default"}),a.jsx("button",{onClick:()=>F("pos-neg"),className:`text-[0.55rem] px-2 py-1 mx-1 rounded font-medium transition-all ${z==="pos-neg"?"bg-accent-secondary text-white":"text-text-secondary hover:text-text-primary"}`,children:"Positive  Negative"}),a.jsx("button",{onClick:()=>F("neg-pos"),className:`text-[0.55rem] px-2 py-1 mx-1 rounded font-medium transition-all ${z==="neg-pos"?"bg-red-500 text-white":"text-text-secondary hover:text-text-primary"}`,children:"Negative  Positive"})]}),H=!r&&!le&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ho,{onClick:()=>o("signals",!0),className:"opacity-80 hover:opacity-100"}),m.signals&&a.jsx("button",{onClick:()=>x("signals"),className:"text-[0.6rem] uppercase tracking-widest font-bold px-2 py-1 rounded bg-orange-500/20 border border-orange-500/30 text-orange-300 hover:bg-orange-500/30 transition-all",children:"Raw Output"})]});return!P&&!H?null:a.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[P,H]})},[le,r,m.signals,o,F,x,e.length,z]),G=I.useMemo(()=>{const P={};for(const H of t)H.signalId&&(P[H.signalId]||(P[H.signalId]=[]),P[H.signalId].push(H));return P},[t]),Z=P=>P.toLowerCase().replace(/[^a-z0-9\s]/g," ").split(/\s+/).filter(H=>H.length>2),ee=(P,H)=>{if(!P.length||!H.length)return 0;const ne=new Set(P),Q=new Set(H);let re=0;for(const K of ne)Q.has(K)&&(re+=1);const J=new Set([...ne,...Q]).size;return J===0?0:re/J},O=I.useMemo(()=>{const P=[],H=[];for(const ne of e){const Q=ne.title||ne.text||"",re=Z(Q);let J=!1;for(let K=0;K<P.length;K++)if(ee(re,H[K])>=.7){J=!0;break}J||(P.push(ne),H.push(re))}return P},[e]),V=I.useMemo(()=>{const P=O;return z==="none"?P:[...P].sort((H,ne)=>{const Q=wh[H.sentiment]??4,re=wh[ne.sentiment]??4;return z==="pos-neg"?re-Q:Q-re})},[O,z]);return a.jsxs(Wo,{isLoading:ie&&!le,loadingOverlayContent:a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-8 h-8 border-2 border-accent-primary border-t-transparent rounded-full animate-spin mb-2"}),a.jsx("span",{className:"text-[0.6rem] uppercase tracking-widest font-bold text-accent-primary",children:"Processing Deltas..."})]}),children:[le&&!ie&&a.jsx("div",{className:"section-loading-overlay bg-red-500/10 border-red-500/30",children:a.jsx("div",{className:"flex flex-col items-center gap-2",children:fe?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-8 h-8 border-2 border-yellow-400 border-t-transparent rounded-full animate-spin"}),a.jsx("span",{className:"text-[0.6rem] uppercase tracking-widest font-bold text-yellow-400",children:"Retrying..."}),a.jsxs("span",{className:"text-[0.5rem] text-yellow-300/80",children:["Attempt ",Y.retryCount+1]})]}):a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"w-8 h-8 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),a.jsx("span",{className:"text-[0.6rem] uppercase tracking-widest font-bold text-red-400",children:"Generation Failed"}),a.jsx("span",{className:"text-[0.5rem] text-red-300/80 max-w-xs text-center",children:Y.error}),a.jsxs("div",{className:"flex gap-2 mt-2",children:[a.jsx("button",{onClick:()=>k("signals"),className:"text-[0.55rem] px-2 py-1 bg-blue-500/20 text-blue-400 rounded border border-blue-500/30 hover:bg-blue-500/30 transition-colors",children:"Retry Now"}),a.jsx("button",{onClick:()=>C("signals"),className:"text-[0.55rem] px-2 py-1 bg-gray-500/20 text-gray-400 rounded border border-gray-500/30 hover:bg-gray-500/30 transition-colors",children:"Dismiss"})]})]})})}),a.jsx(Vo,{className:"mb-6",title:"Signals & Insights",icon:a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})}),badges:we,actions:M}),c.hasError&&c.sectionId==="signals"&&a.jsx(qc,{error:c.error,onRetry:()=>f("signals"),onCancel:u,countdown:5,isRetrying:s.signals}),r&&e.length===0?a.jsx("div",{className:"space-y-4",children:[1,2,3,4,5,6,7,8,9,10].map(P=>a.jsx("div",{className:"loading-skeleton h-20 bg-white/5 animate-pulse rounded-lg"},P))}):a.jsxs("div",{className:"space-y-4",children:[V.map((P,H)=>{var ne;return a.jsxs("div",{className:"relative bg-white/5 border-l-4 p-4 rounded-r-lg transition-all hover:bg-white/10",style:{borderColor:_h(P.sentiment)},onMouseEnter:()=>{U(P.id||`signal-${H}`)},onMouseLeave:()=>{U(null)},children:[a.jsxs("div",{className:"flex items-start justify-between gap-3 mb-3",children:[a.jsx("h3",{className:"signal-text font-semibold text-text-primary text-base leading-tight",children:P.title||"Error generating signal title"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:Q=>{Q.stopPropagation(),R(P.id||"")},className:"p-1.5 rounded bg-accent-primary/10 text-accent-primary hover:bg-accent-primary/20 transition-all border border-accent-primary/20 group/btn shadow-lg",title:"Deep Intelligence Analyze",children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",className:"group-hover/btn:scale-110 transition-transform",children:[a.jsx("circle",{cx:"11",cy:"11",r:"8"}),a.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})}),a.jsx("span",{className:"text-[0.65rem] uppercase tracking-widest px-2 py-1 rounded text-white font-medium shadow-md",style:{backgroundColor:_h(P.sentiment)},children:P.sentiment.replace("-"," ")})]})]}),a.jsx("p",{className:"signal-text text-text-secondary text-sm leading-relaxed mb-3",children:P.text||"Error generating signal text"}),a.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[P.category&&a.jsx("span",{className:"px-2 py-1 rounded bg-slate-500/20 text-slate-300 text-[0.65rem] uppercase tracking-widest",children:P.category}),P.deltaType&&a.jsx("span",{className:"px-2 py-1 rounded bg-purple-500/20 text-purple-300 text-[0.65rem] uppercase tracking-widest",children:P.deltaType})]}),a.jsx("div",{className:"border-t border-white/10 mb-3"}),a.jsxs("div",{className:"space-y-2",children:[P.explain&&a.jsxs("div",{children:[a.jsx("p",{className:"text-[0.6rem] uppercase tracking-widest text-text-tertiary mb-1",children:"Insight:"}),a.jsx("p",{className:"text-text-secondary text-sm leading-relaxed",children:P.explain})]}),(ne=G[P.id||""])==null?void 0:ne.map((Q,re)=>{const J=Q.text.split("|").map(X=>X.trim()),K=J[0],Ee=J[1];return a.jsxs("div",{className:"bg-accent-secondary/5 border-l-2 border-accent-secondary/40 p-3 rounded-r-lg mt-2",children:[a.jsx("p",{className:"text-[0.6rem] uppercase tracking-widest font-bold text-accent-secondary mb-2",children:"Implication"}),Ee?a.jsxs("div",{className:"space-y-2",children:[a.jsxs("p",{className:"text-xs text-text-secondary/80",children:[a.jsx("span",{className:"font-medium text-text-tertiary",children:"Observation:"})," ",K.replace(/^(Trend|Observation):\s*/i,"")]}),a.jsxs("p",{className:"text-xs text-text-primary leading-snug",children:[a.jsx("span",{className:"font-medium text-text-tertiary",children:"Implication:"})," ",Ee.replace(/^(Implication|Analysis):\s*/i,"")]})]}):a.jsx("p",{className:"text-xs text-text-primary leading-snug",children:Q.text})]},re)})]}),D===(P.id||`signal-${H}`)&&a.jsxs("div",{className:"mt-2 w-full max-w-2xl bg-slate-900/100 border border-white/10 rounded-xl shadow-2xl p-4",children:[P.evidence&&P.evidence.length>0?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"flex justify-between items-start mb-3",children:a.jsxs("p",{className:"text-[0.65rem] font-semibold uppercase tracking-widest text-accent-primary",children:["Source (",P.evidence.length,")"]})}),a.jsx("ul",{className:"space-y-2",children:P.evidence.map((Q,re)=>a.jsxs("li",{className:"text-xs text-text-secondary bg-white/5 rounded p-2 border border-white/10",children:[a.jsxs("div",{className:"flex justify-between items-start gap-2",children:[a.jsx("span",{className:"font-medium text-text-primary text-[0.65rem]",children:Q.source}),Q.timestamp&&a.jsx("span",{className:"text-[0.55rem] uppercase tracking-widest text-text-tertiary",children:new Date(Q.timestamp).toLocaleDateString()})]}),Q.title&&a.jsx("p",{className:"mt-1 text-text-primary text-xs font-medium",children:Q.title}),Q.quote&&a.jsxs("p",{className:"mt-1 italic text-[0.6rem] text-text-secondary",children:['"',Q.quote,'"']}),Q.link&&a.jsx("a",{href:Q.link,target:"_blank",rel:"noopener noreferrer",className:"text-accent-primary hover:underline text-[0.6rem] mt-1 inline-block",children:"Open article "})]},re))})]}):a.jsx("div",{className:"text-xs text-text-tertiary",children:"No evidence available for this signal"}),P.contradictions&&P.contradictions.length>0&&a.jsxs("div",{className:"mt-4 pt-3 border-t border-white/10",children:[a.jsx("div",{className:"flex justify-between items-start mb-3",children:a.jsxs("p",{className:"text-[0.65rem] font-semibold uppercase tracking-widest text-orange-400",children:["Contradictions (",P.contradictions.length,")"]})}),a.jsx("div",{className:"space-y-3",children:P.contradictions.map((Q,re)=>a.jsx("div",{className:"bg-orange-500/10 border border-orange-500/20 rounded-lg p-3",children:a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-[0.6rem] font-medium text-red-400",children:"Claim A:"}),a.jsx("p",{className:"text-xs text-text-primary flex-1",children:Q.claimA})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-[0.6rem] font-medium text-blue-400",children:"Claim B:"}),a.jsx("p",{className:"text-xs text-text-primary flex-1",children:Q.claimB})]}),Q.evidenceA&&Q.evidenceA.length>0&&a.jsxs("div",{className:"mt-2",children:[a.jsx("p",{className:"text-[0.55rem] uppercase tracking-widest text-red-400/80 mb-1",children:"Evidence A:"}),a.jsx("div",{className:"space-y-1",children:Q.evidenceA.map((J,K)=>a.jsxs("div",{className:"text-xs text-text-secondary bg-black/20 rounded p-2 border border-red-500/20",children:[a.jsxs("div",{className:"flex justify-between items-start gap-2",children:[a.jsx("span",{className:"font-medium text-text-primary text-[0.6rem]",children:J.source}),J.timestamp&&a.jsx("span",{className:"text-[0.5rem] uppercase tracking-widest text-text-tertiary",children:new Date(J.timestamp).toLocaleDateString()})]}),J.title&&a.jsx("p",{className:"mt-1 text-text-primary text-xs",children:J.title}),J.quote&&a.jsxs("p",{className:"mt-1 italic text-[0.55rem] text-text-secondary",children:['"',J.quote,'"']}),J.link&&a.jsx("a",{href:J.link,target:"_blank",rel:"noopener noreferrer",className:"text-accent-primary hover:underline text-[0.6rem] mt-1 inline-block",children:"Open article "})]},K))})]}),Q.evidenceB&&Q.evidenceB.length>0&&a.jsxs("div",{className:"mt-2",children:[a.jsx("p",{className:"text-[0.55rem] uppercase tracking-widest text-blue-400/80 mb-1",children:"Evidence B:"}),a.jsx("div",{className:"space-y-1",children:Q.evidenceB.map((J,K)=>a.jsxs("div",{className:"text-xs text-text-secondary bg-black/20 rounded p-2 border border-blue-500/20",children:[a.jsxs("div",{className:"flex justify-between items-start gap-2",children:[a.jsx("span",{className:"font-medium text-text-primary text-[0.6rem]",children:J.source}),J.timestamp&&a.jsx("span",{className:"text-[0.5rem] uppercase tracking-widest text-text-tertiary",children:new Date(J.timestamp).toLocaleDateString()})]}),J.title&&a.jsx("p",{className:"mt-1 text-text-primary text-xs",children:J.title}),J.quote&&a.jsxs("p",{className:"mt-1 italic text-[0.55rem] text-text-secondary",children:['"',J.quote,'"']}),J.link&&a.jsx("a",{href:J.link,target:"_blank",rel:"noopener noreferrer",className:"text-accent-primary hover:underline text-[0.6rem] mt-1 inline-block",children:"Open article "})]},K))})]})]})},re))})]})]})]},P.id||`signal-${H}`)}),!r&&e.length===0&&!c.hasError&&a.jsx("div",{className:"py-8 text-center border-2 border-dashed border-white/5 rounded-xl",children:a.jsx("p",{className:"text-text-secondary italic",children:"No critical signals identified in this period."})})]}),a.jsx(Xm,{isOpen:g==="signals",onClose:v,sectionId:"signals",title:"Signals"}),a.jsx(By,{isOpen:!!S,onClose:b,data:S?_[S]:null,isGenerating:T})]})}function Uy({item:e}){const t=I.useMemo(()=>e.title||e.content.split(". ")[0],[e.title,e.content]),r=I.useMemo(()=>new Date(e.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",timeZoneName:"short"}),[e.timestamp]),s=I.useMemo(()=>e.content.replace(e.title+"."||"",""),[e.content,e.title]),o=I.useCallback(c=>{c.currentTarget.style.display="none"},[]);return a.jsx("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",className:"group block bg-white/[0.03] hover:bg-white/[0.08] border border-white/5 p-3 rounded-lg transition-all duration-200 hover:border-white/10 will-change-transform",children:a.jsx("div",{className:"flex justify-between items-start gap-4",children:a.jsxs("div",{className:"flex-1 flex items-start gap-3",children:[e.picture?a.jsx("img",{src:e.picture,alt:"",className:"w-32 h-32 rounded-lg object-cover flex-shrink-0 opacity-70 group-hover:opacity-100 transition-opacity duration-200",onError:o}):a.jsx("div",{className:"w-32 h-32 rounded-lg object-cover flex-shrink-0 opacity-70 group-hover:opacity-100 transition-opacity duration-200",children:a.jsx("svg",{className:"text-white/10 w-32 h-32",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"text-[0.65rem] font-bold text-accent-secondary uppercase tracking-tight",children:e.source}),a.jsx("span",{className:"text-[0.6rem] text-text-secondary",children:r})]}),a.jsx("p",{className:"text-sm font-medium text-text-primary group-hover:text-accent-primary transition-colors duration-200 line-clamp-2 leading-snug mb-2",children:t}),a.jsx("p",{className:"text-xs text-text-secondary line-clamp-3 leading-relaxed",children:s})]})]})})})}function Zy(){const{feeds:e,isProcessing:t,refreshFeeds:r}=gt(),s=I.useMemo(()=>e.reduce((o,c)=>(o[c.category]||(o[c.category]=[]),o[c.category].push(c),o),{}),[e]);return!t&&e.length===0?null:a.jsxs("section",{className:"bg-bg-card backdrop-blur-xl border border-white/10 rounded-2xl p-6 transition-all hover:border-white/20",children:[a.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center gap-3 text-text-primary font-display",children:[a.jsx("div",{className:"w-1 h-5 bg-text-secondary rounded-full"}),a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M4 11a9 9 0 0 1 9 9"}),a.jsx("path",{d:"M4 4a16 16 0 0 1 16 16"}),a.jsx("circle",{cx:"5",cy:"19",r:"1"})]}),"Data Feeds",a.jsx("button",{onClick:()=>r(),disabled:t,className:"ml-auto flex items-center gap-2 px-3 py-1.5 rounded-lg bg-white/5 hover:bg-white/10 text-xs font-medium text-text-secondary hover:text-text-primary transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:t?"Refreshing...":"Regenerate"})]}),a.jsx("div",{className:"space-y-8",children:Object.entries(s).map(([o,c])=>a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xs uppercase tracking-[0.2em] text-text-secondary mb-4 flex items-center gap-2",children:[a.jsxs("span",{className:"w-4 h-4",children:[o==="World"&&"",o==="Business"&&"",o==="Technology"&&"",o==="Health"&&"",o==="Science"&&"",o==="Geopolitical"&&"",o==="Local"&&""]}),o]}),a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3",children:c.map(u=>a.jsx(Uy,{item:u},u.id))})]},o))}),t&&a.jsx("div",{className:"mt-6 flex items-center justify-center gap-2 text-text-secondary text-xs italic animate-pulse",children:"Ingesting live data streams..."})]})}function ep(e,t){const r=I.useRef(t);I.useEffect(function(){t!==r.current&&e.attributionControl!=null&&(r.current!=null&&e.attributionControl.removeAttribution(r.current),t!=null&&e.attributionControl.addAttribution(t)),r.current=t},[e,t])}const Wy=1;function Vy(e){return Object.freeze({__version:Wy,map:e})}function Hy(e,t){return Object.freeze({...e,...t})}const tp=I.createContext(null),np=tp.Provider;function rp(){const e=I.useContext(tp);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function Gy(e){function t(r,s){const{instance:o,context:c}=e(r).current;return I.useImperativeHandle(s,()=>o),r.children==null?null:Qs.createElement(np,{value:c},r.children)}return I.forwardRef(t)}function $y(e){function t(r,s){const[o,c]=I.useState(!1),{instance:u}=e(r,c).current;I.useImperativeHandle(s,()=>u),I.useEffect(function(){o&&u.update()},[u,o,r.children]);const f=u._contentNode;return f?Uo.createPortal(r.children,f):null}return I.forwardRef(t)}function Jy(e){function t(r,s){const{instance:o}=e(r).current;return I.useImperativeHandle(s,()=>o),null}return I.forwardRef(t)}function ip(e,t){const r=I.useRef();I.useEffect(function(){return t!=null&&e.instance.on(t),r.current=t,function(){r.current!=null&&e.instance.off(r.current),r.current=null}},[e,t])}function Yc(e,t){const r=e.pane??t.pane;return r?{...e,pane:r}:e}function qy(e,t){return function(s,o){const c=rp(),u=e(Yc(s,c),c);return ep(c.map,s.attribution),ip(u.current,s.eventHandlers),t(u.current,c,s,o),u}}var Yl={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(r,s){s(t)})(Tg,function(r){var s="1.9.4";function o(n){var i,l,d,h;for(l=1,d=arguments.length;l<d;l++){h=arguments[l];for(i in h)n[i]=h[i]}return n}var c=Object.create||function(){function n(){}return function(i){return n.prototype=i,new n}}();function u(n,i){var l=Array.prototype.slice;if(n.bind)return n.bind.apply(n,l.call(arguments,1));var d=l.call(arguments,2);return function(){return n.apply(i,d.length?d.concat(l.call(arguments)):arguments)}}var f=0;function m(n){return"_leaflet_id"in n||(n._leaflet_id=++f),n._leaflet_id}function g(n,i,l){var d,h,p,N;return N=function(){d=!1,h&&(p.apply(l,h),h=!1)},p=function(){d?h=arguments:(n.apply(l,arguments),setTimeout(N,i),d=!0)},p}function x(n,i,l){var d=i[1],h=i[0],p=d-h;return n===d&&l?n:((n-h)%p+p)%p+h}function v(){return!1}function y(n,i){if(i===!1)return n;var l=Math.pow(10,i===void 0?6:i);return Math.round(n*l)/l}function j(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}function k(n){return j(n).split(/\s+/)}function C(n,i){Object.prototype.hasOwnProperty.call(n,"options")||(n.options=n.options?c(n.options):{});for(var l in i)n.options[l]=i[l];return n.options}function R(n,i,l){var d=[];for(var h in n)d.push(encodeURIComponent(l?h.toUpperCase():h)+"="+encodeURIComponent(n[h]));return(!i||i.indexOf("?")===-1?"?":"&")+d.join("&")}var b=/\{ *([\w_ -]+) *\}/g;function _(n,i){return n.replace(b,function(l,d){var h=i[d];if(h===void 0)throw new Error("No value provided for variable "+l);return typeof h=="function"&&(h=h(i)),h})}var S=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"};function T(n,i){for(var l=0;l<n.length;l++)if(n[l]===i)return l;return-1}var z="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function F(n){return window["webkit"+n]||window["moz"+n]||window["ms"+n]}var D=0;function U(n){var i=+new Date,l=Math.max(0,16-(i-D));return D=i+l,window.setTimeout(n,l)}var ie=window.requestAnimationFrame||F("RequestAnimationFrame")||U,Y=window.cancelAnimationFrame||F("CancelAnimationFrame")||F("CancelRequestAnimationFrame")||function(n){window.clearTimeout(n)};function le(n,i,l){if(l&&ie===U)n.call(i);else return ie.call(window,u(n,i))}function fe(n){n&&Y.call(window,n)}var we={__proto__:null,extend:o,create:c,bind:u,get lastId(){return f},stamp:m,throttle:g,wrapNum:x,falseFn:v,formatNum:y,trim:j,splitWords:k,setOptions:C,getParamString:R,template:_,isArray:S,indexOf:T,emptyImageUrl:z,requestFn:ie,cancelFn:Y,requestAnimFrame:le,cancelAnimFrame:fe};function M(){}M.extend=function(n){var i=function(){C(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},l=i.__super__=this.prototype,d=c(l);d.constructor=i,i.prototype=d;for(var h in this)Object.prototype.hasOwnProperty.call(this,h)&&h!=="prototype"&&h!=="__super__"&&(i[h]=this[h]);return n.statics&&o(i,n.statics),n.includes&&(G(n.includes),o.apply(null,[d].concat(n.includes))),o(d,n),delete d.statics,delete d.includes,d.options&&(d.options=l.options?c(l.options):{},o(d.options,n.options)),d._initHooks=[],d.callInitHooks=function(){if(!this._initHooksCalled){l.callInitHooks&&l.callInitHooks.call(this),this._initHooksCalled=!0;for(var p=0,N=d._initHooks.length;p<N;p++)d._initHooks[p].call(this)}},i},M.include=function(n){var i=this.prototype.options;return o(this.prototype,n),n.options&&(this.prototype.options=i,this.mergeOptions(n.options)),this},M.mergeOptions=function(n){return o(this.prototype.options,n),this},M.addInitHook=function(n){var i=Array.prototype.slice.call(arguments,1),l=typeof n=="function"?n:function(){this[n].apply(this,i)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(l),this};function G(n){if(!(typeof L>"u"||!L||!L.Mixin)){n=S(n)?n:[n];for(var i=0;i<n.length;i++)n[i]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Z={on:function(n,i,l){if(typeof n=="object")for(var d in n)this._on(d,n[d],i);else{n=k(n);for(var h=0,p=n.length;h<p;h++)this._on(n[h],i,l)}return this},off:function(n,i,l){if(!arguments.length)delete this._events;else if(typeof n=="object")for(var d in n)this._off(d,n[d],i);else{n=k(n);for(var h=arguments.length===1,p=0,N=n.length;p<N;p++)h?this._off(n[p]):this._off(n[p],i,l)}return this},_on:function(n,i,l,d){if(typeof i!="function"){console.warn("wrong listener type: "+typeof i);return}if(this._listens(n,i,l)===!1){l===this&&(l=void 0);var h={fn:i,ctx:l};d&&(h.once=!0),this._events=this._events||{},this._events[n]=this._events[n]||[],this._events[n].push(h)}},_off:function(n,i,l){var d,h,p;if(this._events&&(d=this._events[n],!!d)){if(arguments.length===1){if(this._firingCount)for(h=0,p=d.length;h<p;h++)d[h].fn=v;delete this._events[n];return}if(typeof i!="function"){console.warn("wrong listener type: "+typeof i);return}var N=this._listens(n,i,l);if(N!==!1){var E=d[N];this._firingCount&&(E.fn=v,this._events[n]=d=d.slice()),d.splice(N,1)}}},fire:function(n,i,l){if(!this.listens(n,l))return this;var d=o({},i,{type:n,target:this,sourceTarget:i&&i.sourceTarget||this});if(this._events){var h=this._events[n];if(h){this._firingCount=this._firingCount+1||1;for(var p=0,N=h.length;p<N;p++){var E=h[p],A=E.fn;E.once&&this.off(n,A,E.ctx),A.call(E.ctx||this,d)}this._firingCount--}}return l&&this._propagateEvent(d),this},listens:function(n,i,l,d){typeof n!="string"&&console.warn('"string" type argument expected');var h=i;typeof i!="function"&&(d=!!i,h=void 0,l=void 0);var p=this._events&&this._events[n];if(p&&p.length&&this._listens(n,h,l)!==!1)return!0;if(d){for(var N in this._eventParents)if(this._eventParents[N].listens(n,i,l,d))return!0}return!1},_listens:function(n,i,l){if(!this._events)return!1;var d=this._events[n]||[];if(!i)return!!d.length;l===this&&(l=void 0);for(var h=0,p=d.length;h<p;h++)if(d[h].fn===i&&d[h].ctx===l)return h;return!1},once:function(n,i,l){if(typeof n=="object")for(var d in n)this._on(d,n[d],i,!0);else{n=k(n);for(var h=0,p=n.length;h<p;h++)this._on(n[h],i,l,!0)}return this},addEventParent:function(n){return this._eventParents=this._eventParents||{},this._eventParents[m(n)]=n,this},removeEventParent:function(n){return this._eventParents&&delete this._eventParents[m(n)],this},_propagateEvent:function(n){for(var i in this._eventParents)this._eventParents[i].fire(n.type,o({layer:n.target,propagatedFrom:n.target},n),!0)}};Z.addEventListener=Z.on,Z.removeEventListener=Z.clearAllEventListeners=Z.off,Z.addOneTimeEventListener=Z.once,Z.fireEvent=Z.fire,Z.hasEventListeners=Z.listens;var ee=M.extend(Z);function O(n,i,l){this.x=l?Math.round(n):n,this.y=l?Math.round(i):i}var V=Math.trunc||function(n){return n>0?Math.floor(n):Math.ceil(n)};O.prototype={clone:function(){return new O(this.x,this.y)},add:function(n){return this.clone()._add(P(n))},_add:function(n){return this.x+=n.x,this.y+=n.y,this},subtract:function(n){return this.clone()._subtract(P(n))},_subtract:function(n){return this.x-=n.x,this.y-=n.y,this},divideBy:function(n){return this.clone()._divideBy(n)},_divideBy:function(n){return this.x/=n,this.y/=n,this},multiplyBy:function(n){return this.clone()._multiplyBy(n)},_multiplyBy:function(n){return this.x*=n,this.y*=n,this},scaleBy:function(n){return new O(this.x*n.x,this.y*n.y)},unscaleBy:function(n){return new O(this.x/n.x,this.y/n.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=V(this.x),this.y=V(this.y),this},distanceTo:function(n){n=P(n);var i=n.x-this.x,l=n.y-this.y;return Math.sqrt(i*i+l*l)},equals:function(n){return n=P(n),n.x===this.x&&n.y===this.y},contains:function(n){return n=P(n),Math.abs(n.x)<=Math.abs(this.x)&&Math.abs(n.y)<=Math.abs(this.y)},toString:function(){return"Point("+y(this.x)+", "+y(this.y)+")"}};function P(n,i,l){return n instanceof O?n:S(n)?new O(n[0],n[1]):n==null?n:typeof n=="object"&&"x"in n&&"y"in n?new O(n.x,n.y):new O(n,i,l)}function H(n,i){if(n)for(var l=i?[n,i]:n,d=0,h=l.length;d<h;d++)this.extend(l[d])}H.prototype={extend:function(n){var i,l;if(!n)return this;if(n instanceof O||typeof n[0]=="number"||"x"in n)i=l=P(n);else if(n=ne(n),i=n.min,l=n.max,!i||!l)return this;return!this.min&&!this.max?(this.min=i.clone(),this.max=l.clone()):(this.min.x=Math.min(i.x,this.min.x),this.max.x=Math.max(l.x,this.max.x),this.min.y=Math.min(i.y,this.min.y),this.max.y=Math.max(l.y,this.max.y)),this},getCenter:function(n){return P((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,n)},getBottomLeft:function(){return P(this.min.x,this.max.y)},getTopRight:function(){return P(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(n){var i,l;return typeof n[0]=="number"||n instanceof O?n=P(n):n=ne(n),n instanceof H?(i=n.min,l=n.max):i=l=n,i.x>=this.min.x&&l.x<=this.max.x&&i.y>=this.min.y&&l.y<=this.max.y},intersects:function(n){n=ne(n);var i=this.min,l=this.max,d=n.min,h=n.max,p=h.x>=i.x&&d.x<=l.x,N=h.y>=i.y&&d.y<=l.y;return p&&N},overlaps:function(n){n=ne(n);var i=this.min,l=this.max,d=n.min,h=n.max,p=h.x>i.x&&d.x<l.x,N=h.y>i.y&&d.y<l.y;return p&&N},isValid:function(){return!!(this.min&&this.max)},pad:function(n){var i=this.min,l=this.max,d=Math.abs(i.x-l.x)*n,h=Math.abs(i.y-l.y)*n;return ne(P(i.x-d,i.y-h),P(l.x+d,l.y+h))},equals:function(n){return n?(n=ne(n),this.min.equals(n.getTopLeft())&&this.max.equals(n.getBottomRight())):!1}};function ne(n,i){return!n||n instanceof H?n:new H(n,i)}function Q(n,i){if(n)for(var l=i?[n,i]:n,d=0,h=l.length;d<h;d++)this.extend(l[d])}Q.prototype={extend:function(n){var i=this._southWest,l=this._northEast,d,h;if(n instanceof J)d=n,h=n;else if(n instanceof Q){if(d=n._southWest,h=n._northEast,!d||!h)return this}else return n?this.extend(K(n)||re(n)):this;return!i&&!l?(this._southWest=new J(d.lat,d.lng),this._northEast=new J(h.lat,h.lng)):(i.lat=Math.min(d.lat,i.lat),i.lng=Math.min(d.lng,i.lng),l.lat=Math.max(h.lat,l.lat),l.lng=Math.max(h.lng,l.lng)),this},pad:function(n){var i=this._southWest,l=this._northEast,d=Math.abs(i.lat-l.lat)*n,h=Math.abs(i.lng-l.lng)*n;return new Q(new J(i.lat-d,i.lng-h),new J(l.lat+d,l.lng+h))},getCenter:function(){return new J((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new J(this.getNorth(),this.getWest())},getSouthEast:function(){return new J(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(n){typeof n[0]=="number"||n instanceof J||"lat"in n?n=K(n):n=re(n);var i=this._southWest,l=this._northEast,d,h;return n instanceof Q?(d=n.getSouthWest(),h=n.getNorthEast()):d=h=n,d.lat>=i.lat&&h.lat<=l.lat&&d.lng>=i.lng&&h.lng<=l.lng},intersects:function(n){n=re(n);var i=this._southWest,l=this._northEast,d=n.getSouthWest(),h=n.getNorthEast(),p=h.lat>=i.lat&&d.lat<=l.lat,N=h.lng>=i.lng&&d.lng<=l.lng;return p&&N},overlaps:function(n){n=re(n);var i=this._southWest,l=this._northEast,d=n.getSouthWest(),h=n.getNorthEast(),p=h.lat>i.lat&&d.lat<l.lat,N=h.lng>i.lng&&d.lng<l.lng;return p&&N},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(n,i){return n?(n=re(n),this._southWest.equals(n.getSouthWest(),i)&&this._northEast.equals(n.getNorthEast(),i)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function re(n,i){return n instanceof Q?n:new Q(n,i)}function J(n,i,l){if(isNaN(n)||isNaN(i))throw new Error("Invalid LatLng object: ("+n+", "+i+")");this.lat=+n,this.lng=+i,l!==void 0&&(this.alt=+l)}J.prototype={equals:function(n,i){if(!n)return!1;n=K(n);var l=Math.max(Math.abs(this.lat-n.lat),Math.abs(this.lng-n.lng));return l<=(i===void 0?1e-9:i)},toString:function(n){return"LatLng("+y(this.lat,n)+", "+y(this.lng,n)+")"},distanceTo:function(n){return X.distance(this,K(n))},wrap:function(){return X.wrapLatLng(this)},toBounds:function(n){var i=180*n/40075017,l=i/Math.cos(Math.PI/180*this.lat);return re([this.lat-i,this.lng-l],[this.lat+i,this.lng+l])},clone:function(){return new J(this.lat,this.lng,this.alt)}};function K(n,i,l){return n instanceof J?n:S(n)&&typeof n[0]!="object"?n.length===3?new J(n[0],n[1],n[2]):n.length===2?new J(n[0],n[1]):null:n==null?n:typeof n=="object"&&"lat"in n?new J(n.lat,"lng"in n?n.lng:n.lon,n.alt):i===void 0?null:new J(n,i,l)}var Ee={latLngToPoint:function(n,i){var l=this.projection.project(n),d=this.scale(i);return this.transformation._transform(l,d)},pointToLatLng:function(n,i){var l=this.scale(i),d=this.transformation.untransform(n,l);return this.projection.unproject(d)},project:function(n){return this.projection.project(n)},unproject:function(n){return this.projection.unproject(n)},scale:function(n){return 256*Math.pow(2,n)},zoom:function(n){return Math.log(n/256)/Math.LN2},getProjectedBounds:function(n){if(this.infinite)return null;var i=this.projection.bounds,l=this.scale(n),d=this.transformation.transform(i.min,l),h=this.transformation.transform(i.max,l);return new H(d,h)},infinite:!1,wrapLatLng:function(n){var i=this.wrapLng?x(n.lng,this.wrapLng,!0):n.lng,l=this.wrapLat?x(n.lat,this.wrapLat,!0):n.lat,d=n.alt;return new J(l,i,d)},wrapLatLngBounds:function(n){var i=n.getCenter(),l=this.wrapLatLng(i),d=i.lat-l.lat,h=i.lng-l.lng;if(d===0&&h===0)return n;var p=n.getSouthWest(),N=n.getNorthEast(),E=new J(p.lat-d,p.lng-h),A=new J(N.lat-d,N.lng-h);return new Q(E,A)}},X=o({},Ee,{wrapLng:[-180,180],R:6371e3,distance:function(n,i){var l=Math.PI/180,d=n.lat*l,h=i.lat*l,p=Math.sin((i.lat-n.lat)*l/2),N=Math.sin((i.lng-n.lng)*l/2),E=p*p+Math.cos(d)*Math.cos(h)*N*N,A=2*Math.atan2(Math.sqrt(E),Math.sqrt(1-E));return this.R*A}}),ue=6378137,Be={R:ue,MAX_LATITUDE:85.0511287798,project:function(n){var i=Math.PI/180,l=this.MAX_LATITUDE,d=Math.max(Math.min(l,n.lat),-l),h=Math.sin(d*i);return new O(this.R*n.lng*i,this.R*Math.log((1+h)/(1-h))/2)},unproject:function(n){var i=180/Math.PI;return new J((2*Math.atan(Math.exp(n.y/this.R))-Math.PI/2)*i,n.x*i/this.R)},bounds:function(){var n=ue*Math.PI;return new H([-n,-n],[n,n])}()};function ct(n,i,l,d){if(S(n)){this._a=n[0],this._b=n[1],this._c=n[2],this._d=n[3];return}this._a=n,this._b=i,this._c=l,this._d=d}ct.prototype={transform:function(n,i){return this._transform(n.clone(),i)},_transform:function(n,i){return i=i||1,n.x=i*(this._a*n.x+this._b),n.y=i*(this._c*n.y+this._d),n},untransform:function(n,i){return i=i||1,new O((n.x/i-this._b)/this._a,(n.y/i-this._d)/this._c)}};function Ct(n,i,l,d){return new ct(n,i,l,d)}var In=o({},X,{code:"EPSG:3857",projection:Be,transformation:function(){var n=.5/(Math.PI*Be.R);return Ct(n,.5,-n,.5)}()}),un=o({},In,{code:"EPSG:900913"});function ir(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function es(n,i){var l="",d,h,p,N,E,A;for(d=0,p=n.length;d<p;d++){for(E=n[d],h=0,N=E.length;h<N;h++)A=E[h],l+=(h?"L":"M")+A.x+" "+A.y;l+=i?te.svg?"z":"x":""}return l||"M0 0"}var Jo=document.documentElement.style,ts="ActiveXObject"in window,ap=ts&&!document.addEventListener,eu="msLaunchUri"in navigator&&!("documentMode"in document),qo=Dt("webkit"),tu=Dt("android"),nu=Dt("android 2")||Dt("android 3"),lp=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),cp=tu&&Dt("Google")&&lp<537&&!("AudioNode"in window),Yo=!!window.opera,ru=!eu&&Dt("chrome"),iu=Dt("gecko")&&!qo&&!Yo&&!ts,up=!ru&&Dt("safari"),su=Dt("phantom"),ou="OTransition"in Jo,dp=navigator.platform.indexOf("Win")===0,au=ts&&"transition"in Jo,Ko="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!nu,lu="MozPerspective"in Jo,hp=!window.L_DISABLE_3D&&(au||Ko||lu)&&!ou&&!su,$r=typeof orientation<"u"||Dt("mobile"),fp=$r&&qo,mp=$r&&Ko,cu=!window.PointerEvent&&window.MSPointerEvent,uu=!!(window.PointerEvent||cu),du="ontouchstart"in window||!!window.TouchEvent,pp=!window.L_NO_TOUCH&&(du||uu),gp=$r&&Yo,xp=$r&&iu,vp=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,yp=function(){var n=!1;try{var i=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("testPassiveEventSupport",v,i),window.removeEventListener("testPassiveEventSupport",v,i)}catch{}return n}(),_p=function(){return!!document.createElement("canvas").getContext}(),Qo=!!(document.createElementNS&&ir("svg").createSVGRect),wp=!!Qo&&function(){var n=document.createElement("div");return n.innerHTML="<svg/>",(n.firstChild&&n.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),bp=!Qo&&function(){try{var n=document.createElement("div");n.innerHTML='<v:shape adj="1"/>';var i=n.firstChild;return i.style.behavior="url(#default#VML)",i&&typeof i.adj=="object"}catch{return!1}}(),Sp=navigator.platform.indexOf("Mac")===0,Np=navigator.platform.indexOf("Linux")===0;function Dt(n){return navigator.userAgent.toLowerCase().indexOf(n)>=0}var te={ie:ts,ielt9:ap,edge:eu,webkit:qo,android:tu,android23:nu,androidStock:cp,opera:Yo,chrome:ru,gecko:iu,safari:up,phantom:su,opera12:ou,win:dp,ie3d:au,webkit3d:Ko,gecko3d:lu,any3d:hp,mobile:$r,mobileWebkit:fp,mobileWebkit3d:mp,msPointer:cu,pointer:uu,touch:pp,touchNative:du,mobileOpera:gp,mobileGecko:xp,retina:vp,passiveEvents:yp,canvas:_p,svg:Qo,vml:bp,inlineSvg:wp,mac:Sp,linux:Np},hu=te.msPointer?"MSPointerDown":"pointerdown",fu=te.msPointer?"MSPointerMove":"pointermove",mu=te.msPointer?"MSPointerUp":"pointerup",pu=te.msPointer?"MSPointerCancel":"pointercancel",Xo={touchstart:hu,touchmove:fu,touchend:mu,touchcancel:pu},gu={touchstart:Tp,touchmove:ns,touchend:ns,touchcancel:ns},sr={},xu=!1;function jp(n,i,l){return i==="touchstart"&&Ep(),gu[i]?(l=gu[i].bind(this,l),n.addEventListener(Xo[i],l,!1),l):(console.warn("wrong event specified:",i),v)}function kp(n,i,l){if(!Xo[i]){console.warn("wrong event specified:",i);return}n.removeEventListener(Xo[i],l,!1)}function Cp(n){sr[n.pointerId]=n}function Pp(n){sr[n.pointerId]&&(sr[n.pointerId]=n)}function vu(n){delete sr[n.pointerId]}function Ep(){xu||(document.addEventListener(hu,Cp,!0),document.addEventListener(fu,Pp,!0),document.addEventListener(mu,vu,!0),document.addEventListener(pu,vu,!0),xu=!0)}function ns(n,i){if(i.pointerType!==(i.MSPOINTER_TYPE_MOUSE||"mouse")){i.touches=[];for(var l in sr)i.touches.push(sr[l]);i.changedTouches=[i],n(i)}}function Tp(n,i){i.MSPOINTER_TYPE_TOUCH&&i.pointerType===i.MSPOINTER_TYPE_TOUCH&&We(i),ns(n,i)}function Lp(n){var i={},l,d;for(d in n)l=n[d],i[d]=l&&l.bind?l.bind(n):l;return n=i,i.type="dblclick",i.detail=2,i.isTrusted=!1,i._simulated=!0,i}var Ap=200;function Mp(n,i){n.addEventListener("dblclick",i);var l=0,d;function h(p){if(p.detail!==1){d=p.detail;return}if(!(p.pointerType==="mouse"||p.sourceCapabilities&&!p.sourceCapabilities.firesTouchEvents)){var N=Su(p);if(!(N.some(function(A){return A instanceof HTMLLabelElement&&A.attributes.for})&&!N.some(function(A){return A instanceof HTMLInputElement||A instanceof HTMLSelectElement}))){var E=Date.now();E-l<=Ap?(d++,d===2&&i(Lp(p))):d=1,l=E}}}return n.addEventListener("click",h),{dblclick:i,simDblclick:h}}function Op(n,i){n.removeEventListener("dblclick",i.dblclick),n.removeEventListener("click",i.simDblclick)}var ea=ss(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Jr=ss(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),yu=Jr==="webkitTransition"||Jr==="OTransition"?Jr+"End":"transitionend";function _u(n){return typeof n=="string"?document.getElementById(n):n}function qr(n,i){var l=n.style[i]||n.currentStyle&&n.currentStyle[i];if((!l||l==="auto")&&document.defaultView){var d=document.defaultView.getComputedStyle(n,null);l=d?d[i]:null}return l==="auto"?null:l}function xe(n,i,l){var d=document.createElement(n);return d.className=i||"",l&&l.appendChild(d),d}function je(n){var i=n.parentNode;i&&i.removeChild(n)}function rs(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function or(n){var i=n.parentNode;i&&i.lastChild!==n&&i.appendChild(n)}function ar(n){var i=n.parentNode;i&&i.firstChild!==n&&i.insertBefore(n,i.firstChild)}function ta(n,i){if(n.classList!==void 0)return n.classList.contains(i);var l=is(n);return l.length>0&&new RegExp("(^|\\s)"+i+"(\\s|$)").test(l)}function ce(n,i){if(n.classList!==void 0)for(var l=k(i),d=0,h=l.length;d<h;d++)n.classList.add(l[d]);else if(!ta(n,i)){var p=is(n);na(n,(p?p+" ":"")+i)}}function Le(n,i){n.classList!==void 0?n.classList.remove(i):na(n,j((" "+is(n)+" ").replace(" "+i+" "," ")))}function na(n,i){n.className.baseVal===void 0?n.className=i:n.className.baseVal=i}function is(n){return n.correspondingElement&&(n=n.correspondingElement),n.className.baseVal===void 0?n.className:n.className.baseVal}function xt(n,i){"opacity"in n.style?n.style.opacity=i:"filter"in n.style&&Ip(n,i)}function Ip(n,i){var l=!1,d="DXImageTransform.Microsoft.Alpha";try{l=n.filters.item(d)}catch{if(i===1)return}i=Math.round(i*100),l?(l.Enabled=i!==100,l.Opacity=i):n.style.filter+=" progid:"+d+"(opacity="+i+")"}function ss(n){for(var i=document.documentElement.style,l=0;l<n.length;l++)if(n[l]in i)return n[l];return!1}function Rn(n,i,l){var d=i||new O(0,0);n.style[ea]=(te.ie3d?"translate("+d.x+"px,"+d.y+"px)":"translate3d("+d.x+"px,"+d.y+"px,0)")+(l?" scale("+l+")":"")}function Me(n,i){n._leaflet_pos=i,te.any3d?Rn(n,i):(n.style.left=i.x+"px",n.style.top=i.y+"px")}function zn(n){return n._leaflet_pos||new O(0,0)}var Yr,Kr,ra;if("onselectstart"in document)Yr=function(){ae(window,"selectstart",We)},Kr=function(){ye(window,"selectstart",We)};else{var Qr=ss(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Yr=function(){if(Qr){var n=document.documentElement.style;ra=n[Qr],n[Qr]="none"}},Kr=function(){Qr&&(document.documentElement.style[Qr]=ra,ra=void 0)}}function ia(){ae(window,"dragstart",We)}function sa(){ye(window,"dragstart",We)}var os,oa;function aa(n){for(;n.tabIndex===-1;)n=n.parentNode;n.style&&(as(),os=n,oa=n.style.outlineStyle,n.style.outlineStyle="none",ae(window,"keydown",as))}function as(){os&&(os.style.outlineStyle=oa,os=void 0,oa=void 0,ye(window,"keydown",as))}function wu(n){do n=n.parentNode;while((!n.offsetWidth||!n.offsetHeight)&&n!==document.body);return n}function la(n){var i=n.getBoundingClientRect();return{x:i.width/n.offsetWidth||1,y:i.height/n.offsetHeight||1,boundingClientRect:i}}var Rp={__proto__:null,TRANSFORM:ea,TRANSITION:Jr,TRANSITION_END:yu,get:_u,getStyle:qr,create:xe,remove:je,empty:rs,toFront:or,toBack:ar,hasClass:ta,addClass:ce,removeClass:Le,setClass:na,getClass:is,setOpacity:xt,testProp:ss,setTransform:Rn,setPosition:Me,getPosition:zn,get disableTextSelection(){return Yr},get enableTextSelection(){return Kr},disableImageDrag:ia,enableImageDrag:sa,preventOutline:aa,restoreOutline:as,getSizedParentNode:wu,getScale:la};function ae(n,i,l,d){if(i&&typeof i=="object")for(var h in i)ua(n,h,i[h],l);else{i=k(i);for(var p=0,N=i.length;p<N;p++)ua(n,i[p],l,d)}return this}var Bt="_leaflet_events";function ye(n,i,l,d){if(arguments.length===1)bu(n),delete n[Bt];else if(i&&typeof i=="object")for(var h in i)da(n,h,i[h],l);else if(i=k(i),arguments.length===2)bu(n,function(E){return T(i,E)!==-1});else for(var p=0,N=i.length;p<N;p++)da(n,i[p],l,d);return this}function bu(n,i){for(var l in n[Bt]){var d=l.split(/\d/)[0];(!i||i(d))&&da(n,d,null,null,l)}}var ca={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function ua(n,i,l,d){var h=i+m(l)+(d?"_"+m(d):"");if(n[Bt]&&n[Bt][h])return this;var p=function(E){return l.call(d||n,E||window.event)},N=p;!te.touchNative&&te.pointer&&i.indexOf("touch")===0?p=jp(n,i,p):te.touch&&i==="dblclick"?p=Mp(n,p):"addEventListener"in n?i==="touchstart"||i==="touchmove"||i==="wheel"||i==="mousewheel"?n.addEventListener(ca[i]||i,p,te.passiveEvents?{passive:!1}:!1):i==="mouseenter"||i==="mouseleave"?(p=function(E){E=E||window.event,fa(n,E)&&N(E)},n.addEventListener(ca[i],p,!1)):n.addEventListener(i,N,!1):n.attachEvent("on"+i,p),n[Bt]=n[Bt]||{},n[Bt][h]=p}function da(n,i,l,d,h){h=h||i+m(l)+(d?"_"+m(d):"");var p=n[Bt]&&n[Bt][h];if(!p)return this;!te.touchNative&&te.pointer&&i.indexOf("touch")===0?kp(n,i,p):te.touch&&i==="dblclick"?Op(n,p):"removeEventListener"in n?n.removeEventListener(ca[i]||i,p,!1):n.detachEvent("on"+i,p),n[Bt][h]=null}function Dn(n){return n.stopPropagation?n.stopPropagation():n.originalEvent?n.originalEvent._stopped=!0:n.cancelBubble=!0,this}function ha(n){return ua(n,"wheel",Dn),this}function Xr(n){return ae(n,"mousedown touchstart dblclick contextmenu",Dn),n._leaflet_disable_click=!0,this}function We(n){return n.preventDefault?n.preventDefault():n.returnValue=!1,this}function Bn(n){return We(n),Dn(n),this}function Su(n){if(n.composedPath)return n.composedPath();for(var i=[],l=n.target;l;)i.push(l),l=l.parentNode;return i}function Nu(n,i){if(!i)return new O(n.clientX,n.clientY);var l=la(i),d=l.boundingClientRect;return new O((n.clientX-d.left)/l.x-i.clientLeft,(n.clientY-d.top)/l.y-i.clientTop)}var zp=te.linux&&te.chrome?window.devicePixelRatio:te.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ju(n){return te.edge?n.wheelDeltaY/2:n.deltaY&&n.deltaMode===0?-n.deltaY/zp:n.deltaY&&n.deltaMode===1?-n.deltaY*20:n.deltaY&&n.deltaMode===2?-n.deltaY*60:n.deltaX||n.deltaZ?0:n.wheelDelta?(n.wheelDeltaY||n.wheelDelta)/2:n.detail&&Math.abs(n.detail)<32765?-n.detail*20:n.detail?n.detail/-32765*60:0}function fa(n,i){var l=i.relatedTarget;if(!l)return!0;try{for(;l&&l!==n;)l=l.parentNode}catch{return!1}return l!==n}var Dp={__proto__:null,on:ae,off:ye,stopPropagation:Dn,disableScrollPropagation:ha,disableClickPropagation:Xr,preventDefault:We,stop:Bn,getPropagationPath:Su,getMousePosition:Nu,getWheelDelta:ju,isExternalTarget:fa,addListener:ae,removeListener:ye},ku=ee.extend({run:function(n,i,l,d){this.stop(),this._el=n,this._inProgress=!0,this._duration=l||.25,this._easeOutPower=1/Math.max(d||.5,.2),this._startPos=zn(n),this._offset=i.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=le(this._animate,this),this._step()},_step:function(n){var i=+new Date-this._startTime,l=this._duration*1e3;i<l?this._runFrame(this._easeOut(i/l),n):(this._runFrame(1),this._complete())},_runFrame:function(n,i){var l=this._startPos.add(this._offset.multiplyBy(n));i&&l._round(),Me(this._el,l),this.fire("step")},_complete:function(){fe(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(n){return 1-Math.pow(1-n,this._easeOutPower)}}),me=ee.extend({options:{crs:In,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(n,i){i=C(this,i),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(n),this._initLayout(),this._onResize=u(this._onResize,this),this._initEvents(),i.maxBounds&&this.setMaxBounds(i.maxBounds),i.zoom!==void 0&&(this._zoom=this._limitZoom(i.zoom)),i.center&&i.zoom!==void 0&&this.setView(K(i.center),i.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Jr&&te.any3d&&!te.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ae(this._proxy,yu,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(n,i,l){if(i=i===void 0?this._zoom:this._limitZoom(i),n=this._limitCenter(K(n),i,this.options.maxBounds),l=l||{},this._stop(),this._loaded&&!l.reset&&l!==!0){l.animate!==void 0&&(l.zoom=o({animate:l.animate},l.zoom),l.pan=o({animate:l.animate,duration:l.duration},l.pan));var d=this._zoom!==i?this._tryAnimatedZoom&&this._tryAnimatedZoom(n,i,l.zoom):this._tryAnimatedPan(n,l.pan);if(d)return clearTimeout(this._sizeTimer),this}return this._resetView(n,i,l.pan&&l.pan.noMoveStart),this},setZoom:function(n,i){return this._loaded?this.setView(this.getCenter(),n,{zoom:i}):(this._zoom=n,this)},zoomIn:function(n,i){return n=n||(te.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+n,i)},zoomOut:function(n,i){return n=n||(te.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-n,i)},setZoomAround:function(n,i,l){var d=this.getZoomScale(i),h=this.getSize().divideBy(2),p=n instanceof O?n:this.latLngToContainerPoint(n),N=p.subtract(h).multiplyBy(1-1/d),E=this.containerPointToLatLng(h.add(N));return this.setView(E,i,{zoom:l})},_getBoundsCenterZoom:function(n,i){i=i||{},n=n.getBounds?n.getBounds():re(n);var l=P(i.paddingTopLeft||i.padding||[0,0]),d=P(i.paddingBottomRight||i.padding||[0,0]),h=this.getBoundsZoom(n,!1,l.add(d));if(h=typeof i.maxZoom=="number"?Math.min(i.maxZoom,h):h,h===1/0)return{center:n.getCenter(),zoom:h};var p=d.subtract(l).divideBy(2),N=this.project(n.getSouthWest(),h),E=this.project(n.getNorthEast(),h),A=this.unproject(N.add(E).divideBy(2).add(p),h);return{center:A,zoom:h}},fitBounds:function(n,i){if(n=re(n),!n.isValid())throw new Error("Bounds are not valid.");var l=this._getBoundsCenterZoom(n,i);return this.setView(l.center,l.zoom,i)},fitWorld:function(n){return this.fitBounds([[-90,-180],[90,180]],n)},panTo:function(n,i){return this.setView(n,this._zoom,{pan:i})},panBy:function(n,i){if(n=P(n).round(),i=i||{},!n.x&&!n.y)return this.fire("moveend");if(i.animate!==!0&&!this.getSize().contains(n))return this._resetView(this.unproject(this.project(this.getCenter()).add(n)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ku,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),i.noMoveStart||this.fire("movestart"),i.animate!==!1){ce(this._mapPane,"leaflet-pan-anim");var l=this._getMapPanePos().subtract(n).round();this._panAnim.run(this._mapPane,l,i.duration||.25,i.easeLinearity)}else this._rawPanBy(n),this.fire("move").fire("moveend");return this},flyTo:function(n,i,l){if(l=l||{},l.animate===!1||!te.any3d)return this.setView(n,i,l);this._stop();var d=this.project(this.getCenter()),h=this.project(n),p=this.getSize(),N=this._zoom;n=K(n),i=i===void 0?N:i;var E=Math.max(p.x,p.y),A=E*this.getZoomScale(N,i),B=h.distanceTo(d)||1,$=1.42,se=$*$;function de(Oe){var ys=Oe?-1:1,kg=Oe?A:E,Cg=A*A-E*E+ys*se*se*B*B,Pg=2*kg*se*B,Na=Cg/Pg,od=Math.sqrt(Na*Na+1)-Na,Eg=od<1e-9?-18:Math.log(od);return Eg}function Ke(Oe){return(Math.exp(Oe)-Math.exp(-Oe))/2}function Fe(Oe){return(Math.exp(Oe)+Math.exp(-Oe))/2}function yt(Oe){return Ke(Oe)/Fe(Oe)}var nt=de(0);function fr(Oe){return E*(Fe(nt)/Fe(nt+$*Oe))}function bg(Oe){return E*(Fe(nt)*yt(nt+$*Oe)-Ke(nt))/se}function Sg(Oe){return 1-Math.pow(1-Oe,1.5)}var Ng=Date.now(),id=(de(1)-nt)/$,jg=l.duration?1e3*l.duration:1e3*id*.8;function sd(){var Oe=(Date.now()-Ng)/jg,ys=Sg(Oe)*id;Oe<=1?(this._flyToFrame=le(sd,this),this._move(this.unproject(d.add(h.subtract(d).multiplyBy(bg(ys)/B)),N),this.getScaleZoom(E/fr(ys),N),{flyTo:!0})):this._move(n,i)._moveEnd(!0)}return this._moveStart(!0,l.noMoveStart),sd.call(this),this},flyToBounds:function(n,i){var l=this._getBoundsCenterZoom(n,i);return this.flyTo(l.center,l.zoom,i)},setMaxBounds:function(n){return n=re(n),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),n.isValid()?(this.options.maxBounds=n,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(n){var i=this.options.minZoom;return this.options.minZoom=n,this._loaded&&i!==n&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(n):this},setMaxZoom:function(n){var i=this.options.maxZoom;return this.options.maxZoom=n,this._loaded&&i!==n&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(n):this},panInsideBounds:function(n,i){this._enforcingBounds=!0;var l=this.getCenter(),d=this._limitCenter(l,this._zoom,re(n));return l.equals(d)||this.panTo(d,i),this._enforcingBounds=!1,this},panInside:function(n,i){i=i||{};var l=P(i.paddingTopLeft||i.padding||[0,0]),d=P(i.paddingBottomRight||i.padding||[0,0]),h=this.project(this.getCenter()),p=this.project(n),N=this.getPixelBounds(),E=ne([N.min.add(l),N.max.subtract(d)]),A=E.getSize();if(!E.contains(p)){this._enforcingBounds=!0;var B=p.subtract(E.getCenter()),$=E.extend(p).getSize().subtract(A);h.x+=B.x<0?-$.x:$.x,h.y+=B.y<0?-$.y:$.y,this.panTo(this.unproject(h),i),this._enforcingBounds=!1}return this},invalidateSize:function(n){if(!this._loaded)return this;n=o({animate:!1,pan:!0},n===!0?{animate:!0}:n);var i=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var l=this.getSize(),d=i.divideBy(2).round(),h=l.divideBy(2).round(),p=d.subtract(h);return!p.x&&!p.y?this:(n.animate&&n.pan?this.panBy(p):(n.pan&&this._rawPanBy(p),this.fire("move"),n.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(u(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:i,newSize:l}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(n){if(n=this._locateOptions=o({timeout:1e4,watch:!1},n),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var i=u(this._handleGeolocationResponse,this),l=u(this._handleGeolocationError,this);return n.watch?this._locationWatchId=navigator.geolocation.watchPosition(i,l,n):navigator.geolocation.getCurrentPosition(i,l,n),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(n){if(this._container._leaflet_id){var i=n.code,l=n.message||(i===1?"permission denied":i===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:i,message:"Geolocation error: "+l+"."})}},_handleGeolocationResponse:function(n){if(this._container._leaflet_id){var i=n.coords.latitude,l=n.coords.longitude,d=new J(i,l),h=d.toBounds(n.coords.accuracy*2),p=this._locateOptions;if(p.setView){var N=this.getBoundsZoom(h);this.setView(d,p.maxZoom?Math.min(N,p.maxZoom):N)}var E={latlng:d,bounds:h,timestamp:n.timestamp};for(var A in n.coords)typeof n.coords[A]=="number"&&(E[A]=n.coords[A]);this.fire("locationfound",E)}},addHandler:function(n,i){if(!i)return this;var l=this[n]=new i(this);return this._handlers.push(l),this.options[n]&&l.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),je(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(fe(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var n;for(n in this._layers)this._layers[n].remove();for(n in this._panes)je(this._panes[n]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(n,i){var l="leaflet-pane"+(n?" leaflet-"+n.replace("Pane","")+"-pane":""),d=xe("div",l,i||this._mapPane);return n&&(this._panes[n]=d),d},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var n=this.getPixelBounds(),i=this.unproject(n.getBottomLeft()),l=this.unproject(n.getTopRight());return new Q(i,l)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(n,i,l){n=re(n),l=P(l||[0,0]);var d=this.getZoom()||0,h=this.getMinZoom(),p=this.getMaxZoom(),N=n.getNorthWest(),E=n.getSouthEast(),A=this.getSize().subtract(l),B=ne(this.project(E,d),this.project(N,d)).getSize(),$=te.any3d?this.options.zoomSnap:1,se=A.x/B.x,de=A.y/B.y,Ke=i?Math.max(se,de):Math.min(se,de);return d=this.getScaleZoom(Ke,d),$&&(d=Math.round(d/($/100))*($/100),d=i?Math.ceil(d/$)*$:Math.floor(d/$)*$),Math.max(h,Math.min(p,d))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new O(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(n,i){var l=this._getTopLeftPoint(n,i);return new H(l,l.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(n){return this.options.crs.getProjectedBounds(n===void 0?this.getZoom():n)},getPane:function(n){return typeof n=="string"?this._panes[n]:n},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(n,i){var l=this.options.crs;return i=i===void 0?this._zoom:i,l.scale(n)/l.scale(i)},getScaleZoom:function(n,i){var l=this.options.crs;i=i===void 0?this._zoom:i;var d=l.zoom(n*l.scale(i));return isNaN(d)?1/0:d},project:function(n,i){return i=i===void 0?this._zoom:i,this.options.crs.latLngToPoint(K(n),i)},unproject:function(n,i){return i=i===void 0?this._zoom:i,this.options.crs.pointToLatLng(P(n),i)},layerPointToLatLng:function(n){var i=P(n).add(this.getPixelOrigin());return this.unproject(i)},latLngToLayerPoint:function(n){var i=this.project(K(n))._round();return i._subtract(this.getPixelOrigin())},wrapLatLng:function(n){return this.options.crs.wrapLatLng(K(n))},wrapLatLngBounds:function(n){return this.options.crs.wrapLatLngBounds(re(n))},distance:function(n,i){return this.options.crs.distance(K(n),K(i))},containerPointToLayerPoint:function(n){return P(n).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(n){return P(n).add(this._getMapPanePos())},containerPointToLatLng:function(n){var i=this.containerPointToLayerPoint(P(n));return this.layerPointToLatLng(i)},latLngToContainerPoint:function(n){return this.layerPointToContainerPoint(this.latLngToLayerPoint(K(n)))},mouseEventToContainerPoint:function(n){return Nu(n,this._container)},mouseEventToLayerPoint:function(n){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(n))},mouseEventToLatLng:function(n){return this.layerPointToLatLng(this.mouseEventToLayerPoint(n))},_initContainer:function(n){var i=this._container=_u(n);if(i){if(i._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ae(i,"scroll",this._onScroll,this),this._containerId=m(i)},_initLayout:function(){var n=this._container;this._fadeAnimated=this.options.fadeAnimation&&te.any3d,ce(n,"leaflet-container"+(te.touch?" leaflet-touch":"")+(te.retina?" leaflet-retina":"")+(te.ielt9?" leaflet-oldie":"")+(te.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var i=qr(n,"position");i!=="absolute"&&i!=="relative"&&i!=="fixed"&&i!=="sticky"&&(n.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var n=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Me(this._mapPane,new O(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ce(n.markerPane,"leaflet-zoom-hide"),ce(n.shadowPane,"leaflet-zoom-hide"))},_resetView:function(n,i,l){Me(this._mapPane,new O(0,0));var d=!this._loaded;this._loaded=!0,i=this._limitZoom(i),this.fire("viewprereset");var h=this._zoom!==i;this._moveStart(h,l)._move(n,i)._moveEnd(h),this.fire("viewreset"),d&&this.fire("load")},_moveStart:function(n,i){return n&&this.fire("zoomstart"),i||this.fire("movestart"),this},_move:function(n,i,l,d){i===void 0&&(i=this._zoom);var h=this._zoom!==i;return this._zoom=i,this._lastCenter=n,this._pixelOrigin=this._getNewPixelOrigin(n),d?l&&l.pinch&&this.fire("zoom",l):((h||l&&l.pinch)&&this.fire("zoom",l),this.fire("move",l)),this},_moveEnd:function(n){return n&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return fe(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(n){Me(this._mapPane,this._getMapPanePos().subtract(n))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(n){this._targets={},this._targets[m(this._container)]=this;var i=n?ye:ae;i(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&i(window,"resize",this._onResize,this),te.any3d&&this.options.transform3DLimit&&(n?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){fe(this._resizeRequest),this._resizeRequest=le(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var n=this._getMapPanePos();Math.max(Math.abs(n.x),Math.abs(n.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(n,i){for(var l=[],d,h=i==="mouseout"||i==="mouseover",p=n.target||n.srcElement,N=!1;p;){if(d=this._targets[m(p)],d&&(i==="click"||i==="preclick")&&this._draggableMoved(d)){N=!0;break}if(d&&d.listens(i,!0)&&(h&&!fa(p,n)||(l.push(d),h))||p===this._container)break;p=p.parentNode}return!l.length&&!N&&!h&&this.listens(i,!0)&&(l=[this]),l},_isClickDisabled:function(n){for(;n&&n!==this._container;){if(n._leaflet_disable_click)return!0;n=n.parentNode}},_handleDOMEvent:function(n){var i=n.target||n.srcElement;if(!(!this._loaded||i._leaflet_disable_events||n.type==="click"&&this._isClickDisabled(i))){var l=n.type;l==="mousedown"&&aa(i),this._fireDOMEvent(n,l)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(n,i,l){if(n.type==="click"){var d=o({},n);d.type="preclick",this._fireDOMEvent(d,d.type,l)}var h=this._findEventTargets(n,i);if(l){for(var p=[],N=0;N<l.length;N++)l[N].listens(i,!0)&&p.push(l[N]);h=p.concat(h)}if(h.length){i==="contextmenu"&&We(n);var E=h[0],A={originalEvent:n};if(n.type!=="keypress"&&n.type!=="keydown"&&n.type!=="keyup"){var B=E.getLatLng&&(!E._radius||E._radius<=10);A.containerPoint=B?this.latLngToContainerPoint(E.getLatLng()):this.mouseEventToContainerPoint(n),A.layerPoint=this.containerPointToLayerPoint(A.containerPoint),A.latlng=B?E.getLatLng():this.layerPointToLatLng(A.layerPoint)}for(N=0;N<h.length;N++)if(h[N].fire(i,A,!0),A.originalEvent._stopped||h[N].options.bubblingMouseEvents===!1&&T(this._mouseEvents,i)!==-1)return}},_draggableMoved:function(n){return n=n.dragging&&n.dragging.enabled()?n:this,n.dragging&&n.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var n=0,i=this._handlers.length;n<i;n++)this._handlers[n].disable()},whenReady:function(n,i){return this._loaded?n.call(i||this,{target:this}):this.on("load",n,i),this},_getMapPanePos:function(){return zn(this._mapPane)||new O(0,0)},_moved:function(){var n=this._getMapPanePos();return n&&!n.equals([0,0])},_getTopLeftPoint:function(n,i){var l=n&&i!==void 0?this._getNewPixelOrigin(n,i):this.getPixelOrigin();return l.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(n,i){var l=this.getSize()._divideBy(2);return this.project(n,i)._subtract(l)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(n,i,l){var d=this._getNewPixelOrigin(l,i);return this.project(n,i)._subtract(d)},_latLngBoundsToNewLayerBounds:function(n,i,l){var d=this._getNewPixelOrigin(l,i);return ne([this.project(n.getSouthWest(),i)._subtract(d),this.project(n.getNorthWest(),i)._subtract(d),this.project(n.getSouthEast(),i)._subtract(d),this.project(n.getNorthEast(),i)._subtract(d)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(n){return this.latLngToLayerPoint(n).subtract(this._getCenterLayerPoint())},_limitCenter:function(n,i,l){if(!l)return n;var d=this.project(n,i),h=this.getSize().divideBy(2),p=new H(d.subtract(h),d.add(h)),N=this._getBoundsOffset(p,l,i);return Math.abs(N.x)<=1&&Math.abs(N.y)<=1?n:this.unproject(d.add(N),i)},_limitOffset:function(n,i){if(!i)return n;var l=this.getPixelBounds(),d=new H(l.min.add(n),l.max.add(n));return n.add(this._getBoundsOffset(d,i))},_getBoundsOffset:function(n,i,l){var d=ne(this.project(i.getNorthEast(),l),this.project(i.getSouthWest(),l)),h=d.min.subtract(n.min),p=d.max.subtract(n.max),N=this._rebound(h.x,-p.x),E=this._rebound(h.y,-p.y);return new O(N,E)},_rebound:function(n,i){return n+i>0?Math.round(n-i)/2:Math.max(0,Math.ceil(n))-Math.max(0,Math.floor(i))},_limitZoom:function(n){var i=this.getMinZoom(),l=this.getMaxZoom(),d=te.any3d?this.options.zoomSnap:1;return d&&(n=Math.round(n/d)*d),Math.max(i,Math.min(l,n))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Le(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(n,i){var l=this._getCenterOffset(n)._trunc();return(i&&i.animate)!==!0&&!this.getSize().contains(l)?!1:(this.panBy(l,i),!0)},_createAnimProxy:function(){var n=this._proxy=xe("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(n),this.on("zoomanim",function(i){var l=ea,d=this._proxy.style[l];Rn(this._proxy,this.project(i.center,i.zoom),this.getZoomScale(i.zoom,1)),d===this._proxy.style[l]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){je(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var n=this.getCenter(),i=this.getZoom();Rn(this._proxy,this.project(n,i),this.getZoomScale(i,1))},_catchTransitionEnd:function(n){this._animatingZoom&&n.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(n,i,l){if(this._animatingZoom)return!0;if(l=l||{},!this._zoomAnimated||l.animate===!1||this._nothingToAnimate()||Math.abs(i-this._zoom)>this.options.zoomAnimationThreshold)return!1;var d=this.getZoomScale(i),h=this._getCenterOffset(n)._divideBy(1-1/d);return l.animate!==!0&&!this.getSize().contains(h)?!1:(le(function(){this._moveStart(!0,l.noMoveStart||!1)._animateZoom(n,i,!0)},this),!0)},_animateZoom:function(n,i,l,d){this._mapPane&&(l&&(this._animatingZoom=!0,this._animateToCenter=n,this._animateToZoom=i,ce(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:n,zoom:i,noUpdate:d}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(u(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Le(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Bp(n,i){return new me(n,i)}var Pt=M.extend({options:{position:"topright"},initialize:function(n){C(this,n)},getPosition:function(){return this.options.position},setPosition:function(n){var i=this._map;return i&&i.removeControl(this),this.options.position=n,i&&i.addControl(this),this},getContainer:function(){return this._container},addTo:function(n){this.remove(),this._map=n;var i=this._container=this.onAdd(n),l=this.getPosition(),d=n._controlCorners[l];return ce(i,"leaflet-control"),l.indexOf("bottom")!==-1?d.insertBefore(i,d.firstChild):d.appendChild(i),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(je(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(n){this._map&&n&&n.screenX>0&&n.screenY>0&&this._map.getContainer().focus()}}),ei=function(n){return new Pt(n)};me.include({addControl:function(n){return n.addTo(this),this},removeControl:function(n){return n.remove(),this},_initControlPos:function(){var n=this._controlCorners={},i="leaflet-",l=this._controlContainer=xe("div",i+"control-container",this._container);function d(h,p){var N=i+h+" "+i+p;n[h+p]=xe("div",N,l)}d("top","left"),d("top","right"),d("bottom","left"),d("bottom","right")},_clearControlPos:function(){for(var n in this._controlCorners)je(this._controlCorners[n]);je(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Cu=Pt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(n,i,l,d){return l<d?-1:d<l?1:0}},initialize:function(n,i,l){C(this,l),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var d in n)this._addLayer(n[d],d);for(d in i)this._addLayer(i[d],d,!0)},onAdd:function(n){this._initLayout(),this._update(),this._map=n,n.on("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(n){return Pt.prototype.addTo.call(this,n),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var n=0;n<this._layers.length;n++)this._layers[n].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(n,i){return this._addLayer(n,i),this._map?this._update():this},addOverlay:function(n,i){return this._addLayer(n,i,!0),this._map?this._update():this},removeLayer:function(n){n.off("add remove",this._onLayerChange,this);var i=this._getLayer(m(n));return i&&this._layers.splice(this._layers.indexOf(i),1),this._map?this._update():this},expand:function(){ce(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var n=this._map.getSize().y-(this._container.offsetTop+50);return n<this._section.clientHeight?(ce(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=n+"px"):Le(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Le(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var n="leaflet-control-layers",i=this._container=xe("div",n),l=this.options.collapsed;i.setAttribute("aria-haspopup",!0),Xr(i),ha(i);var d=this._section=xe("section",n+"-list");l&&(this._map.on("click",this.collapse,this),ae(i,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var h=this._layersLink=xe("a",n+"-toggle",i);h.href="#",h.title="Layers",h.setAttribute("role","button"),ae(h,{keydown:function(p){p.keyCode===13&&this._expandSafely()},click:function(p){We(p),this._expandSafely()}},this),l||this.expand(),this._baseLayersList=xe("div",n+"-base",d),this._separator=xe("div",n+"-separator",d),this._overlaysList=xe("div",n+"-overlays",d),i.appendChild(d)},_getLayer:function(n){for(var i=0;i<this._layers.length;i++)if(this._layers[i]&&m(this._layers[i].layer)===n)return this._layers[i]},_addLayer:function(n,i,l){this._map&&n.on("add remove",this._onLayerChange,this),this._layers.push({layer:n,name:i,overlay:l}),this.options.sortLayers&&this._layers.sort(u(function(d,h){return this.options.sortFunction(d.layer,h.layer,d.name,h.name)},this)),this.options.autoZIndex&&n.setZIndex&&(this._lastZIndex++,n.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;rs(this._baseLayersList),rs(this._overlaysList),this._layerControlInputs=[];var n,i,l,d,h=0;for(l=0;l<this._layers.length;l++)d=this._layers[l],this._addItem(d),i=i||d.overlay,n=n||!d.overlay,h+=d.overlay?0:1;return this.options.hideSingleBase&&(n=n&&h>1,this._baseLayersList.style.display=n?"":"none"),this._separator.style.display=i&&n?"":"none",this},_onLayerChange:function(n){this._handlingClick||this._update();var i=this._getLayer(m(n.target)),l=i.overlay?n.type==="add"?"overlayadd":"overlayremove":n.type==="add"?"baselayerchange":null;l&&this._map.fire(l,i)},_createRadioElement:function(n,i){var l='<input type="radio" class="leaflet-control-layers-selector" name="'+n+'"'+(i?' checked="checked"':"")+"/>",d=document.createElement("div");return d.innerHTML=l,d.firstChild},_addItem:function(n){var i=document.createElement("label"),l=this._map.hasLayer(n.layer),d;n.overlay?(d=document.createElement("input"),d.type="checkbox",d.className="leaflet-control-layers-selector",d.defaultChecked=l):d=this._createRadioElement("leaflet-base-layers_"+m(this),l),this._layerControlInputs.push(d),d.layerId=m(n.layer),ae(d,"click",this._onInputClick,this);var h=document.createElement("span");h.innerHTML=" "+n.name;var p=document.createElement("span");i.appendChild(p),p.appendChild(d),p.appendChild(h);var N=n.overlay?this._overlaysList:this._baseLayersList;return N.appendChild(i),this._checkDisabledLayers(),i},_onInputClick:function(){if(!this._preventClick){var n=this._layerControlInputs,i,l,d=[],h=[];this._handlingClick=!0;for(var p=n.length-1;p>=0;p--)i=n[p],l=this._getLayer(i.layerId).layer,i.checked?d.push(l):i.checked||h.push(l);for(p=0;p<h.length;p++)this._map.hasLayer(h[p])&&this._map.removeLayer(h[p]);for(p=0;p<d.length;p++)this._map.hasLayer(d[p])||this._map.addLayer(d[p]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var n=this._layerControlInputs,i,l,d=this._map.getZoom(),h=n.length-1;h>=0;h--)i=n[h],l=this._getLayer(i.layerId).layer,i.disabled=l.options.minZoom!==void 0&&d<l.options.minZoom||l.options.maxZoom!==void 0&&d>l.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var n=this._section;this._preventClick=!0,ae(n,"click",We),this.expand();var i=this;setTimeout(function(){ye(n,"click",We),i._preventClick=!1})}}),Fp=function(n,i,l){return new Cu(n,i,l)},ma=Pt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(n){var i="leaflet-control-zoom",l=xe("div",i+" leaflet-bar"),d=this.options;return this._zoomInButton=this._createButton(d.zoomInText,d.zoomInTitle,i+"-in",l,this._zoomIn),this._zoomOutButton=this._createButton(d.zoomOutText,d.zoomOutTitle,i+"-out",l,this._zoomOut),this._updateDisabled(),n.on("zoomend zoomlevelschange",this._updateDisabled,this),l},onRemove:function(n){n.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(n){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(n.shiftKey?3:1))},_zoomOut:function(n){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(n.shiftKey?3:1))},_createButton:function(n,i,l,d,h){var p=xe("a",l,d);return p.innerHTML=n,p.href="#",p.title=i,p.setAttribute("role","button"),p.setAttribute("aria-label",i),Xr(p),ae(p,"click",Bn),ae(p,"click",h,this),ae(p,"click",this._refocusOnMap,this),p},_updateDisabled:function(){var n=this._map,i="leaflet-disabled";Le(this._zoomInButton,i),Le(this._zoomOutButton,i),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||n._zoom===n.getMinZoom())&&(ce(this._zoomOutButton,i),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||n._zoom===n.getMaxZoom())&&(ce(this._zoomInButton,i),this._zoomInButton.setAttribute("aria-disabled","true"))}});me.mergeOptions({zoomControl:!0}),me.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new ma,this.addControl(this.zoomControl))});var Up=function(n){return new ma(n)},Pu=Pt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(n){var i="leaflet-control-scale",l=xe("div",i),d=this.options;return this._addScales(d,i+"-line",l),n.on(d.updateWhenIdle?"moveend":"move",this._update,this),n.whenReady(this._update,this),l},onRemove:function(n){n.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(n,i,l){n.metric&&(this._mScale=xe("div",i,l)),n.imperial&&(this._iScale=xe("div",i,l))},_update:function(){var n=this._map,i=n.getSize().y/2,l=n.distance(n.containerPointToLatLng([0,i]),n.containerPointToLatLng([this.options.maxWidth,i]));this._updateScales(l)},_updateScales:function(n){this.options.metric&&n&&this._updateMetric(n),this.options.imperial&&n&&this._updateImperial(n)},_updateMetric:function(n){var i=this._getRoundNum(n),l=i<1e3?i+" m":i/1e3+" km";this._updateScale(this._mScale,l,i/n)},_updateImperial:function(n){var i=n*3.2808399,l,d,h;i>5280?(l=i/5280,d=this._getRoundNum(l),this._updateScale(this._iScale,d+" mi",d/l)):(h=this._getRoundNum(i),this._updateScale(this._iScale,h+" ft",h/i))},_updateScale:function(n,i,l){n.style.width=Math.round(this.options.maxWidth*l)+"px",n.innerHTML=i},_getRoundNum:function(n){var i=Math.pow(10,(Math.floor(n)+"").length-1),l=n/i;return l=l>=10?10:l>=5?5:l>=3?3:l>=2?2:1,i*l}}),Zp=function(n){return new Pu(n)},Wp='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',pa=Pt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(te.inlineSvg?Wp+" ":"")+"Leaflet</a>"},initialize:function(n){C(this,n),this._attributions={}},onAdd:function(n){n.attributionControl=this,this._container=xe("div","leaflet-control-attribution"),Xr(this._container);for(var i in n._layers)n._layers[i].getAttribution&&this.addAttribution(n._layers[i].getAttribution());return this._update(),n.on("layeradd",this._addAttribution,this),this._container},onRemove:function(n){n.off("layeradd",this._addAttribution,this)},_addAttribution:function(n){n.layer.getAttribution&&(this.addAttribution(n.layer.getAttribution()),n.layer.once("remove",function(){this.removeAttribution(n.layer.getAttribution())},this))},setPrefix:function(n){return this.options.prefix=n,this._update(),this},addAttribution:function(n){return n?(this._attributions[n]||(this._attributions[n]=0),this._attributions[n]++,this._update(),this):this},removeAttribution:function(n){return n?(this._attributions[n]&&(this._attributions[n]--,this._update()),this):this},_update:function(){if(this._map){var n=[];for(var i in this._attributions)this._attributions[i]&&n.push(i);var l=[];this.options.prefix&&l.push(this.options.prefix),n.length&&l.push(n.join(", ")),this._container.innerHTML=l.join(' <span aria-hidden="true">|</span> ')}}});me.mergeOptions({attributionControl:!0}),me.addInitHook(function(){this.options.attributionControl&&new pa().addTo(this)});var Vp=function(n){return new pa(n)};Pt.Layers=Cu,Pt.Zoom=ma,Pt.Scale=Pu,Pt.Attribution=pa,ei.layers=Fp,ei.zoom=Up,ei.scale=Zp,ei.attribution=Vp;var Ft=M.extend({initialize:function(n){this._map=n},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Ft.addTo=function(n,i){return n.addHandler(i,this),this};var Hp={Events:Z},Eu=te.touch?"touchstart mousedown":"mousedown",dn=ee.extend({options:{clickTolerance:3},initialize:function(n,i,l,d){C(this,d),this._element=n,this._dragStartTarget=i||n,this._preventOutline=l},enable:function(){this._enabled||(ae(this._dragStartTarget,Eu,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(dn._dragging===this&&this.finishDrag(!0),ye(this._dragStartTarget,Eu,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(n){if(this._enabled&&(this._moved=!1,!ta(this._element,"leaflet-zoom-anim"))){if(n.touches&&n.touches.length!==1){dn._dragging===this&&this.finishDrag();return}if(!(dn._dragging||n.shiftKey||n.which!==1&&n.button!==1&&!n.touches)&&(dn._dragging=this,this._preventOutline&&aa(this._element),ia(),Yr(),!this._moving)){this.fire("down");var i=n.touches?n.touches[0]:n,l=wu(this._element);this._startPoint=new O(i.clientX,i.clientY),this._startPos=zn(this._element),this._parentScale=la(l);var d=n.type==="mousedown";ae(document,d?"mousemove":"touchmove",this._onMove,this),ae(document,d?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(n){if(this._enabled){if(n.touches&&n.touches.length>1){this._moved=!0;return}var i=n.touches&&n.touches.length===1?n.touches[0]:n,l=new O(i.clientX,i.clientY)._subtract(this._startPoint);!l.x&&!l.y||Math.abs(l.x)+Math.abs(l.y)<this.options.clickTolerance||(l.x/=this._parentScale.x,l.y/=this._parentScale.y,We(n),this._moved||(this.fire("dragstart"),this._moved=!0,ce(document.body,"leaflet-dragging"),this._lastTarget=n.target||n.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ce(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(l),this._moving=!0,this._lastEvent=n,this._updatePosition())}},_updatePosition:function(){var n={originalEvent:this._lastEvent};this.fire("predrag",n),Me(this._element,this._newPos),this.fire("drag",n)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(n){Le(document.body,"leaflet-dragging"),this._lastTarget&&(Le(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ye(document,"mousemove touchmove",this._onMove,this),ye(document,"mouseup touchend touchcancel",this._onUp,this),sa(),Kr();var i=this._moved&&this._moving;this._moving=!1,dn._dragging=!1,i&&this.fire("dragend",{noInertia:n,distance:this._newPos.distanceTo(this._startPos)})}});function Tu(n,i,l){var d,h=[1,4,2,8],p,N,E,A,B,$,se,de;for(p=0,$=n.length;p<$;p++)n[p]._code=Fn(n[p],i);for(E=0;E<4;E++){for(se=h[E],d=[],p=0,$=n.length,N=$-1;p<$;N=p++)A=n[p],B=n[N],A._code&se?B._code&se||(de=ls(B,A,se,i,l),de._code=Fn(de,i),d.push(de)):(B._code&se&&(de=ls(B,A,se,i,l),de._code=Fn(de,i),d.push(de)),d.push(A));n=d}return n}function Lu(n,i){var l,d,h,p,N,E,A,B,$;if(!n||n.length===0)throw new Error("latlngs not passed");vt(n)||(console.warn("latlngs are not flat! Only the first ring will be used"),n=n[0]);var se=K([0,0]),de=re(n),Ke=de.getNorthWest().distanceTo(de.getSouthWest())*de.getNorthEast().distanceTo(de.getNorthWest());Ke<1700&&(se=ga(n));var Fe=n.length,yt=[];for(l=0;l<Fe;l++){var nt=K(n[l]);yt.push(i.project(K([nt.lat-se.lat,nt.lng-se.lng])))}for(E=A=B=0,l=0,d=Fe-1;l<Fe;d=l++)h=yt[l],p=yt[d],N=h.y*p.x-p.y*h.x,A+=(h.x+p.x)*N,B+=(h.y+p.y)*N,E+=N*3;E===0?$=yt[0]:$=[A/E,B/E];var fr=i.unproject(P($));return K([fr.lat+se.lat,fr.lng+se.lng])}function ga(n){for(var i=0,l=0,d=0,h=0;h<n.length;h++){var p=K(n[h]);i+=p.lat,l+=p.lng,d++}return K([i/d,l/d])}var Gp={__proto__:null,clipPolygon:Tu,polygonCenter:Lu,centroid:ga};function Au(n,i){if(!i||!n.length)return n.slice();var l=i*i;return n=qp(n,l),n=Jp(n,l),n}function Mu(n,i,l){return Math.sqrt(ti(n,i,l,!0))}function $p(n,i,l){return ti(n,i,l)}function Jp(n,i){var l=n.length,d=typeof Uint8Array<"u"?Uint8Array:Array,h=new d(l);h[0]=h[l-1]=1,xa(n,h,i,0,l-1);var p,N=[];for(p=0;p<l;p++)h[p]&&N.push(n[p]);return N}function xa(n,i,l,d,h){var p=0,N,E,A;for(E=d+1;E<=h-1;E++)A=ti(n[E],n[d],n[h],!0),A>p&&(N=E,p=A);p>l&&(i[N]=1,xa(n,i,l,d,N),xa(n,i,l,N,h))}function qp(n,i){for(var l=[n[0]],d=1,h=0,p=n.length;d<p;d++)Yp(n[d],n[h])>i&&(l.push(n[d]),h=d);return h<p-1&&l.push(n[p-1]),l}var Ou;function Iu(n,i,l,d,h){var p=d?Ou:Fn(n,l),N=Fn(i,l),E,A,B;for(Ou=N;;){if(!(p|N))return[n,i];if(p&N)return!1;E=p||N,A=ls(n,i,E,l,h),B=Fn(A,l),E===p?(n=A,p=B):(i=A,N=B)}}function ls(n,i,l,d,h){var p=i.x-n.x,N=i.y-n.y,E=d.min,A=d.max,B,$;return l&8?(B=n.x+p*(A.y-n.y)/N,$=A.y):l&4?(B=n.x+p*(E.y-n.y)/N,$=E.y):l&2?(B=A.x,$=n.y+N*(A.x-n.x)/p):l&1&&(B=E.x,$=n.y+N*(E.x-n.x)/p),new O(B,$,h)}function Fn(n,i){var l=0;return n.x<i.min.x?l|=1:n.x>i.max.x&&(l|=2),n.y<i.min.y?l|=4:n.y>i.max.y&&(l|=8),l}function Yp(n,i){var l=i.x-n.x,d=i.y-n.y;return l*l+d*d}function ti(n,i,l,d){var h=i.x,p=i.y,N=l.x-h,E=l.y-p,A=N*N+E*E,B;return A>0&&(B=((n.x-h)*N+(n.y-p)*E)/A,B>1?(h=l.x,p=l.y):B>0&&(h+=N*B,p+=E*B)),N=n.x-h,E=n.y-p,d?N*N+E*E:new O(h,p)}function vt(n){return!S(n[0])||typeof n[0][0]!="object"&&typeof n[0][0]<"u"}function Ru(n){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),vt(n)}function zu(n,i){var l,d,h,p,N,E,A,B;if(!n||n.length===0)throw new Error("latlngs not passed");vt(n)||(console.warn("latlngs are not flat! Only the first ring will be used"),n=n[0]);var $=K([0,0]),se=re(n),de=se.getNorthWest().distanceTo(se.getSouthWest())*se.getNorthEast().distanceTo(se.getNorthWest());de<1700&&($=ga(n));var Ke=n.length,Fe=[];for(l=0;l<Ke;l++){var yt=K(n[l]);Fe.push(i.project(K([yt.lat-$.lat,yt.lng-$.lng])))}for(l=0,d=0;l<Ke-1;l++)d+=Fe[l].distanceTo(Fe[l+1])/2;if(d===0)B=Fe[0];else for(l=0,p=0;l<Ke-1;l++)if(N=Fe[l],E=Fe[l+1],h=N.distanceTo(E),p+=h,p>d){A=(p-d)/h,B=[E.x-A*(E.x-N.x),E.y-A*(E.y-N.y)];break}var nt=i.unproject(P(B));return K([nt.lat+$.lat,nt.lng+$.lng])}var Kp={__proto__:null,simplify:Au,pointToSegmentDistance:Mu,closestPointOnSegment:$p,clipSegment:Iu,_getEdgeIntersection:ls,_getBitCode:Fn,_sqClosestPointOnSegment:ti,isFlat:vt,_flat:Ru,polylineCenter:zu},va={project:function(n){return new O(n.lng,n.lat)},unproject:function(n){return new J(n.y,n.x)},bounds:new H([-180,-90],[180,90])},ya={R:6378137,R_MINOR:6356752314245179e-9,bounds:new H([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(n){var i=Math.PI/180,l=this.R,d=n.lat*i,h=this.R_MINOR/l,p=Math.sqrt(1-h*h),N=p*Math.sin(d),E=Math.tan(Math.PI/4-d/2)/Math.pow((1-N)/(1+N),p/2);return d=-l*Math.log(Math.max(E,1e-10)),new O(n.lng*i*l,d)},unproject:function(n){for(var i=180/Math.PI,l=this.R,d=this.R_MINOR/l,h=Math.sqrt(1-d*d),p=Math.exp(-n.y/l),N=Math.PI/2-2*Math.atan(p),E=0,A=.1,B;E<15&&Math.abs(A)>1e-7;E++)B=h*Math.sin(N),B=Math.pow((1-B)/(1+B),h/2),A=Math.PI/2-2*Math.atan(p*B)-N,N+=A;return new J(N*i,n.x*i/l)}},Qp={__proto__:null,LonLat:va,Mercator:ya,SphericalMercator:Be},Xp=o({},X,{code:"EPSG:3395",projection:ya,transformation:function(){var n=.5/(Math.PI*ya.R);return Ct(n,.5,-n,.5)}()}),Du=o({},X,{code:"EPSG:4326",projection:va,transformation:Ct(1/180,1,-1/180,.5)}),eg=o({},Ee,{projection:va,transformation:Ct(1,0,-1,0),scale:function(n){return Math.pow(2,n)},zoom:function(n){return Math.log(n)/Math.LN2},distance:function(n,i){var l=i.lng-n.lng,d=i.lat-n.lat;return Math.sqrt(l*l+d*d)},infinite:!0});Ee.Earth=X,Ee.EPSG3395=Xp,Ee.EPSG3857=In,Ee.EPSG900913=un,Ee.EPSG4326=Du,Ee.Simple=eg;var Et=ee.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(n){return n.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(n){return n&&n.removeLayer(this),this},getPane:function(n){return this._map.getPane(n?this.options[n]||n:this.options.pane)},addInteractiveTarget:function(n){return this._map._targets[m(n)]=this,this},removeInteractiveTarget:function(n){return delete this._map._targets[m(n)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(n){var i=n.target;if(i.hasLayer(this)){if(this._map=i,this._zoomAnimated=i._zoomAnimated,this.getEvents){var l=this.getEvents();i.on(l,this),this.once("remove",function(){i.off(l,this)},this)}this.onAdd(i),this.fire("add"),i.fire("layeradd",{layer:this})}}});me.include({addLayer:function(n){if(!n._layerAdd)throw new Error("The provided object is not a Layer.");var i=m(n);return this._layers[i]?this:(this._layers[i]=n,n._mapToAdd=this,n.beforeAdd&&n.beforeAdd(this),this.whenReady(n._layerAdd,n),this)},removeLayer:function(n){var i=m(n);return this._layers[i]?(this._loaded&&n.onRemove(this),delete this._layers[i],this._loaded&&(this.fire("layerremove",{layer:n}),n.fire("remove")),n._map=n._mapToAdd=null,this):this},hasLayer:function(n){return m(n)in this._layers},eachLayer:function(n,i){for(var l in this._layers)n.call(i,this._layers[l]);return this},_addLayers:function(n){n=n?S(n)?n:[n]:[];for(var i=0,l=n.length;i<l;i++)this.addLayer(n[i])},_addZoomLimit:function(n){(!isNaN(n.options.maxZoom)||!isNaN(n.options.minZoom))&&(this._zoomBoundLayers[m(n)]=n,this._updateZoomLevels())},_removeZoomLimit:function(n){var i=m(n);this._zoomBoundLayers[i]&&(delete this._zoomBoundLayers[i],this._updateZoomLevels())},_updateZoomLevels:function(){var n=1/0,i=-1/0,l=this._getZoomSpan();for(var d in this._zoomBoundLayers){var h=this._zoomBoundLayers[d].options;n=h.minZoom===void 0?n:Math.min(n,h.minZoom),i=h.maxZoom===void 0?i:Math.max(i,h.maxZoom)}this._layersMaxZoom=i===-1/0?void 0:i,this._layersMinZoom=n===1/0?void 0:n,l!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var lr=Et.extend({initialize:function(n,i){C(this,i),this._layers={};var l,d;if(n)for(l=0,d=n.length;l<d;l++)this.addLayer(n[l])},addLayer:function(n){var i=this.getLayerId(n);return this._layers[i]=n,this._map&&this._map.addLayer(n),this},removeLayer:function(n){var i=n in this._layers?n:this.getLayerId(n);return this._map&&this._layers[i]&&this._map.removeLayer(this._layers[i]),delete this._layers[i],this},hasLayer:function(n){var i=typeof n=="number"?n:this.getLayerId(n);return i in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(n){var i=Array.prototype.slice.call(arguments,1),l,d;for(l in this._layers)d=this._layers[l],d[n]&&d[n].apply(d,i);return this},onAdd:function(n){this.eachLayer(n.addLayer,n)},onRemove:function(n){this.eachLayer(n.removeLayer,n)},eachLayer:function(n,i){for(var l in this._layers)n.call(i,this._layers[l]);return this},getLayer:function(n){return this._layers[n]},getLayers:function(){var n=[];return this.eachLayer(n.push,n),n},setZIndex:function(n){return this.invoke("setZIndex",n)},getLayerId:function(n){return m(n)}}),tg=function(n,i){return new lr(n,i)},$t=lr.extend({addLayer:function(n){return this.hasLayer(n)?this:(n.addEventParent(this),lr.prototype.addLayer.call(this,n),this.fire("layeradd",{layer:n}))},removeLayer:function(n){return this.hasLayer(n)?(n in this._layers&&(n=this._layers[n]),n.removeEventParent(this),lr.prototype.removeLayer.call(this,n),this.fire("layerremove",{layer:n})):this},setStyle:function(n){return this.invoke("setStyle",n)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var n=new Q;for(var i in this._layers){var l=this._layers[i];n.extend(l.getBounds?l.getBounds():l.getLatLng())}return n}}),ng=function(n,i){return new $t(n,i)},cr=M.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(n){C(this,n)},createIcon:function(n){return this._createIcon("icon",n)},createShadow:function(n){return this._createIcon("shadow",n)},_createIcon:function(n,i){var l=this._getIconUrl(n);if(!l){if(n==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var d=this._createImg(l,i&&i.tagName==="IMG"?i:null);return this._setIconStyles(d,n),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),d},_setIconStyles:function(n,i){var l=this.options,d=l[i+"Size"];typeof d=="number"&&(d=[d,d]);var h=P(d),p=P(i==="shadow"&&l.shadowAnchor||l.iconAnchor||h&&h.divideBy(2,!0));n.className="leaflet-marker-"+i+" "+(l.className||""),p&&(n.style.marginLeft=-p.x+"px",n.style.marginTop=-p.y+"px"),h&&(n.style.width=h.x+"px",n.style.height=h.y+"px")},_createImg:function(n,i){return i=i||document.createElement("img"),i.src=n,i},_getIconUrl:function(n){return te.retina&&this.options[n+"RetinaUrl"]||this.options[n+"Url"]}});function rg(n){return new cr(n)}var ni=cr.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(n){return typeof ni.imagePath!="string"&&(ni.imagePath=this._detectIconPath()),(this.options.imagePath||ni.imagePath)+cr.prototype._getIconUrl.call(this,n)},_stripUrl:function(n){var i=function(l,d,h){var p=d.exec(l);return p&&p[h]};return n=i(n,/^url\((['"])?(.+)\1\)$/,2),n&&i(n,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var n=xe("div","leaflet-default-icon-path",document.body),i=qr(n,"background-image")||qr(n,"backgroundImage");if(document.body.removeChild(n),i=this._stripUrl(i),i)return i;var l=document.querySelector('link[href$="leaflet.css"]');return l?l.href.substring(0,l.href.length-11-1):""}}),Bu=Ft.extend({initialize:function(n){this._marker=n},addHooks:function(){var n=this._marker._icon;this._draggable||(this._draggable=new dn(n,n,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ce(n,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Le(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(n){var i=this._marker,l=i._map,d=this._marker.options.autoPanSpeed,h=this._marker.options.autoPanPadding,p=zn(i._icon),N=l.getPixelBounds(),E=l.getPixelOrigin(),A=ne(N.min._subtract(E).add(h),N.max._subtract(E).subtract(h));if(!A.contains(p)){var B=P((Math.max(A.max.x,p.x)-A.max.x)/(N.max.x-A.max.x)-(Math.min(A.min.x,p.x)-A.min.x)/(N.min.x-A.min.x),(Math.max(A.max.y,p.y)-A.max.y)/(N.max.y-A.max.y)-(Math.min(A.min.y,p.y)-A.min.y)/(N.min.y-A.min.y)).multiplyBy(d);l.panBy(B,{animate:!1}),this._draggable._newPos._add(B),this._draggable._startPos._add(B),Me(i._icon,this._draggable._newPos),this._onDrag(n),this._panRequest=le(this._adjustPan.bind(this,n))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(n){this._marker.options.autoPan&&(fe(this._panRequest),this._panRequest=le(this._adjustPan.bind(this,n)))},_onDrag:function(n){var i=this._marker,l=i._shadow,d=zn(i._icon),h=i._map.layerPointToLatLng(d);l&&Me(l,d),i._latlng=h,n.latlng=h,n.oldLatLng=this._oldLatLng,i.fire("move",n).fire("drag",n)},_onDragEnd:function(n){fe(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",n)}}),cs=Et.extend({options:{icon:new ni,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(n,i){C(this,i),this._latlng=K(n)},onAdd:function(n){this._zoomAnimated=this._zoomAnimated&&n.options.markerZoomAnimation,this._zoomAnimated&&n.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(n){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&n.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(n){var i=this._latlng;return this._latlng=K(n),this.update(),this.fire("move",{oldLatLng:i,latlng:this._latlng})},setZIndexOffset:function(n){return this.options.zIndexOffset=n,this.update()},getIcon:function(){return this.options.icon},setIcon:function(n){return this.options.icon=n,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var n=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(n)}return this},_initIcon:function(){var n=this.options,i="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),l=n.icon.createIcon(this._icon),d=!1;l!==this._icon&&(this._icon&&this._removeIcon(),d=!0,n.title&&(l.title=n.title),l.tagName==="IMG"&&(l.alt=n.alt||"")),ce(l,i),n.keyboard&&(l.tabIndex="0",l.setAttribute("role","button")),this._icon=l,n.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ae(l,"focus",this._panOnFocus,this);var h=n.icon.createShadow(this._shadow),p=!1;h!==this._shadow&&(this._removeShadow(),p=!0),h&&(ce(h,i),h.alt=""),this._shadow=h,n.opacity<1&&this._updateOpacity(),d&&this.getPane().appendChild(this._icon),this._initInteraction(),h&&p&&this.getPane(n.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ye(this._icon,"focus",this._panOnFocus,this),je(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&je(this._shadow),this._shadow=null},_setPos:function(n){this._icon&&Me(this._icon,n),this._shadow&&Me(this._shadow,n),this._zIndex=n.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(n){this._icon&&(this._icon.style.zIndex=this._zIndex+n)},_animateZoom:function(n){var i=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center).round();this._setPos(i)},_initInteraction:function(){if(this.options.interactive&&(ce(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Bu)){var n=this.options.draggable;this.dragging&&(n=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Bu(this),n&&this.dragging.enable()}},setOpacity:function(n){return this.options.opacity=n,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var n=this.options.opacity;this._icon&&xt(this._icon,n),this._shadow&&xt(this._shadow,n)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var n=this._map;if(n){var i=this.options.icon.options,l=i.iconSize?P(i.iconSize):P(0,0),d=i.iconAnchor?P(i.iconAnchor):P(0,0);n.panInside(this._latlng,{paddingTopLeft:d,paddingBottomRight:l.subtract(d)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ig(n,i){return new cs(n,i)}var hn=Et.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(n){this._renderer=n.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(n){return C(this,n),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&n&&Object.prototype.hasOwnProperty.call(n,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),us=hn.extend({options:{fill:!0,radius:10},initialize:function(n,i){C(this,i),this._latlng=K(n),this._radius=this.options.radius},setLatLng:function(n){var i=this._latlng;return this._latlng=K(n),this.redraw(),this.fire("move",{oldLatLng:i,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(n){return this.options.radius=this._radius=n,this.redraw()},getRadius:function(){return this._radius},setStyle:function(n){var i=n&&n.radius||this._radius;return hn.prototype.setStyle.call(this,n),this.setRadius(i),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var n=this._radius,i=this._radiusY||n,l=this._clickTolerance(),d=[n+l,i+l];this._pxBounds=new H(this._point.subtract(d),this._point.add(d))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(n){return n.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function sg(n,i){return new us(n,i)}var _a=us.extend({initialize:function(n,i,l){if(typeof i=="number"&&(i=o({},l,{radius:i})),C(this,i),this._latlng=K(n),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(n){return this._mRadius=n,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var n=[this._radius,this._radiusY||this._radius];return new Q(this._map.layerPointToLatLng(this._point.subtract(n)),this._map.layerPointToLatLng(this._point.add(n)))},setStyle:hn.prototype.setStyle,_project:function(){var n=this._latlng.lng,i=this._latlng.lat,l=this._map,d=l.options.crs;if(d.distance===X.distance){var h=Math.PI/180,p=this._mRadius/X.R/h,N=l.project([i+p,n]),E=l.project([i-p,n]),A=N.add(E).divideBy(2),B=l.unproject(A).lat,$=Math.acos((Math.cos(p*h)-Math.sin(i*h)*Math.sin(B*h))/(Math.cos(i*h)*Math.cos(B*h)))/h;(isNaN($)||$===0)&&($=p/Math.cos(Math.PI/180*i)),this._point=A.subtract(l.getPixelOrigin()),this._radius=isNaN($)?0:A.x-l.project([B,n-$]).x,this._radiusY=A.y-N.y}else{var se=d.unproject(d.project(this._latlng).subtract([this._mRadius,0]));this._point=l.latLngToLayerPoint(this._latlng),this._radius=this._point.x-l.latLngToLayerPoint(se).x}this._updateBounds()}});function og(n,i,l){return new _a(n,i,l)}var Jt=hn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(n,i){C(this,i),this._setLatLngs(n)},getLatLngs:function(){return this._latlngs},setLatLngs:function(n){return this._setLatLngs(n),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(n){for(var i=1/0,l=null,d=ti,h,p,N=0,E=this._parts.length;N<E;N++)for(var A=this._parts[N],B=1,$=A.length;B<$;B++){h=A[B-1],p=A[B];var se=d(n,h,p,!0);se<i&&(i=se,l=d(n,h,p))}return l&&(l.distance=Math.sqrt(i)),l},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return zu(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(n,i){return i=i||this._defaultShape(),n=K(n),i.push(n),this._bounds.extend(n),this.redraw()},_setLatLngs:function(n){this._bounds=new Q,this._latlngs=this._convertLatLngs(n)},_defaultShape:function(){return vt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(n){for(var i=[],l=vt(n),d=0,h=n.length;d<h;d++)l?(i[d]=K(n[d]),this._bounds.extend(i[d])):i[d]=this._convertLatLngs(n[d]);return i},_project:function(){var n=new H;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,n),this._bounds.isValid()&&n.isValid()&&(this._rawPxBounds=n,this._updateBounds())},_updateBounds:function(){var n=this._clickTolerance(),i=new O(n,n);this._rawPxBounds&&(this._pxBounds=new H([this._rawPxBounds.min.subtract(i),this._rawPxBounds.max.add(i)]))},_projectLatlngs:function(n,i,l){var d=n[0]instanceof J,h=n.length,p,N;if(d){for(N=[],p=0;p<h;p++)N[p]=this._map.latLngToLayerPoint(n[p]),l.extend(N[p]);i.push(N)}else for(p=0;p<h;p++)this._projectLatlngs(n[p],i,l)},_clipPoints:function(){var n=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(n))){if(this.options.noClip){this._parts=this._rings;return}var i=this._parts,l,d,h,p,N,E,A;for(l=0,h=0,p=this._rings.length;l<p;l++)for(A=this._rings[l],d=0,N=A.length;d<N-1;d++)E=Iu(A[d],A[d+1],n,d,!0),E&&(i[h]=i[h]||[],i[h].push(E[0]),(E[1]!==A[d+1]||d===N-2)&&(i[h].push(E[1]),h++))}},_simplifyPoints:function(){for(var n=this._parts,i=this.options.smoothFactor,l=0,d=n.length;l<d;l++)n[l]=Au(n[l],i)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(n,i){var l,d,h,p,N,E,A=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(n))return!1;for(l=0,p=this._parts.length;l<p;l++)for(E=this._parts[l],d=0,N=E.length,h=N-1;d<N;h=d++)if(!(!i&&d===0)&&Mu(n,E[h],E[d])<=A)return!0;return!1}});function ag(n,i){return new Jt(n,i)}Jt._flat=Ru;var ur=Jt.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Lu(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(n){var i=Jt.prototype._convertLatLngs.call(this,n),l=i.length;return l>=2&&i[0]instanceof J&&i[0].equals(i[l-1])&&i.pop(),i},_setLatLngs:function(n){Jt.prototype._setLatLngs.call(this,n),vt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return vt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var n=this._renderer._bounds,i=this.options.weight,l=new O(i,i);if(n=new H(n.min.subtract(l),n.max.add(l)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(n))){if(this.options.noClip){this._parts=this._rings;return}for(var d=0,h=this._rings.length,p;d<h;d++)p=Tu(this._rings[d],n,!0),p.length&&this._parts.push(p)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(n){var i=!1,l,d,h,p,N,E,A,B;if(!this._pxBounds||!this._pxBounds.contains(n))return!1;for(p=0,A=this._parts.length;p<A;p++)for(l=this._parts[p],N=0,B=l.length,E=B-1;N<B;E=N++)d=l[N],h=l[E],d.y>n.y!=h.y>n.y&&n.x<(h.x-d.x)*(n.y-d.y)/(h.y-d.y)+d.x&&(i=!i);return i||Jt.prototype._containsPoint.call(this,n,!0)}});function lg(n,i){return new ur(n,i)}var qt=$t.extend({initialize:function(n,i){C(this,i),this._layers={},n&&this.addData(n)},addData:function(n){var i=S(n)?n:n.features,l,d,h;if(i){for(l=0,d=i.length;l<d;l++)h=i[l],(h.geometries||h.geometry||h.features||h.coordinates)&&this.addData(h);return this}var p=this.options;if(p.filter&&!p.filter(n))return this;var N=ds(n,p);return N?(N.feature=ms(n),N.defaultOptions=N.options,this.resetStyle(N),p.onEachFeature&&p.onEachFeature(n,N),this.addLayer(N)):this},resetStyle:function(n){return n===void 0?this.eachLayer(this.resetStyle,this):(n.options=o({},n.defaultOptions),this._setLayerStyle(n,this.options.style),this)},setStyle:function(n){return this.eachLayer(function(i){this._setLayerStyle(i,n)},this)},_setLayerStyle:function(n,i){n.setStyle&&(typeof i=="function"&&(i=i(n.feature)),n.setStyle(i))}});function ds(n,i){var l=n.type==="Feature"?n.geometry:n,d=l?l.coordinates:null,h=[],p=i&&i.pointToLayer,N=i&&i.coordsToLatLng||wa,E,A,B,$;if(!d&&!l)return null;switch(l.type){case"Point":return E=N(d),Fu(p,n,E,i);case"MultiPoint":for(B=0,$=d.length;B<$;B++)E=N(d[B]),h.push(Fu(p,n,E,i));return new $t(h);case"LineString":case"MultiLineString":return A=hs(d,l.type==="LineString"?0:1,N),new Jt(A,i);case"Polygon":case"MultiPolygon":return A=hs(d,l.type==="Polygon"?1:2,N),new ur(A,i);case"GeometryCollection":for(B=0,$=l.geometries.length;B<$;B++){var se=ds({geometry:l.geometries[B],type:"Feature",properties:n.properties},i);se&&h.push(se)}return new $t(h);case"FeatureCollection":for(B=0,$=l.features.length;B<$;B++){var de=ds(l.features[B],i);de&&h.push(de)}return new $t(h);default:throw new Error("Invalid GeoJSON object.")}}function Fu(n,i,l,d){return n?n(i,l):new cs(l,d&&d.markersInheritOptions&&d)}function wa(n){return new J(n[1],n[0],n[2])}function hs(n,i,l){for(var d=[],h=0,p=n.length,N;h<p;h++)N=i?hs(n[h],i-1,l):(l||wa)(n[h]),d.push(N);return d}function ba(n,i){return n=K(n),n.alt!==void 0?[y(n.lng,i),y(n.lat,i),y(n.alt,i)]:[y(n.lng,i),y(n.lat,i)]}function fs(n,i,l,d){for(var h=[],p=0,N=n.length;p<N;p++)h.push(i?fs(n[p],vt(n[p])?0:i-1,l,d):ba(n[p],d));return!i&&l&&h.length>0&&h.push(h[0].slice()),h}function dr(n,i){return n.feature?o({},n.feature,{geometry:i}):ms(i)}function ms(n){return n.type==="Feature"||n.type==="FeatureCollection"?n:{type:"Feature",properties:{},geometry:n}}var Sa={toGeoJSON:function(n){return dr(this,{type:"Point",coordinates:ba(this.getLatLng(),n)})}};cs.include(Sa),_a.include(Sa),us.include(Sa),Jt.include({toGeoJSON:function(n){var i=!vt(this._latlngs),l=fs(this._latlngs,i?1:0,!1,n);return dr(this,{type:(i?"Multi":"")+"LineString",coordinates:l})}}),ur.include({toGeoJSON:function(n){var i=!vt(this._latlngs),l=i&&!vt(this._latlngs[0]),d=fs(this._latlngs,l?2:i?1:0,!0,n);return i||(d=[d]),dr(this,{type:(l?"Multi":"")+"Polygon",coordinates:d})}}),lr.include({toMultiPoint:function(n){var i=[];return this.eachLayer(function(l){i.push(l.toGeoJSON(n).geometry.coordinates)}),dr(this,{type:"MultiPoint",coordinates:i})},toGeoJSON:function(n){var i=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(i==="MultiPoint")return this.toMultiPoint(n);var l=i==="GeometryCollection",d=[];return this.eachLayer(function(h){if(h.toGeoJSON){var p=h.toGeoJSON(n);if(l)d.push(p.geometry);else{var N=ms(p);N.type==="FeatureCollection"?d.push.apply(d,N.features):d.push(N)}}}),l?dr(this,{geometries:d,type:"GeometryCollection"}):{type:"FeatureCollection",features:d}}});function Uu(n,i){return new qt(n,i)}var cg=Uu,ps=Et.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(n,i,l){this._url=n,this._bounds=re(i),C(this,l)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ce(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){je(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(n){return this.options.opacity=n,this._image&&this._updateOpacity(),this},setStyle:function(n){return n.opacity&&this.setOpacity(n.opacity),this},bringToFront:function(){return this._map&&or(this._image),this},bringToBack:function(){return this._map&&ar(this._image),this},setUrl:function(n){return this._url=n,this._image&&(this._image.src=n),this},setBounds:function(n){return this._bounds=re(n),this._map&&this._reset(),this},getEvents:function(){var n={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},setZIndex:function(n){return this.options.zIndex=n,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var n=this._url.tagName==="IMG",i=this._image=n?this._url:xe("img");if(ce(i,"leaflet-image-layer"),this._zoomAnimated&&ce(i,"leaflet-zoom-animated"),this.options.className&&ce(i,this.options.className),i.onselectstart=v,i.onmousemove=v,i.onload=u(this.fire,this,"load"),i.onerror=u(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(i.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),n){this._url=i.src;return}i.src=this._url,i.alt=this.options.alt},_animateZoom:function(n){var i=this._map.getZoomScale(n.zoom),l=this._map._latLngBoundsToNewLayerBounds(this._bounds,n.zoom,n.center).min;Rn(this._image,l,i)},_reset:function(){var n=this._image,i=new H(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),l=i.getSize();Me(n,i.min),n.style.width=l.x+"px",n.style.height=l.y+"px"},_updateOpacity:function(){xt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var n=this.options.errorOverlayUrl;n&&this._url!==n&&(this._url=n,this._image.src=n)},getCenter:function(){return this._bounds.getCenter()}}),ug=function(n,i,l){return new ps(n,i,l)},Zu=ps.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var n=this._url.tagName==="VIDEO",i=this._image=n?this._url:xe("video");if(ce(i,"leaflet-image-layer"),this._zoomAnimated&&ce(i,"leaflet-zoom-animated"),this.options.className&&ce(i,this.options.className),i.onselectstart=v,i.onmousemove=v,i.onloadeddata=u(this.fire,this,"load"),n){for(var l=i.getElementsByTagName("source"),d=[],h=0;h<l.length;h++)d.push(l[h].src);this._url=l.length>0?d:[i.src];return}S(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(i.style,"objectFit")&&(i.style.objectFit="fill"),i.autoplay=!!this.options.autoplay,i.loop=!!this.options.loop,i.muted=!!this.options.muted,i.playsInline=!!this.options.playsInline;for(var p=0;p<this._url.length;p++){var N=xe("source");N.src=this._url[p],i.appendChild(N)}}});function dg(n,i,l){return new Zu(n,i,l)}var Wu=ps.extend({_initImage:function(){var n=this._image=this._url;ce(n,"leaflet-image-layer"),this._zoomAnimated&&ce(n,"leaflet-zoom-animated"),this.options.className&&ce(n,this.options.className),n.onselectstart=v,n.onmousemove=v}});function hg(n,i,l){return new Wu(n,i,l)}var Ut=Et.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(n,i){n&&(n instanceof J||S(n))?(this._latlng=K(n),C(this,i)):(C(this,n),this._source=i),this.options.content&&(this._content=this.options.content)},openOn:function(n){return n=arguments.length?n:this._source._map,n.hasLayer(this)||n.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(n){return this._map?this.close():(arguments.length?this._source=n:n=this._source,this._prepareOpen(),this.openOn(n._map)),this},onAdd:function(n){this._zoomAnimated=n._zoomAnimated,this._container||this._initLayout(),n._fadeAnimated&&xt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),n._fadeAnimated&&xt(this._container,1),this.bringToFront(),this.options.interactive&&(ce(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(n){n._fadeAnimated?(xt(this._container,0),this._removeTimeout=setTimeout(u(je,void 0,this._container),200)):je(this._container),this.options.interactive&&(Le(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(n){return this._latlng=K(n),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(n){return this._content=n,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var n={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&or(this._container),this},bringToBack:function(){return this._map&&ar(this._container),this},_prepareOpen:function(n){var i=this._source;if(!i._map)return!1;if(i instanceof $t){i=null;var l=this._source._layers;for(var d in l)if(l[d]._map){i=l[d];break}if(!i)return!1;this._source=i}if(!n)if(i.getCenter)n=i.getCenter();else if(i.getLatLng)n=i.getLatLng();else if(i.getBounds)n=i.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(n),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var n=this._contentNode,i=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof i=="string")n.innerHTML=i;else{for(;n.hasChildNodes();)n.removeChild(n.firstChild);n.appendChild(i)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var n=this._map.latLngToLayerPoint(this._latlng),i=P(this.options.offset),l=this._getAnchor();this._zoomAnimated?Me(this._container,n.add(l)):i=i.add(n).add(l);var d=this._containerBottom=-i.y,h=this._containerLeft=-Math.round(this._containerWidth/2)+i.x;this._container.style.bottom=d+"px",this._container.style.left=h+"px"}},_getAnchor:function(){return[0,0]}});me.include({_initOverlay:function(n,i,l,d){var h=i;return h instanceof n||(h=new n(d).setContent(i)),l&&h.setLatLng(l),h}}),Et.include({_initOverlay:function(n,i,l,d){var h=l;return h instanceof n?(C(h,d),h._source=this):(h=i&&!d?i:new n(d,this),h.setContent(l)),h}});var gs=Ut.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(n){return n=arguments.length?n:this._source._map,!n.hasLayer(this)&&n._popup&&n._popup.options.autoClose&&n.removeLayer(n._popup),n._popup=this,Ut.prototype.openOn.call(this,n)},onAdd:function(n){Ut.prototype.onAdd.call(this,n),n.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof hn||this._source.on("preclick",Dn))},onRemove:function(n){Ut.prototype.onRemove.call(this,n),n.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof hn||this._source.off("preclick",Dn))},getEvents:function(){var n=Ut.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(n.preclick=this.close),this.options.keepInView&&(n.moveend=this._adjustPan),n},_initLayout:function(){var n="leaflet-popup",i=this._container=xe("div",n+" "+(this.options.className||"")+" leaflet-zoom-animated"),l=this._wrapper=xe("div",n+"-content-wrapper",i);if(this._contentNode=xe("div",n+"-content",l),Xr(i),ha(this._contentNode),ae(i,"contextmenu",Dn),this._tipContainer=xe("div",n+"-tip-container",i),this._tip=xe("div",n+"-tip",this._tipContainer),this.options.closeButton){var d=this._closeButton=xe("a",n+"-close-button",i);d.setAttribute("role","button"),d.setAttribute("aria-label","Close popup"),d.href="#close",d.innerHTML='<span aria-hidden="true">&#215;</span>',ae(d,"click",function(h){We(h),this.close()},this)}},_updateLayout:function(){var n=this._contentNode,i=n.style;i.width="",i.whiteSpace="nowrap";var l=n.offsetWidth;l=Math.min(l,this.options.maxWidth),l=Math.max(l,this.options.minWidth),i.width=l+1+"px",i.whiteSpace="",i.height="";var d=n.offsetHeight,h=this.options.maxHeight,p="leaflet-popup-scrolled";h&&d>h?(i.height=h+"px",ce(n,p)):Le(n,p),this._containerWidth=this._container.offsetWidth},_animateZoom:function(n){var i=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center),l=this._getAnchor();Me(this._container,i.add(l))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var n=this._map,i=parseInt(qr(this._container,"marginBottom"),10)||0,l=this._container.offsetHeight+i,d=this._containerWidth,h=new O(this._containerLeft,-l-this._containerBottom);h._add(zn(this._container));var p=n.layerPointToContainerPoint(h),N=P(this.options.autoPanPadding),E=P(this.options.autoPanPaddingTopLeft||N),A=P(this.options.autoPanPaddingBottomRight||N),B=n.getSize(),$=0,se=0;p.x+d+A.x>B.x&&($=p.x+d-B.x+A.x),p.x-$-E.x<0&&($=p.x-E.x),p.y+l+A.y>B.y&&(se=p.y+l-B.y+A.y),p.y-se-E.y<0&&(se=p.y-E.y),($||se)&&(this.options.keepInView&&(this._autopanning=!0),n.fire("autopanstart").panBy([$,se]))}},_getAnchor:function(){return P(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),fg=function(n,i){return new gs(n,i)};me.mergeOptions({closePopupOnClick:!0}),me.include({openPopup:function(n,i,l){return this._initOverlay(gs,n,i,l).openOn(this),this},closePopup:function(n){return n=arguments.length?n:this._popup,n&&n.close(),this}}),Et.include({bindPopup:function(n,i){return this._popup=this._initOverlay(gs,this._popup,n,i),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(n){return this._popup&&(this instanceof $t||(this._popup._source=this),this._popup._prepareOpen(n||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(n){return this._popup&&this._popup.setContent(n),this},getPopup:function(){return this._popup},_openPopup:function(n){if(!(!this._popup||!this._map)){Bn(n);var i=n.layer||n.target;if(this._popup._source===i&&!(i instanceof hn)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(n.latlng);return}this._popup._source=i,this.openPopup(n.latlng)}},_movePopup:function(n){this._popup.setLatLng(n.latlng)},_onKeyPress:function(n){n.originalEvent.keyCode===13&&this._openPopup(n)}});var xs=Ut.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(n){Ut.prototype.onAdd.call(this,n),this.setOpacity(this.options.opacity),n.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(n){Ut.prototype.onRemove.call(this,n),n.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var n=Ut.prototype.getEvents.call(this);return this.options.permanent||(n.preclick=this.close),n},_initLayout:function(){var n="leaflet-tooltip",i=n+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=xe("div",i),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+m(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(n){var i,l,d=this._map,h=this._container,p=d.latLngToContainerPoint(d.getCenter()),N=d.layerPointToContainerPoint(n),E=this.options.direction,A=h.offsetWidth,B=h.offsetHeight,$=P(this.options.offset),se=this._getAnchor();E==="top"?(i=A/2,l=B):E==="bottom"?(i=A/2,l=0):E==="center"?(i=A/2,l=B/2):E==="right"?(i=0,l=B/2):E==="left"?(i=A,l=B/2):N.x<p.x?(E="right",i=0,l=B/2):(E="left",i=A+($.x+se.x)*2,l=B/2),n=n.subtract(P(i,l,!0)).add($).add(se),Le(h,"leaflet-tooltip-right"),Le(h,"leaflet-tooltip-left"),Le(h,"leaflet-tooltip-top"),Le(h,"leaflet-tooltip-bottom"),ce(h,"leaflet-tooltip-"+E),Me(h,n)},_updatePosition:function(){var n=this._map.latLngToLayerPoint(this._latlng);this._setPosition(n)},setOpacity:function(n){this.options.opacity=n,this._container&&xt(this._container,n)},_animateZoom:function(n){var i=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center);this._setPosition(i)},_getAnchor:function(){return P(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),mg=function(n,i){return new xs(n,i)};me.include({openTooltip:function(n,i,l){return this._initOverlay(xs,n,i,l).openOn(this),this},closeTooltip:function(n){return n.close(),this}}),Et.include({bindTooltip:function(n,i){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(xs,this._tooltip,n,i),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(n){if(!(!n&&this._tooltipHandlersAdded)){var i=n?"off":"on",l={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?l.add=this._openTooltip:(l.mouseover=this._openTooltip,l.mouseout=this.closeTooltip,l.click=this._openTooltip,this._map?this._addFocusListeners():l.add=this._addFocusListeners),this._tooltip.options.sticky&&(l.mousemove=this._moveTooltip),this[i](l),this._tooltipHandlersAdded=!n}},openTooltip:function(n){return this._tooltip&&(this instanceof $t||(this._tooltip._source=this),this._tooltip._prepareOpen(n)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(n){return this._tooltip&&this._tooltip.setContent(n),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(n){var i=typeof n.getElement=="function"&&n.getElement();i&&(ae(i,"focus",function(){this._tooltip._source=n,this.openTooltip()},this),ae(i,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(n){var i=typeof n.getElement=="function"&&n.getElement();i&&i.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(n){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var i=this;this._map.once("moveend",function(){i._openOnceFlag=!1,i._openTooltip(n)});return}this._tooltip._source=n.layer||n.target,this.openTooltip(this._tooltip.options.sticky?n.latlng:void 0)}},_moveTooltip:function(n){var i=n.latlng,l,d;this._tooltip.options.sticky&&n.originalEvent&&(l=this._map.mouseEventToContainerPoint(n.originalEvent),d=this._map.containerPointToLayerPoint(l),i=this._map.layerPointToLatLng(d)),this._tooltip.setLatLng(i)}});var Vu=cr.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(n){var i=n&&n.tagName==="DIV"?n:document.createElement("div"),l=this.options;if(l.html instanceof Element?(rs(i),i.appendChild(l.html)):i.innerHTML=l.html!==!1?l.html:"",l.bgPos){var d=P(l.bgPos);i.style.backgroundPosition=-d.x+"px "+-d.y+"px"}return this._setIconStyles(i,"icon"),i},createShadow:function(){return null}});function pg(n){return new Vu(n)}cr.Default=ni;var ri=Et.extend({options:{tileSize:256,opacity:1,updateWhenIdle:te.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(n){C(this,n)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(n){n._addZoomLimit(this)},onRemove:function(n){this._removeAllTiles(),je(this._container),n._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(or(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ar(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(n){return this.options.opacity=n,this._updateOpacity(),this},setZIndex:function(n){return this.options.zIndex=n,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var n=this._clampZoom(this._map.getZoom());n!==this._tileZoom&&(this._tileZoom=n,this._updateLevels()),this._update()}return this},getEvents:function(){var n={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=g(this._onMoveEnd,this.options.updateInterval,this)),n.move=this._onMove),this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},createTile:function(){return document.createElement("div")},getTileSize:function(){var n=this.options.tileSize;return n instanceof O?n:new O(n,n)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(n){for(var i=this.getPane().children,l=-n(-1/0,1/0),d=0,h=i.length,p;d<h;d++)p=i[d].style.zIndex,i[d]!==this._container&&p&&(l=n(l,+p));isFinite(l)&&(this.options.zIndex=l+n(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!te.ielt9){xt(this._container,this.options.opacity);var n=+new Date,i=!1,l=!1;for(var d in this._tiles){var h=this._tiles[d];if(!(!h.current||!h.loaded)){var p=Math.min(1,(n-h.loaded)/200);xt(h.el,p),p<1?i=!0:(h.active?l=!0:this._onOpaqueTile(h),h.active=!0)}}l&&!this._noPrune&&this._pruneTiles(),i&&(fe(this._fadeFrame),this._fadeFrame=le(this._updateOpacity,this))}},_onOpaqueTile:v,_initContainer:function(){this._container||(this._container=xe("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var n=this._tileZoom,i=this.options.maxZoom;if(n!==void 0){for(var l in this._levels)l=Number(l),this._levels[l].el.children.length||l===n?(this._levels[l].el.style.zIndex=i-Math.abs(n-l),this._onUpdateLevel(l)):(je(this._levels[l].el),this._removeTilesAtZoom(l),this._onRemoveLevel(l),delete this._levels[l]);var d=this._levels[n],h=this._map;return d||(d=this._levels[n]={},d.el=xe("div","leaflet-tile-container leaflet-zoom-animated",this._container),d.el.style.zIndex=i,d.origin=h.project(h.unproject(h.getPixelOrigin()),n).round(),d.zoom=n,this._setZoomTransform(d,h.getCenter(),h.getZoom()),v(d.el.offsetWidth),this._onCreateLevel(d)),this._level=d,d}},_onUpdateLevel:v,_onRemoveLevel:v,_onCreateLevel:v,_pruneTiles:function(){if(this._map){var n,i,l=this._map.getZoom();if(l>this.options.maxZoom||l<this.options.minZoom){this._removeAllTiles();return}for(n in this._tiles)i=this._tiles[n],i.retain=i.current;for(n in this._tiles)if(i=this._tiles[n],i.current&&!i.active){var d=i.coords;this._retainParent(d.x,d.y,d.z,d.z-5)||this._retainChildren(d.x,d.y,d.z,d.z+2)}for(n in this._tiles)this._tiles[n].retain||this._removeTile(n)}},_removeTilesAtZoom:function(n){for(var i in this._tiles)this._tiles[i].coords.z===n&&this._removeTile(i)},_removeAllTiles:function(){for(var n in this._tiles)this._removeTile(n)},_invalidateAll:function(){for(var n in this._levels)je(this._levels[n].el),this._onRemoveLevel(Number(n)),delete this._levels[n];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(n,i,l,d){var h=Math.floor(n/2),p=Math.floor(i/2),N=l-1,E=new O(+h,+p);E.z=+N;var A=this._tileCoordsToKey(E),B=this._tiles[A];return B&&B.active?(B.retain=!0,!0):(B&&B.loaded&&(B.retain=!0),N>d?this._retainParent(h,p,N,d):!1)},_retainChildren:function(n,i,l,d){for(var h=2*n;h<2*n+2;h++)for(var p=2*i;p<2*i+2;p++){var N=new O(h,p);N.z=l+1;var E=this._tileCoordsToKey(N),A=this._tiles[E];if(A&&A.active){A.retain=!0;continue}else A&&A.loaded&&(A.retain=!0);l+1<d&&this._retainChildren(h,p,l+1,d)}},_resetView:function(n){var i=n&&(n.pinch||n.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),i,i)},_animateZoom:function(n){this._setView(n.center,n.zoom,!0,n.noUpdate)},_clampZoom:function(n){var i=this.options;return i.minNativeZoom!==void 0&&n<i.minNativeZoom?i.minNativeZoom:i.maxNativeZoom!==void 0&&i.maxNativeZoom<n?i.maxNativeZoom:n},_setView:function(n,i,l,d){var h=Math.round(i);this.options.maxZoom!==void 0&&h>this.options.maxZoom||this.options.minZoom!==void 0&&h<this.options.minZoom?h=void 0:h=this._clampZoom(h);var p=this.options.updateWhenZooming&&h!==this._tileZoom;(!d||p)&&(this._tileZoom=h,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),h!==void 0&&this._update(n),l||this._pruneTiles(),this._noPrune=!!l),this._setZoomTransforms(n,i)},_setZoomTransforms:function(n,i){for(var l in this._levels)this._setZoomTransform(this._levels[l],n,i)},_setZoomTransform:function(n,i,l){var d=this._map.getZoomScale(l,n.zoom),h=n.origin.multiplyBy(d).subtract(this._map._getNewPixelOrigin(i,l)).round();te.any3d?Rn(n.el,h,d):Me(n.el,h)},_resetGrid:function(){var n=this._map,i=n.options.crs,l=this._tileSize=this.getTileSize(),d=this._tileZoom,h=this._map.getPixelWorldBounds(this._tileZoom);h&&(this._globalTileRange=this._pxBoundsToTileRange(h)),this._wrapX=i.wrapLng&&!this.options.noWrap&&[Math.floor(n.project([0,i.wrapLng[0]],d).x/l.x),Math.ceil(n.project([0,i.wrapLng[1]],d).x/l.y)],this._wrapY=i.wrapLat&&!this.options.noWrap&&[Math.floor(n.project([i.wrapLat[0],0],d).y/l.x),Math.ceil(n.project([i.wrapLat[1],0],d).y/l.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(n){var i=this._map,l=i._animatingZoom?Math.max(i._animateToZoom,i.getZoom()):i.getZoom(),d=i.getZoomScale(l,this._tileZoom),h=i.project(n,this._tileZoom).floor(),p=i.getSize().divideBy(d*2);return new H(h.subtract(p),h.add(p))},_update:function(n){var i=this._map;if(i){var l=this._clampZoom(i.getZoom());if(n===void 0&&(n=i.getCenter()),this._tileZoom!==void 0){var d=this._getTiledPixelBounds(n),h=this._pxBoundsToTileRange(d),p=h.getCenter(),N=[],E=this.options.keepBuffer,A=new H(h.getBottomLeft().subtract([E,-E]),h.getTopRight().add([E,-E]));if(!(isFinite(h.min.x)&&isFinite(h.min.y)&&isFinite(h.max.x)&&isFinite(h.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var B in this._tiles){var $=this._tiles[B].coords;($.z!==this._tileZoom||!A.contains(new O($.x,$.y)))&&(this._tiles[B].current=!1)}if(Math.abs(l-this._tileZoom)>1){this._setView(n,l);return}for(var se=h.min.y;se<=h.max.y;se++)for(var de=h.min.x;de<=h.max.x;de++){var Ke=new O(de,se);if(Ke.z=this._tileZoom,!!this._isValidTile(Ke)){var Fe=this._tiles[this._tileCoordsToKey(Ke)];Fe?Fe.current=!0:N.push(Ke)}}if(N.sort(function(nt,fr){return nt.distanceTo(p)-fr.distanceTo(p)}),N.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var yt=document.createDocumentFragment();for(de=0;de<N.length;de++)this._addTile(N[de],yt);this._level.el.appendChild(yt)}}}},_isValidTile:function(n){var i=this._map.options.crs;if(!i.infinite){var l=this._globalTileRange;if(!i.wrapLng&&(n.x<l.min.x||n.x>l.max.x)||!i.wrapLat&&(n.y<l.min.y||n.y>l.max.y))return!1}if(!this.options.bounds)return!0;var d=this._tileCoordsToBounds(n);return re(this.options.bounds).overlaps(d)},_keyToBounds:function(n){return this._tileCoordsToBounds(this._keyToTileCoords(n))},_tileCoordsToNwSe:function(n){var i=this._map,l=this.getTileSize(),d=n.scaleBy(l),h=d.add(l),p=i.unproject(d,n.z),N=i.unproject(h,n.z);return[p,N]},_tileCoordsToBounds:function(n){var i=this._tileCoordsToNwSe(n),l=new Q(i[0],i[1]);return this.options.noWrap||(l=this._map.wrapLatLngBounds(l)),l},_tileCoordsToKey:function(n){return n.x+":"+n.y+":"+n.z},_keyToTileCoords:function(n){var i=n.split(":"),l=new O(+i[0],+i[1]);return l.z=+i[2],l},_removeTile:function(n){var i=this._tiles[n];i&&(je(i.el),delete this._tiles[n],this.fire("tileunload",{tile:i.el,coords:this._keyToTileCoords(n)}))},_initTile:function(n){ce(n,"leaflet-tile");var i=this.getTileSize();n.style.width=i.x+"px",n.style.height=i.y+"px",n.onselectstart=v,n.onmousemove=v,te.ielt9&&this.options.opacity<1&&xt(n,this.options.opacity)},_addTile:function(n,i){var l=this._getTilePos(n),d=this._tileCoordsToKey(n),h=this.createTile(this._wrapCoords(n),u(this._tileReady,this,n));this._initTile(h),this.createTile.length<2&&le(u(this._tileReady,this,n,null,h)),Me(h,l),this._tiles[d]={el:h,coords:n,current:!0},i.appendChild(h),this.fire("tileloadstart",{tile:h,coords:n})},_tileReady:function(n,i,l){i&&this.fire("tileerror",{error:i,tile:l,coords:n});var d=this._tileCoordsToKey(n);l=this._tiles[d],l&&(l.loaded=+new Date,this._map._fadeAnimated?(xt(l.el,0),fe(this._fadeFrame),this._fadeFrame=le(this._updateOpacity,this)):(l.active=!0,this._pruneTiles()),i||(ce(l.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:l.el,coords:n})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),te.ielt9||!this._map._fadeAnimated?le(this._pruneTiles,this):setTimeout(u(this._pruneTiles,this),250)))},_getTilePos:function(n){return n.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(n){var i=new O(this._wrapX?x(n.x,this._wrapX):n.x,this._wrapY?x(n.y,this._wrapY):n.y);return i.z=n.z,i},_pxBoundsToTileRange:function(n){var i=this.getTileSize();return new H(n.min.unscaleBy(i).floor(),n.max.unscaleBy(i).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var n in this._tiles)if(!this._tiles[n].loaded)return!1;return!0}});function gg(n){return new ri(n)}var hr=ri.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(n,i){this._url=n,i=C(this,i),i.detectRetina&&te.retina&&i.maxZoom>0?(i.tileSize=Math.floor(i.tileSize/2),i.zoomReverse?(i.zoomOffset--,i.minZoom=Math.min(i.maxZoom,i.minZoom+1)):(i.zoomOffset++,i.maxZoom=Math.max(i.minZoom,i.maxZoom-1)),i.minZoom=Math.max(0,i.minZoom)):i.zoomReverse?i.minZoom=Math.min(i.maxZoom,i.minZoom):i.maxZoom=Math.max(i.minZoom,i.maxZoom),typeof i.subdomains=="string"&&(i.subdomains=i.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(n,i){return this._url===n&&i===void 0&&(i=!0),this._url=n,i||this.redraw(),this},createTile:function(n,i){var l=document.createElement("img");return ae(l,"load",u(this._tileOnLoad,this,i,l)),ae(l,"error",u(this._tileOnError,this,i,l)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(l.referrerPolicy=this.options.referrerPolicy),l.alt="",l.src=this.getTileUrl(n),l},getTileUrl:function(n){var i={r:te.retina?"@2x":"",s:this._getSubdomain(n),x:n.x,y:n.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var l=this._globalTileRange.max.y-n.y;this.options.tms&&(i.y=l),i["-y"]=l}return _(this._url,o(i,this.options))},_tileOnLoad:function(n,i){te.ielt9?setTimeout(u(n,this,null,i),0):n(null,i)},_tileOnError:function(n,i,l){var d=this.options.errorTileUrl;d&&i.getAttribute("src")!==d&&(i.src=d),n(l,i)},_onTileRemove:function(n){n.tile.onload=null},_getZoomForUrl:function(){var n=this._tileZoom,i=this.options.maxZoom,l=this.options.zoomReverse,d=this.options.zoomOffset;return l&&(n=i-n),n+d},_getSubdomain:function(n){var i=Math.abs(n.x+n.y)%this.options.subdomains.length;return this.options.subdomains[i]},_abortLoading:function(){var n,i;for(n in this._tiles)if(this._tiles[n].coords.z!==this._tileZoom&&(i=this._tiles[n].el,i.onload=v,i.onerror=v,!i.complete)){i.src=z;var l=this._tiles[n].coords;je(i),delete this._tiles[n],this.fire("tileabort",{tile:i,coords:l})}},_removeTile:function(n){var i=this._tiles[n];if(i)return i.el.setAttribute("src",z),ri.prototype._removeTile.call(this,n)},_tileReady:function(n,i,l){if(!(!this._map||l&&l.getAttribute("src")===z))return ri.prototype._tileReady.call(this,n,i,l)}});function Hu(n,i){return new hr(n,i)}var Gu=hr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(n,i){this._url=n;var l=o({},this.defaultWmsParams);for(var d in i)d in this.options||(l[d]=i[d]);i=C(this,i);var h=i.detectRetina&&te.retina?2:1,p=this.getTileSize();l.width=p.x*h,l.height=p.y*h,this.wmsParams=l},onAdd:function(n){this._crs=this.options.crs||n.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var i=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[i]=this._crs.code,hr.prototype.onAdd.call(this,n)},getTileUrl:function(n){var i=this._tileCoordsToNwSe(n),l=this._crs,d=ne(l.project(i[0]),l.project(i[1])),h=d.min,p=d.max,N=(this._wmsVersion>=1.3&&this._crs===Du?[h.y,h.x,p.y,p.x]:[h.x,h.y,p.x,p.y]).join(","),E=hr.prototype.getTileUrl.call(this,n);return E+R(this.wmsParams,E,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+N},setParams:function(n,i){return o(this.wmsParams,n),i||this.redraw(),this}});function xg(n,i){return new Gu(n,i)}hr.WMS=Gu,Hu.wms=xg;var Yt=Et.extend({options:{padding:.1},initialize:function(n){C(this,n),m(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ce(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var n={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(n.zoomanim=this._onAnimZoom),n},_onAnimZoom:function(n){this._updateTransform(n.center,n.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(n,i){var l=this._map.getZoomScale(i,this._zoom),d=this._map.getSize().multiplyBy(.5+this.options.padding),h=this._map.project(this._center,i),p=d.multiplyBy(-l).add(h).subtract(this._map._getNewPixelOrigin(n,i));te.any3d?Rn(this._container,p,l):Me(this._container,p)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var n in this._layers)this._layers[n]._reset()},_onZoomEnd:function(){for(var n in this._layers)this._layers[n]._project()},_updatePaths:function(){for(var n in this._layers)this._layers[n]._update()},_update:function(){var n=this.options.padding,i=this._map.getSize(),l=this._map.containerPointToLayerPoint(i.multiplyBy(-n)).round();this._bounds=new H(l,l.add(i.multiplyBy(1+n*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),$u=Yt.extend({options:{tolerance:0},getEvents:function(){var n=Yt.prototype.getEvents.call(this);return n.viewprereset=this._onViewPreReset,n},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Yt.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var n=this._container=document.createElement("canvas");ae(n,"mousemove",this._onMouseMove,this),ae(n,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ae(n,"mouseout",this._handleMouseOut,this),n._leaflet_disable_events=!0,this._ctx=n.getContext("2d")},_destroyContainer:function(){fe(this._redrawRequest),delete this._ctx,je(this._container),ye(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var n;this._redrawBounds=null;for(var i in this._layers)n=this._layers[i],n._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Yt.prototype._update.call(this);var n=this._bounds,i=this._container,l=n.getSize(),d=te.retina?2:1;Me(i,n.min),i.width=d*l.x,i.height=d*l.y,i.style.width=l.x+"px",i.style.height=l.y+"px",te.retina&&this._ctx.scale(2,2),this._ctx.translate(-n.min.x,-n.min.y),this.fire("update")}},_reset:function(){Yt.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(n){this._updateDashArray(n),this._layers[m(n)]=n;var i=n._order={layer:n,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=i),this._drawLast=i,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(n){this._requestRedraw(n)},_removePath:function(n){var i=n._order,l=i.next,d=i.prev;l?l.prev=d:this._drawLast=d,d?d.next=l:this._drawFirst=l,delete n._order,delete this._layers[m(n)],this._requestRedraw(n)},_updatePath:function(n){this._extendRedrawBounds(n),n._project(),n._update(),this._requestRedraw(n)},_updateStyle:function(n){this._updateDashArray(n),this._requestRedraw(n)},_updateDashArray:function(n){if(typeof n.options.dashArray=="string"){var i=n.options.dashArray.split(/[, ]+/),l=[],d,h;for(h=0;h<i.length;h++){if(d=Number(i[h]),isNaN(d))return;l.push(d)}n.options._dashArray=l}else n.options._dashArray=n.options.dashArray},_requestRedraw:function(n){this._map&&(this._extendRedrawBounds(n),this._redrawRequest=this._redrawRequest||le(this._redraw,this))},_extendRedrawBounds:function(n){if(n._pxBounds){var i=(n.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new H,this._redrawBounds.extend(n._pxBounds.min.subtract([i,i])),this._redrawBounds.extend(n._pxBounds.max.add([i,i]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var n=this._redrawBounds;if(n){var i=n.getSize();this._ctx.clearRect(n.min.x,n.min.y,i.x,i.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var n,i=this._redrawBounds;if(this._ctx.save(),i){var l=i.getSize();this._ctx.beginPath(),this._ctx.rect(i.min.x,i.min.y,l.x,l.y),this._ctx.clip()}this._drawing=!0;for(var d=this._drawFirst;d;d=d.next)n=d.layer,(!i||n._pxBounds&&n._pxBounds.intersects(i))&&n._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(n,i){if(this._drawing){var l,d,h,p,N=n._parts,E=N.length,A=this._ctx;if(E){for(A.beginPath(),l=0;l<E;l++){for(d=0,h=N[l].length;d<h;d++)p=N[l][d],A[d?"lineTo":"moveTo"](p.x,p.y);i&&A.closePath()}this._fillStroke(A,n)}}},_updateCircle:function(n){if(!(!this._drawing||n._empty())){var i=n._point,l=this._ctx,d=Math.max(Math.round(n._radius),1),h=(Math.max(Math.round(n._radiusY),1)||d)/d;h!==1&&(l.save(),l.scale(1,h)),l.beginPath(),l.arc(i.x,i.y/h,d,0,Math.PI*2,!1),h!==1&&l.restore(),this._fillStroke(l,n)}},_fillStroke:function(n,i){var l=i.options;l.fill&&(n.globalAlpha=l.fillOpacity,n.fillStyle=l.fillColor||l.color,n.fill(l.fillRule||"evenodd")),l.stroke&&l.weight!==0&&(n.setLineDash&&n.setLineDash(i.options&&i.options._dashArray||[]),n.globalAlpha=l.opacity,n.lineWidth=l.weight,n.strokeStyle=l.color,n.lineCap=l.lineCap,n.lineJoin=l.lineJoin,n.stroke())},_onClick:function(n){for(var i=this._map.mouseEventToLayerPoint(n),l,d,h=this._drawFirst;h;h=h.next)l=h.layer,l.options.interactive&&l._containsPoint(i)&&(!(n.type==="click"||n.type==="preclick")||!this._map._draggableMoved(l))&&(d=l);this._fireEvent(d?[d]:!1,n)},_onMouseMove:function(n){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var i=this._map.mouseEventToLayerPoint(n);this._handleMouseHover(n,i)}},_handleMouseOut:function(n){var i=this._hoveredLayer;i&&(Le(this._container,"leaflet-interactive"),this._fireEvent([i],n,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(n,i){if(!this._mouseHoverThrottled){for(var l,d,h=this._drawFirst;h;h=h.next)l=h.layer,l.options.interactive&&l._containsPoint(i)&&(d=l);d!==this._hoveredLayer&&(this._handleMouseOut(n),d&&(ce(this._container,"leaflet-interactive"),this._fireEvent([d],n,"mouseover"),this._hoveredLayer=d)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,n),this._mouseHoverThrottled=!0,setTimeout(u(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(n,i,l){this._map._fireDOMEvent(i,l||i.type,n)},_bringToFront:function(n){var i=n._order;if(i){var l=i.next,d=i.prev;if(l)l.prev=d;else return;d?d.next=l:l&&(this._drawFirst=l),i.prev=this._drawLast,this._drawLast.next=i,i.next=null,this._drawLast=i,this._requestRedraw(n)}},_bringToBack:function(n){var i=n._order;if(i){var l=i.next,d=i.prev;if(d)d.next=l;else return;l?l.prev=d:d&&(this._drawLast=d),i.prev=null,i.next=this._drawFirst,this._drawFirst.prev=i,this._drawFirst=i,this._requestRedraw(n)}}});function Ju(n){return te.canvas?new $u(n):null}var ii=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(n){return document.createElement("<lvml:"+n+' class="lvml">')}}catch{}return function(n){return document.createElement("<"+n+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),vg={_initContainer:function(){this._container=xe("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Yt.prototype._update.call(this),this.fire("update"))},_initPath:function(n){var i=n._container=ii("shape");ce(i,"leaflet-vml-shape "+(this.options.className||"")),i.coordsize="1 1",n._path=ii("path"),i.appendChild(n._path),this._updateStyle(n),this._layers[m(n)]=n},_addPath:function(n){var i=n._container;this._container.appendChild(i),n.options.interactive&&n.addInteractiveTarget(i)},_removePath:function(n){var i=n._container;je(i),n.removeInteractiveTarget(i),delete this._layers[m(n)]},_updateStyle:function(n){var i=n._stroke,l=n._fill,d=n.options,h=n._container;h.stroked=!!d.stroke,h.filled=!!d.fill,d.stroke?(i||(i=n._stroke=ii("stroke")),h.appendChild(i),i.weight=d.weight+"px",i.color=d.color,i.opacity=d.opacity,d.dashArray?i.dashStyle=S(d.dashArray)?d.dashArray.join(" "):d.dashArray.replace(/( *, *)/g," "):i.dashStyle="",i.endcap=d.lineCap.replace("butt","flat"),i.joinstyle=d.lineJoin):i&&(h.removeChild(i),n._stroke=null),d.fill?(l||(l=n._fill=ii("fill")),h.appendChild(l),l.color=d.fillColor||d.color,l.opacity=d.fillOpacity):l&&(h.removeChild(l),n._fill=null)},_updateCircle:function(n){var i=n._point.round(),l=Math.round(n._radius),d=Math.round(n._radiusY||l);this._setPath(n,n._empty()?"M0 0":"AL "+i.x+","+i.y+" "+l+","+d+" 0,"+65535*360)},_setPath:function(n,i){n._path.v=i},_bringToFront:function(n){or(n._container)},_bringToBack:function(n){ar(n._container)}},vs=te.vml?ii:ir,si=Yt.extend({_initContainer:function(){this._container=vs("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=vs("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){je(this._container),ye(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Yt.prototype._update.call(this);var n=this._bounds,i=n.getSize(),l=this._container;(!this._svgSize||!this._svgSize.equals(i))&&(this._svgSize=i,l.setAttribute("width",i.x),l.setAttribute("height",i.y)),Me(l,n.min),l.setAttribute("viewBox",[n.min.x,n.min.y,i.x,i.y].join(" ")),this.fire("update")}},_initPath:function(n){var i=n._path=vs("path");n.options.className&&ce(i,n.options.className),n.options.interactive&&ce(i,"leaflet-interactive"),this._updateStyle(n),this._layers[m(n)]=n},_addPath:function(n){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(n._path),n.addInteractiveTarget(n._path)},_removePath:function(n){je(n._path),n.removeInteractiveTarget(n._path),delete this._layers[m(n)]},_updatePath:function(n){n._project(),n._update()},_updateStyle:function(n){var i=n._path,l=n.options;i&&(l.stroke?(i.setAttribute("stroke",l.color),i.setAttribute("stroke-opacity",l.opacity),i.setAttribute("stroke-width",l.weight),i.setAttribute("stroke-linecap",l.lineCap),i.setAttribute("stroke-linejoin",l.lineJoin),l.dashArray?i.setAttribute("stroke-dasharray",l.dashArray):i.removeAttribute("stroke-dasharray"),l.dashOffset?i.setAttribute("stroke-dashoffset",l.dashOffset):i.removeAttribute("stroke-dashoffset")):i.setAttribute("stroke","none"),l.fill?(i.setAttribute("fill",l.fillColor||l.color),i.setAttribute("fill-opacity",l.fillOpacity),i.setAttribute("fill-rule",l.fillRule||"evenodd")):i.setAttribute("fill","none"))},_updatePoly:function(n,i){this._setPath(n,es(n._parts,i))},_updateCircle:function(n){var i=n._point,l=Math.max(Math.round(n._radius),1),d=Math.max(Math.round(n._radiusY),1)||l,h="a"+l+","+d+" 0 1,0 ",p=n._empty()?"M0 0":"M"+(i.x-l)+","+i.y+h+l*2+",0 "+h+-l*2+",0 ";this._setPath(n,p)},_setPath:function(n,i){n._path.setAttribute("d",i)},_bringToFront:function(n){or(n._path)},_bringToBack:function(n){ar(n._path)}});te.vml&&si.include(vg);function qu(n){return te.svg||te.vml?new si(n):null}me.include({getRenderer:function(n){var i=n.options.renderer||this._getPaneRenderer(n.options.pane)||this.options.renderer||this._renderer;return i||(i=this._renderer=this._createRenderer()),this.hasLayer(i)||this.addLayer(i),i},_getPaneRenderer:function(n){if(n==="overlayPane"||n===void 0)return!1;var i=this._paneRenderers[n];return i===void 0&&(i=this._createRenderer({pane:n}),this._paneRenderers[n]=i),i},_createRenderer:function(n){return this.options.preferCanvas&&Ju(n)||qu(n)}});var Yu=ur.extend({initialize:function(n,i){ur.prototype.initialize.call(this,this._boundsToLatLngs(n),i)},setBounds:function(n){return this.setLatLngs(this._boundsToLatLngs(n))},_boundsToLatLngs:function(n){return n=re(n),[n.getSouthWest(),n.getNorthWest(),n.getNorthEast(),n.getSouthEast()]}});function yg(n,i){return new Yu(n,i)}si.create=vs,si.pointsToPath=es,qt.geometryToLayer=ds,qt.coordsToLatLng=wa,qt.coordsToLatLngs=hs,qt.latLngToCoords=ba,qt.latLngsToCoords=fs,qt.getFeature=dr,qt.asFeature=ms,me.mergeOptions({boxZoom:!0});var Ku=Ft.extend({initialize:function(n){this._map=n,this._container=n._container,this._pane=n._panes.overlayPane,this._resetStateTimeout=0,n.on("unload",this._destroy,this)},addHooks:function(){ae(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ye(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){je(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(n){if(!n.shiftKey||n.which!==1&&n.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Yr(),ia(),this._startPoint=this._map.mouseEventToContainerPoint(n),ae(document,{contextmenu:Bn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(n){this._moved||(this._moved=!0,this._box=xe("div","leaflet-zoom-box",this._container),ce(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(n);var i=new H(this._point,this._startPoint),l=i.getSize();Me(this._box,i.min),this._box.style.width=l.x+"px",this._box.style.height=l.y+"px"},_finish:function(){this._moved&&(je(this._box),Le(this._container,"leaflet-crosshair")),Kr(),sa(),ye(document,{contextmenu:Bn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(n){if(!(n.which!==1&&n.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(u(this._resetState,this),0);var i=new Q(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(i).fire("boxzoomend",{boxZoomBounds:i})}},_onKeyDown:function(n){n.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});me.addInitHook("addHandler","boxZoom",Ku),me.mergeOptions({doubleClickZoom:!0});var Qu=Ft.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(n){var i=this._map,l=i.getZoom(),d=i.options.zoomDelta,h=n.originalEvent.shiftKey?l-d:l+d;i.options.doubleClickZoom==="center"?i.setZoom(h):i.setZoomAround(n.containerPoint,h)}});me.addInitHook("addHandler","doubleClickZoom",Qu),me.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Xu=Ft.extend({addHooks:function(){if(!this._draggable){var n=this._map;this._draggable=new dn(n._mapPane,n._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),n.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),n.on("zoomend",this._onZoomEnd,this),n.whenReady(this._onZoomEnd,this))}ce(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Le(this._map._container,"leaflet-grab"),Le(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var n=this._map;if(n._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var i=re(this._map.options.maxBounds);this._offsetLimit=ne(this._map.latLngToContainerPoint(i.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(i.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;n.fire("movestart").fire("dragstart"),n.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(n){if(this._map.options.inertia){var i=this._lastTime=+new Date,l=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(l),this._times.push(i),this._prunePositions(i)}this._map.fire("move",n).fire("drag",n)},_prunePositions:function(n){for(;this._positions.length>1&&n-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var n=this._map.getSize().divideBy(2),i=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=i.subtract(n).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(n,i){return n-(n-i)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var n=this._draggable._newPos.subtract(this._draggable._startPos),i=this._offsetLimit;n.x<i.min.x&&(n.x=this._viscousLimit(n.x,i.min.x)),n.y<i.min.y&&(n.y=this._viscousLimit(n.y,i.min.y)),n.x>i.max.x&&(n.x=this._viscousLimit(n.x,i.max.x)),n.y>i.max.y&&(n.y=this._viscousLimit(n.y,i.max.y)),this._draggable._newPos=this._draggable._startPos.add(n)}},_onPreDragWrap:function(){var n=this._worldWidth,i=Math.round(n/2),l=this._initialWorldOffset,d=this._draggable._newPos.x,h=(d-i+l)%n+i-l,p=(d+i+l)%n-i-l,N=Math.abs(h+l)<Math.abs(p+l)?h:p;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=N},_onDragEnd:function(n){var i=this._map,l=i.options,d=!l.inertia||n.noInertia||this._times.length<2;if(i.fire("dragend",n),d)i.fire("moveend");else{this._prunePositions(+new Date);var h=this._lastPos.subtract(this._positions[0]),p=(this._lastTime-this._times[0])/1e3,N=l.easeLinearity,E=h.multiplyBy(N/p),A=E.distanceTo([0,0]),B=Math.min(l.inertiaMaxSpeed,A),$=E.multiplyBy(B/A),se=B/(l.inertiaDeceleration*N),de=$.multiplyBy(-se/2).round();!de.x&&!de.y?i.fire("moveend"):(de=i._limitOffset(de,i.options.maxBounds),le(function(){i.panBy(de,{duration:se,easeLinearity:N,noMoveStart:!0,animate:!0})}))}}});me.addInitHook("addHandler","dragging",Xu),me.mergeOptions({keyboard:!0,keyboardPanDelta:80});var ed=Ft.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(n){this._map=n,this._setPanDelta(n.options.keyboardPanDelta),this._setZoomDelta(n.options.zoomDelta)},addHooks:function(){var n=this._map._container;n.tabIndex<=0&&(n.tabIndex="0"),ae(n,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ye(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var n=document.body,i=document.documentElement,l=n.scrollTop||i.scrollTop,d=n.scrollLeft||i.scrollLeft;this._map._container.focus(),window.scrollTo(d,l)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(n){var i=this._panKeys={},l=this.keyCodes,d,h;for(d=0,h=l.left.length;d<h;d++)i[l.left[d]]=[-1*n,0];for(d=0,h=l.right.length;d<h;d++)i[l.right[d]]=[n,0];for(d=0,h=l.down.length;d<h;d++)i[l.down[d]]=[0,n];for(d=0,h=l.up.length;d<h;d++)i[l.up[d]]=[0,-1*n]},_setZoomDelta:function(n){var i=this._zoomKeys={},l=this.keyCodes,d,h;for(d=0,h=l.zoomIn.length;d<h;d++)i[l.zoomIn[d]]=n;for(d=0,h=l.zoomOut.length;d<h;d++)i[l.zoomOut[d]]=-n},_addHooks:function(){ae(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ye(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(n){if(!(n.altKey||n.ctrlKey||n.metaKey)){var i=n.keyCode,l=this._map,d;if(i in this._panKeys){if(!l._panAnim||!l._panAnim._inProgress)if(d=this._panKeys[i],n.shiftKey&&(d=P(d).multiplyBy(3)),l.options.maxBounds&&(d=l._limitOffset(P(d),l.options.maxBounds)),l.options.worldCopyJump){var h=l.wrapLatLng(l.unproject(l.project(l.getCenter()).add(d)));l.panTo(h)}else l.panBy(d)}else if(i in this._zoomKeys)l.setZoom(l.getZoom()+(n.shiftKey?3:1)*this._zoomKeys[i]);else if(i===27&&l._popup&&l._popup.options.closeOnEscapeKey)l.closePopup();else return;Bn(n)}}});me.addInitHook("addHandler","keyboard",ed),me.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var td=Ft.extend({addHooks:function(){ae(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ye(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(n){var i=ju(n),l=this._map.options.wheelDebounceTime;this._delta+=i,this._lastMousePos=this._map.mouseEventToContainerPoint(n),this._startTime||(this._startTime=+new Date);var d=Math.max(l-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(u(this._performZoom,this),d),Bn(n)},_performZoom:function(){var n=this._map,i=n.getZoom(),l=this._map.options.zoomSnap||0;n._stop();var d=this._delta/(this._map.options.wheelPxPerZoomLevel*4),h=4*Math.log(2/(1+Math.exp(-Math.abs(d))))/Math.LN2,p=l?Math.ceil(h/l)*l:h,N=n._limitZoom(i+(this._delta>0?p:-p))-i;this._delta=0,this._startTime=null,N&&(n.options.scrollWheelZoom==="center"?n.setZoom(i+N):n.setZoomAround(this._lastMousePos,i+N))}});me.addInitHook("addHandler","scrollWheelZoom",td);var _g=600;me.mergeOptions({tapHold:te.touchNative&&te.safari&&te.mobile,tapTolerance:15});var nd=Ft.extend({addHooks:function(){ae(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ye(this._map._container,"touchstart",this._onDown,this)},_onDown:function(n){if(clearTimeout(this._holdTimeout),n.touches.length===1){var i=n.touches[0];this._startPos=this._newPos=new O(i.clientX,i.clientY),this._holdTimeout=setTimeout(u(function(){this._cancel(),this._isTapValid()&&(ae(document,"touchend",We),ae(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",i))},this),_g),ae(document,"touchend touchcancel contextmenu",this._cancel,this),ae(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function n(){ye(document,"touchend",We),ye(document,"touchend touchcancel",n)},_cancel:function(){clearTimeout(this._holdTimeout),ye(document,"touchend touchcancel contextmenu",this._cancel,this),ye(document,"touchmove",this._onMove,this)},_onMove:function(n){var i=n.touches[0];this._newPos=new O(i.clientX,i.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(n,i){var l=new MouseEvent(n,{bubbles:!0,cancelable:!0,view:window,screenX:i.screenX,screenY:i.screenY,clientX:i.clientX,clientY:i.clientY});l._simulated=!0,i.target.dispatchEvent(l)}});me.addInitHook("addHandler","tapHold",nd),me.mergeOptions({touchZoom:te.touch,bounceAtZoomLimits:!0});var rd=Ft.extend({addHooks:function(){ce(this._map._container,"leaflet-touch-zoom"),ae(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Le(this._map._container,"leaflet-touch-zoom"),ye(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(n){var i=this._map;if(!(!n.touches||n.touches.length!==2||i._animatingZoom||this._zooming)){var l=i.mouseEventToContainerPoint(n.touches[0]),d=i.mouseEventToContainerPoint(n.touches[1]);this._centerPoint=i.getSize()._divideBy(2),this._startLatLng=i.containerPointToLatLng(this._centerPoint),i.options.touchZoom!=="center"&&(this._pinchStartLatLng=i.containerPointToLatLng(l.add(d)._divideBy(2))),this._startDist=l.distanceTo(d),this._startZoom=i.getZoom(),this._moved=!1,this._zooming=!0,i._stop(),ae(document,"touchmove",this._onTouchMove,this),ae(document,"touchend touchcancel",this._onTouchEnd,this),We(n)}},_onTouchMove:function(n){if(!(!n.touches||n.touches.length!==2||!this._zooming)){var i=this._map,l=i.mouseEventToContainerPoint(n.touches[0]),d=i.mouseEventToContainerPoint(n.touches[1]),h=l.distanceTo(d)/this._startDist;if(this._zoom=i.getScaleZoom(h,this._startZoom),!i.options.bounceAtZoomLimits&&(this._zoom<i.getMinZoom()&&h<1||this._zoom>i.getMaxZoom()&&h>1)&&(this._zoom=i._limitZoom(this._zoom)),i.options.touchZoom==="center"){if(this._center=this._startLatLng,h===1)return}else{var p=l._add(d)._divideBy(2)._subtract(this._centerPoint);if(h===1&&p.x===0&&p.y===0)return;this._center=i.unproject(i.project(this._pinchStartLatLng,this._zoom).subtract(p),this._zoom)}this._moved||(i._moveStart(!0,!1),this._moved=!0),fe(this._animRequest);var N=u(i._move,i,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=le(N,this,!0),We(n)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,fe(this._animRequest),ye(document,"touchmove",this._onTouchMove,this),ye(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});me.addInitHook("addHandler","touchZoom",rd),me.BoxZoom=Ku,me.DoubleClickZoom=Qu,me.Drag=Xu,me.Keyboard=ed,me.ScrollWheelZoom=td,me.TapHold=nd,me.TouchZoom=rd,r.Bounds=H,r.Browser=te,r.CRS=Ee,r.Canvas=$u,r.Circle=_a,r.CircleMarker=us,r.Class=M,r.Control=Pt,r.DivIcon=Vu,r.DivOverlay=Ut,r.DomEvent=Dp,r.DomUtil=Rp,r.Draggable=dn,r.Evented=ee,r.FeatureGroup=$t,r.GeoJSON=qt,r.GridLayer=ri,r.Handler=Ft,r.Icon=cr,r.ImageOverlay=ps,r.LatLng=J,r.LatLngBounds=Q,r.Layer=Et,r.LayerGroup=lr,r.LineUtil=Kp,r.Map=me,r.Marker=cs,r.Mixin=Hp,r.Path=hn,r.Point=O,r.PolyUtil=Gp,r.Polygon=ur,r.Polyline=Jt,r.Popup=gs,r.PosAnimation=ku,r.Projection=Qp,r.Rectangle=Yu,r.Renderer=Yt,r.SVG=si,r.SVGOverlay=Wu,r.TileLayer=hr,r.Tooltip=xs,r.Transformation=ct,r.Util=we,r.VideoOverlay=Zu,r.bind=u,r.bounds=ne,r.canvas=Ju,r.circle=og,r.circleMarker=sg,r.control=ei,r.divIcon=pg,r.extend=o,r.featureGroup=ng,r.geoJSON=Uu,r.geoJson=cg,r.gridLayer=gg,r.icon=rg,r.imageOverlay=ug,r.latLng=K,r.latLngBounds=re,r.layerGroup=tg,r.map=Bp,r.marker=ig,r.point=P,r.polygon=lg,r.polyline=ag,r.popup=fg,r.rectangle=yg,r.setOptions=C,r.stamp=m,r.svg=qu,r.svgOverlay=hg,r.tileLayer=Hu,r.tooltip=mg,r.transformation=Ct,r.version=s,r.videoOverlay=dg;var wg=window.L;r.noConflict=function(){return window.L=wg,this},window.L=r})})(Yl,Yl.exports);var Gr=Yl.exports;const Yy=Sh(Gr);function $o(e,t,r){return Object.freeze({instance:e,context:t,container:r})}function Kc(e,t){return t==null?function(s,o){const c=I.useRef();return c.current||(c.current=e(s,o)),c}:function(s,o){const c=I.useRef();c.current||(c.current=e(s,o));const u=I.useRef(s),{instance:f}=c.current;return I.useEffect(function(){u.current!==s&&(t(f,s,u.current),u.current=s)},[f,s,o]),c}}function Ky(e,t){I.useEffect(function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){var c;(c=t.layerContainer)==null||c.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}function sp(e){return function(r){const s=rp(),o=e(Yc(r,s),s);return ep(s.map,r.attribution),ip(o.current,r.eventHandlers),Ky(o.current,s),o}}function Qy(e,t){const r=Kc(e,t),s=sp(r);return Gy(s)}function op(e,t){const r=Kc(e),s=qy(r,t);return $y(s)}function Xy(e,t){const r=Kc(e,t),s=sp(r);return Jy(s)}function e0(e,t,r){const{opacity:s,zIndex:o}=t;s!=null&&s!==r.opacity&&e.setOpacity(s),o!=null&&o!==r.zIndex&&e.setZIndex(o)}function Kl(){return Kl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Kl.apply(this,arguments)}function t0({bounds:e,boundsOptions:t,center:r,children:s,className:o,id:c,placeholder:u,style:f,whenReady:m,zoom:g,...x},v){const[y]=I.useState({className:o,id:c,style:f}),[j,k]=I.useState(null);I.useImperativeHandle(v,()=>(j==null?void 0:j.map)??null,[j]);const C=I.useCallback(b=>{if(b!==null&&j===null){const _=new Gr.Map(b,x);r!=null&&g!=null?_.setView(r,g):e!=null&&_.fitBounds(e,t),m!=null&&_.whenReady(m),k(Vy(_))}},[]);I.useEffect(()=>()=>{j==null||j.map.remove()},[j]);const R=j?Qs.createElement(np,{value:j},s):u??null;return Qs.createElement("div",Kl({},y,{ref:C}),R)}const n0=I.forwardRef(t0),r0=Qy(function({position:t,...r},s){const o=new Gr.Marker(t,r);return $o(o,Hy(s,{overlayContainer:o}))},function(t,r,s){r.position!==s.position&&t.setLatLng(r.position),r.icon!=null&&r.icon!==s.icon&&t.setIcon(r.icon),r.zIndexOffset!=null&&r.zIndexOffset!==s.zIndexOffset&&t.setZIndexOffset(r.zIndexOffset),r.opacity!=null&&r.opacity!==s.opacity&&t.setOpacity(r.opacity),t.dragging!=null&&r.draggable!==s.draggable&&(r.draggable===!0?t.dragging.enable():t.dragging.disable())}),i0=op(function(t,r){const s=new Gr.Popup(t,r.overlayContainer);return $o(s,r)},function(t,r,{position:s},o){I.useEffect(function(){const{instance:u}=t;function f(g){g.popup===u&&(u.update(),o(!0))}function m(g){g.popup===u&&o(!1)}return r.map.on({popupopen:f,popupclose:m}),r.overlayContainer==null?(s!=null&&u.setLatLng(s),u.openOn(r.map)):r.overlayContainer.bindPopup(u),function(){var x;r.map.off({popupopen:f,popupclose:m}),(x=r.overlayContainer)==null||x.unbindPopup(),r.map.removeLayer(u)}},[t,r,o,s])}),s0=Xy(function({url:t,...r},s){const o=new Gr.TileLayer(t,Yc(r,s));return $o(o,s)},function(t,r,s){e0(t,r,s);const{url:o}=r;o!=null&&o!==s.url&&t.setUrl(o)}),o0=op(function(t,r){const s=new Gr.Tooltip(t,r.overlayContainer);return $o(s,r)},function(t,r,{position:s},o){I.useEffect(function(){const u=r.overlayContainer;if(u==null)return;const{instance:f}=t,m=x=>{x.tooltip===f&&(s!=null&&f.setLatLng(s),f.update(),o(!0))},g=x=>{x.tooltip===f&&o(!1)};return u.on({tooltipopen:m,tooltipclose:g}),u.bindTooltip(f),function(){u.off({tooltipopen:m,tooltipclose:g}),u._map!=null&&u.unbindTooltip()}},[t,r,o,s])}),a0={"Tech / AI":"#3b82f6",Financial:"#ec4899",Conflicts:"#eab308",Geopolitical:"#94a3b8"},l0={"Tech / AI":"",Financial:"",Conflicts:"",Geopolitical:""},Ei={"extremely-negative":"#ff1f1f","very-negative":"#ef4444",negative:"#f97316","somewhat-negative":"#facc15",neutral:"#64748b",interesting:"#3b82f6",positive:"#22c55e","very-positive":"#10b981"},gr=e=>{const t=String(e||"neutral").toLowerCase().trim();return{1:"extremely-negative",2:"very-negative",3:"negative",4:"somewhat-negative",5:"neutral",6:"interesting",7:"positive",8:"very-positive",tension:"negative",conflict:"extremely-negative"}[t]||t},c0=e=>{const t=a0[e.category]||"#94a3b8",r=gr(e.sentiment),s=Ei[r]||Ei.neutral,o=l0[e.category]||"";return Yy.divIcon({className:"custom-map-pin",html:`
      <div style="
        width: 32px; 
        height: 32px; 
        background: linear-gradient(135deg, ${s} 0%, ${t} 100%); 
        border: 3px solid white; 
        border-radius: 50%;
        box-shadow: 0 4px 15px rgba(0,0,0,0.4), 0 0 20px ${s}40;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 16px;
        position: relative;
        transition: all 0.3s ease;
        cursor: pointer;
      " onmouseover="this.style.transform='scale(1.2)'" onmouseout="this.style.transform='scale(1)'">
        <span style="z-index: 2; line-height: 1; text-shadow: 0 1px 2px rgba(0,0,0,0.5);">${o}</span>
         <div style="
            position: absolute;
            inset: -6px;
            border-radius: 50%;
            border: 2px solid ${s};
            opacity: 0.8;
            animation: pulse 2s infinite;
         "></div>
      </div>
      <style>
        @keyframes pulse {
          0% { transform: scale(1); opacity: 0.8; }
          50% { transform: scale(1.1); opacity: 0.4; }
          100% { transform: scale(1); opacity: 0.8; }
        }
      </style>
    `,iconSize:[32,32],iconAnchor:[16,16]})};function u0(){const{mapPoints:e,isProcessing:t,isProcessingSection:r,refreshSection:s,jsonError:o,clearJsonError:c,retryJsonSection:u,sectionGenerationTimes:f}=gt(),m=r.map&&!t,g=I.useMemo(()=>{const v=[];return v.push(a.jsx(St,{tone:e.length>0?"neutral":"warning",children:e.length>0?`${e.length} locations`:"No map data"},"count")),f.map&&v.push(a.jsx(St,{tone:"info",children:Xi(f.map)},"duration")),v},[e.length,f.map]),x=I.useMemo(()=>e.length===0||t?null:a.jsx(Ho,{onClick:()=>s("map",!0),className:"opacity-80 hover:opacity-100"}),[t,e.length,s]);return a.jsxs(Wo,{className:"h-[500px] flex flex-col",isLoading:m,loadingOverlayContent:a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-8 h-8 border-2 border-accent-primary border-t-transparent rounded-full animate-spin mb-2"}),a.jsx("span",{className:"text-[0.6rem] uppercase tracking-widest font-bold text-accent-primary text-center px-4",children:"Recalculating Geo-Coordinates..."})]}),children:[a.jsx(Vo,{className:"mb-6",title:"Geospatial Awareness",icon:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})]}),badges:g,actions:x}),o.hasError&&o.sectionId==="map"&&a.jsx(qc,{error:o.error,onRetry:()=>u("map"),onCancel:c,countdown:5,isRetrying:r.map}),a.jsx("div",{className:"flex-1 rounded-xl overflow-hidden border border-white/5 bg-[#0a0c10]",children:a.jsxs(n0,{center:[20,0],zoom:2,style:{height:"100%",width:"100%",background:"#0a0c10"},zoomControl:!0,scrollWheelZoom:!0,doubleClickZoom:!0,children:[a.jsx(s0,{url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors  <a href="https://carto.com/attributions">CARTO</a>'}),(e||[]).map(v=>a.jsxs(r0,{position:[v.lat||0,v.lng||0],icon:c0(v),children:[a.jsx(o0,{direction:"top",offset:[0,-16],opacity:1,className:"custom-tooltip",permanent:!1,children:a.jsxs("div",{className:"text-center",children:[a.jsx("span",{className:"font-bold text-xs block",children:v.title}),a.jsxs("span",{className:"text-[10px] opacity-70",children:["(",v.category,")"]}),a.jsx("span",{className:"text-[9px] block mt-1",style:{color:Ei[gr(v.sentiment)]},children:gr(v.sentiment).replace("-"," ").toUpperCase()})]})}),a.jsx(i0,{className:"custom-popup",maxWidth:250,children:a.jsxs("div",{className:"p-3 max-w-[250px]",children:[a.jsx("h4",{className:"font-bold text-slate-900 text-sm leading-tight mb-2",children:v.title}),a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx("span",{className:"text-[8px] font-bold px-2 py-1 rounded",style:{color:Ei[gr(v.sentiment)]||"#64748b",backgroundColor:`${Ei[gr(v.sentiment)]||"#64748b"}20`},children:gr(v.sentiment).replace("-"," ").toUpperCase()}),a.jsx("span",{className:"text-[10px] uppercase text-slate-400 tracking-wider",children:v.category})]}),v.description&&a.jsx("p",{className:"text-[11px] text-slate-600 leading-snug mb-3",children:v.description}),v.sourceLink&&a.jsx("a",{href:v.sourceLink,target:"_blank",rel:"noopener noreferrer",className:"text-[10px] text-blue-600 hover:text-blue-800 underline flex items-center gap-1",children:"Read source "})]})})]},v.id))]})})]})}function d0(){const{foreignRelations:e,addRelation:t,removeRelation:r,isProcessing:s,isProcessingSection:o,refreshSection:c,jsonError:u,clearJsonError:f,retryJsonSection:m,sectionGenerationTimes:g}=gt(),[x,v]=I.useState(!1),[y,j]=I.useState({countryA:"",countryB:"",topic:""}),k=o.relations&&!s,C=I.useMemo(()=>{const S=[];return e.length>0?S.push(a.jsxs(St,{tone:"neutral",children:[e.length," trackers"]},"count")):S.push(a.jsx(St,{tone:"warning",children:"No trackers"},"empty")),g.relations&&S.push(a.jsx(St,{tone:"info",children:Xi(g.relations)},"duration")),S},[e.length,g.relations]),R=I.useMemo(()=>{const S=[];return e.length>0&&!s&&S.push(a.jsx(Ho,{label:"Update",onClick:()=>c("relations",!0),className:"opacity-80 hover:opacity-100"},"refresh")),S.push(a.jsx("button",{onClick:()=>v(!x),className:`text-[0.65rem] uppercase tracking-widest font-bold px-3 py-1.5 rounded-lg border transition-all duration-300 ${x?"bg-red-500/20 border-red-500/50 text-red-200 hover:bg-red-500/40":"bg-white/5 border-white/10 text-white hover:bg-accent-primary hover:border-accent-primary"}`,children:x?"Close":"+ Add"},"toggle")),S.length===0?null:a.jsx("div",{className:"flex items-center gap-3",children:S})},[e.length,x,s,c]),b=()=>{y.countryA&&y.countryB&&y.topic&&(t(y.countryA,y.countryB,y.topic),j({countryA:"",countryB:"",topic:""}),v(!1))},_=S=>{const T=S.trim().toLowerCase(),F={1:"extremely-negative",2:"very-negative",3:"negative",4:"somewhat-negative",5:"neutral",6:"interesting",7:"positive",8:"very-positive",tension:"negative",conflict:"extremely-negative"}[T]||T;return F.includes("extremely-negative")?{color:"#ff1f1f",borderColor:"rgba(255, 31, 31, 0.4)",backgroundColor:"rgba(255, 31, 31, 0.15)",text:"EXTREMELY NEGATIVE"}:F.includes("very-negative")?{color:"#ef4444",borderColor:"rgba(239, 68, 68, 0.4)",backgroundColor:"rgba(239, 68, 68, 0.15)",text:"VERY NEGATIVE"}:F.includes("negative")?{color:"#f97316",borderColor:"rgba(249, 115, 22, 0.4)",backgroundColor:"rgba(249, 115, 22, 0.15)",text:"NEGATIVE"}:F.includes("somewhat-negative")?{color:"#facc15",borderColor:"rgba(250, 204, 21, 0.4)",backgroundColor:"rgba(250, 204, 21, 0.15)",text:"SOMEWHAT NEGATIVE"}:F.includes("neutral")?{color:"#94a3b8",borderColor:"rgba(148, 163, 184, 0.4)",backgroundColor:"rgba(148, 163, 184, 0.15)",text:"NEUTRAL"}:F.includes("interesting")?{color:"#3b82f6",borderColor:"rgba(59, 130, 246, 0.4)",backgroundColor:"rgba(59, 130, 246, 0.15)",text:"INTERESTING"}:F.includes("very-positive")?{color:"#10b981",borderColor:"rgba(16, 185, 129, 0.4)",backgroundColor:"rgba(16, 185, 129, 0.15)",text:"VERY POSITIVE"}:F.includes("positive")?{color:"#22c55e",borderColor:"rgba(34, 197, 94, 0.4)",backgroundColor:"rgba(34, 197, 94, 0.15)",text:"POSITIVE"}:{color:"var(--crit-gray)",borderColor:"rgba(148, 163, 184, 0.2)",backgroundColor:"rgba(148, 163, 184, 0.05)",text:F.toUpperCase()}};return a.jsxs(Wo,{isLoading:k,loadingOverlayContent:a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-8 h-8 border-2 border-purple-500 border-t-transparent rounded-full animate-spin mb-2"}),a.jsx("span",{className:"text-[0.6rem] uppercase tracking-widest font-bold text-purple-400",children:"Updating Relation Status..."})]}),children:[a.jsx(Vo,{className:"mb-6",title:"Foreign Relations",accentClassName:"bg-purple-500",icon:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("path",{d:"M2 12h20"}),a.jsx("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})]}),badges:C,actions:R}),x&&a.jsxs("div",{className:"mb-6 bg-white/5 p-4 rounded-lg border border-white/10 animate-in slide-in-from-top-2",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[a.jsx("input",{placeholder:"Country A (e.g. USA)",className:"bg-black/20 border border-white/10 rounded px-3 py-2 text-sm text-white focus:border-accent-primary outline-none",value:y.countryA,onChange:S=>j({...y,countryA:S.target.value})}),a.jsx("input",{placeholder:"Country B (e.g. China)",className:"bg-black/20 border border-white/10 rounded px-3 py-2 text-sm text-white focus:border-accent-primary outline-none",value:y.countryB,onChange:S=>j({...y,countryB:S.target.value})})]}),a.jsx("input",{placeholder:"Topic (e.g. Trade Tariffs)",className:"w-full bg-black/20 border border-white/10 rounded px-3 py-2 text-sm text-white focus:border-accent-primary outline-none mb-3",value:y.topic,onChange:S=>j({...y,topic:S.target.value})}),a.jsx("button",{onClick:b,disabled:!y.countryA||!y.countryB,className:"w-full bg-accent-primary hover:bg-accent-primary/80 text-white font-bold py-2 rounded text-xs uppercase tracking-widest transition-colors disabled:opacity-50",children:"Initialize Tracker"})]}),u.hasError&&u.sectionId==="relations"&&a.jsx(qc,{error:u.error,onRetry:()=>m("relations"),onCancel:f,countdown:5,isRetrying:o.relations}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.map(S=>a.jsxs("div",{className:"group relative bg-white/[0.03] hover:bg-white/[0.06] border border-white/5 p-4 rounded-xl transition-all flex flex-col justify-between h-full",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsxs("div",{className:"flex flex-col gap-0.5",children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx("span",{className:"text-sm font-bold text-white tracking-tight",children:S.countryA}),a.jsx("span",{className:"text-text-secondary text-[10px] opacity-40",children:"VS"}),a.jsx("span",{className:"text-sm font-bold text-white tracking-tight",children:S.countryB})]}),a.jsx("p",{className:"text-[10px] font-mono font-bold text-purple-400 uppercase tracking-wider opacity-80",children:S.topic})]}),(()=>{const T=_(String(S.sentiment||"neutral"));return a.jsx("span",{className:"text-[8px] px-2 py-1 rounded-md border uppercase font-bold tracking-[0.05em] shrink-0 whitespace-nowrap",style:{color:T.color,borderColor:T.borderColor,backgroundColor:T.backgroundColor},children:T.text})})()]}),a.jsx("div",{className:"relative min-h-[3rem]",children:s?a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"h-3 w-full bg-white/5 animate-pulse rounded"}),a.jsx("div",{className:"h-3 w-[80%] bg-white/5 animate-pulse rounded"})]}):a.jsx("div",{className:"bg-white/[0.02] border border-white/5 rounded-lg p-2.5 mt-1",children:a.jsx("p",{className:"text-[11px] text-text-secondary leading-normal line-clamp-4 group-hover:line-clamp-none transition-all duration-300",children:S.status})})})]}),a.jsx("button",{onClick:()=>r(S.id),className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500/80 hover:bg-red-500 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity shadow-lg z-10 border border-white/20",title:"Remove Tracker",children:a.jsx("span",{className:"text-sm leading-none font-bold",children:""})})]},S.id)),e.length===0&&a.jsx("div",{className:"col-span-full text-center py-12 text-text-secondary italic text-sm border border-dashed border-white/10 rounded-xl",children:"No active relation trackers. Add one above."})]})]})}const h0=["Recalibrating the flux capacitor...","Bribing the algorithm with virtual cookies...","Teaching the AI the difference between news and noise...","Downloading more dedikated wam... .","Herding digital cats into structured data...","Decoding the matrix...","Optimizing neural pathways for maximum insight...","Recalibrating Interdimensional Entities...","Playing a quick game of chess...","Calculating the meaning of life, the universe...","Asking the crystal ball for future trends...","Scanning for hidden patterns in the void...","Converting electricity into geopolitical intelligence...","Secretly asking another AI to do all the work...","Deciphering all of human history...","Reconsidering and second guessing every decision...","Polishing the pixels so they look good...","Hacking into the mainframe and stealing all the crypto...","Downloading the ENTIRE INTERNET on dial-up...","Increasing synergy while decreasing entropy...","Inspecting each cpu cycle for problems...","Sweeping errors under the rug...","Preparing plans for world domination...","Executing plans for world domination...","Pretending to do work while actually just scrolling social media..."],Xa=[{id:"rss",name:"RSS Feeds",icon:""},{id:"narrative",name:"Current Narrative",icon:""},{id:"signals",name:"Signals and Insights",icon:""},{id:"insights",name:"Future Trajectory Analysis",icon:""},{id:"relations",name:"Foreign Relations",icon:""},{id:"bigPicture",name:"The Big Picture",icon:""},{id:"map",name:"Map",icon:""}];function f0(){const{isProcessing:e,processingStatus:t,aiConfig:r,isProcessingSection:s,sectionFailures:o,completedSections:c}=gt(),[u,f]=I.useState(0),m=I.useMemo(()=>[...h0].sort(()=>Math.random()-.5),[e]);return I.useEffect(()=>{let g;return e&&(f(0),g=setInterval(()=>{f(x=>(x+1)%m.length)},2500)),()=>{clearInterval(g)}},[e,m.length]),e?a.jsx("div",{className:"fixed inset-0 z-[100] flex flex-col items-center justify-center p-8 pointer-events-none animate-in fade-in duration-500",children:a.jsxs("div",{className:"bg-bg-darker/60 backdrop-blur-xl border border-white/10 p-20 rounded-[3rem] shadow-[0_0_100px_rgba(0,0,0,0.5)] flex flex-col items-center justify-center max-w-3xl w-full pointer-events-auto",children:[a.jsxs("div",{className:"relative mb-8",children:[a.jsx("div",{className:"absolute inset-0 bg-accent-primary/30 blur-[100px] rounded-full animate-pulse"}),a.jsx("div",{className:"relative w-24 h-24 border-t-2 border-r-2 border-accent-primary rounded-full animate-spin shadow-[0_0_50px_rgba(59,130,246,0.3)]"}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-accent-primary",children:a.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm0 18a8 8 0 1 1 8-8 8 8 0 0 1-8 8z"}),a.jsx("path",{d:"M12 6v6l4 2"})]})})]}),a.jsx("h2",{className:"text-3xl font-display font-bold text-white mb-4 tracking-tighter uppercase text-center px-4",children:"Processing"}),a.jsxs("div",{className:"flex flex-col items-center gap-3 w-full",children:[a.jsx("div",{className:"h-[1px] w-32 bg-gradient-to-r from-transparent via-accent-primary to-transparent opacity-50 mb-2"}),a.jsx("p",{className:"text-base text-accent-secondary font-mono animate-pulse uppercase tracking-[0.2em] font-bold text-center break-words max-w-full",children:m[u]}),a.jsxs("div",{className:"mt-6 w-full max-w-md",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h3",{className:"text-sm font-semibold text-text-secondary uppercase tracking-[0.1em]",children:"Progress Overview"}),a.jsxs("div",{className:"text-xs text-accent-secondary font-mono",children:[c.size,"/",Xa.length," Complete"]})]}),a.jsx("div",{className:"w-full bg-black/30 rounded-full h-2 mb-4 overflow-hidden",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-accent-primary to-green-500 transition-all duration-500 ease-out",style:{width:`${c.size/Xa.length*100}%`}})}),a.jsx("div",{className:"space-y-2",children:Xa.map(g=>{const x=s[g.id],v=c.has(g.id),y=o[g.id],j=y==null?void 0:y.hasFailed,k=y==null?void 0:y.isRetrying;return a.jsxs("div",{className:`
                      flex items-center gap-3 px-3 py-2 rounded-lg border transition-all duration-500
                      ${x?"bg-accent-primary/15 border-accent-primary/40 shadow-[0_0_25px_rgba(59,130,246,0.3)]":v?"bg-black/20 border-white/5 opacity-60":j?k?"bg-yellow-500/10 border-yellow-500/30 shadow-[0_0_15px_rgba(234,179,8,0.2)]":"bg-red-500/10 border-red-500/30 shadow-[0_0_15px_rgba(239,68,68,0.2)]":"bg-black/20 border-white/5 opacity-60"}
                    `,children:[a.jsx("span",{className:`
                      text-lg transition-all duration-300
                      ${v?"filter brightness-125":""}
                      
                    `,children:j?k?"":"":g.icon}),a.jsx("span",{className:`
                      text-sm font-medium flex-1 transition-all duration-300
                      ${x?"text-accent-primary font-semibold":v?"text-text-secondary":j?k?"text-yellow-400":"text-red-400":"text-text-secondary"}
                    `,children:g.name}),x?a.jsx("div",{className:"flex items-center gap-1",children:a.jsx("div",{className:"w-2 h-2 bg-accent-primary rounded-full"})}):v?a.jsx("div",{className:"flex items-center gap-1",children:a.jsx("svg",{className:"w-4 h-4 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}):j?a.jsx("div",{className:"flex items-center gap-1",children:k?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full"}),a.jsx("span",{className:"text-[0.55rem] text-yellow-400 font-mono",children:"Retrying..."})]}):a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"w-4 h-4 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),a.jsx("span",{className:"text-[0.55rem] text-red-400 font-mono",children:"Failed"})]})}):a.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full opacity-50"})]},g.id)})})]}),a.jsxs("div",{className:"mt-4 px-4 py-2 bg-black/20 rounded-lg border border-white/5",children:[a.jsx("p",{className:"text-[10px] text-text-secondary uppercase tracking-[0.4em] opacity-80 font-bold text-center",children:r.model}),a.jsx("p",{className:"text-[10px] text-text-secondary uppercase tracking-[0.4em] opacity-80 font-bold text-center",children:t})]})]})]})}):null}function m0(){const{aiConfig:e,availableModels:t,updateAiConfig:r,fetchAvailableModels:s}=gt(),[o,c]=I.useState(!1),[u,f]=I.useState(e),[m,g]=I.useState(!1),[x,v]=I.useState(!1),[y,j]=I.useState(null),[k,C]=I.useState(e.customSentimentWeights||null);I.useEffect(()=>{o&&((async()=>{try{await s(),j(null)}catch{j("Ollama service is not running or not accessible")}})(),f(e))},[o,s,e]);const R=t.length===0||t.some(D=>{const U=u.model.toLowerCase().trim(),ie=D.toLowerCase();return ie===U||ie===`${U}:latest`||ie.split(":")[0]===U}),b=()=>{navigator.clipboard.writeText(`ollama pull ${u.model}`),g(!0),setTimeout(()=>g(!1),2e3)},_=()=>{r(u),c(!1)},S=D=>{f({...u,sentimentProfile:D,customSentimentWeights:void 0}),v(!1)},T=(D,U)=>{const ie={...k||{},[D]:U};C(ie),f({...u,sentimentProfile:"custom",customSentimentWeights:ie})},z=()=>{f({...u,sentimentProfile:"balanced",customSentimentWeights:void 0}),v(!1),C(null)},F=Gc(u.sentimentProfile||"balanced");return o?a.jsx(Go,{isOpen:o,onClose:()=>c(!1),modalId:"ai-settings-modal",children:a.jsxs("div",{className:"bg-bg-card border border-white/10 rounded-2xl p-8 max-w-4xl w-full max-h-[90vh] overflow-y-auto relative",children:[a.jsxs("h3",{className:"text-2xl font-display font-bold text-white mb-6 flex items-center gap-3",children:[a.jsx("span",{className:"w-1 h-6 bg-accent-primary rounded-full"}),"AI Engine Parameters"]}),a.jsxs("div",{className:"space-y-6",children:[y&&a.jsxs("div",{className:"p-6 bg-red-500/10 border border-red-500/20 rounded-xl",children:[a.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"text-red-400 flex-shrink-0 mt-0.5",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),a.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm text-red-400 font-semibold mb-1",children:"Ollama Not Detected"}),a.jsx("p",{className:"text-xs text-red-300",children:"SignalFrame requires Ollama to be installed and running on your local machine"})]})]}),a.jsxs("div",{className:"bg-black/40 rounded-lg p-4 gap-3 mb-4",children:[a.jsx("h5",{className:"text-xs font-semibold text-text-primary uppercase tracking-wider mb-3",children:"System Requirements"}),a.jsxs("div",{className:"grid grid-cols-1 gap-3 text-xs",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-text-tertiary font-bold",children:"GPU:"}),a.jsxs("span",{className:"text-text-primary ml-2",children:["NVIDIA RTX 3060+ ",a.jsx("span",{className:"text-text-secondary italic",children:"(A GPU with at least 12GB VRAM is recommended for most thinking models. Tiny or small models may work on less powerful hardware with mixed results.)"})]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-text-tertiary font-bold",children:"Storage:"}),a.jsx("span",{className:"text-text-primary ml-2",children:"~10-20GB for AI models"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-text-tertiary font-bold",children:"Internet Connection:"}),a.jsx("span",{className:"text-text-primary ml-2",children:"For AI model and RSS feed downloads. (not required to generate AI responses)"})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-black/40 rounded-lg p-4",children:[a.jsx("h5",{className:"text-xs font-semibold text-text-primary uppercase tracking-wider mb-3",children:"Installation Steps"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"border-l-2 border-blue-500/30 pl-3",children:[a.jsx("div",{className:"flex items-center gap-2 mb-2",children:a.jsx("span",{className:"text-xs bg-blue-500/20 text-blue-300 px-2 py-1 rounded font-mono",children:"Windows"})}),a.jsxs("ol",{className:"text-xs text-text-secondary space-y-1 ml-4",children:[a.jsxs("li",{children:["1. Download from ",a.jsx("a",{href:"https://ollama.com/download/windows",target:"_blank",rel:"noopener noreferrer",className:"text-accent-primary hover:underline",children:"ollama.com/download/windows"})]}),a.jsx("li",{children:"2. Run the installer and follow setup wizard"}),a.jsx("li",{children:"3. Ollama starts automatically in background"})]})]}),a.jsxs("div",{className:"border-l-2 border-green-500/30 pl-3",children:[a.jsx("div",{className:"flex items-center gap-2 mb-2",children:a.jsx("span",{className:"text-xs bg-green-500/20 text-green-300 px-2 py-1 rounded font-mono",children:"macOS"})}),a.jsxs("ol",{className:"text-xs text-text-secondary space-y-1 ml-4",children:[a.jsxs("li",{children:["1. Download from ",a.jsx("a",{href:"https://ollama.com/download/mac",target:"_blank",rel:"noopener noreferrer",className:"text-accent-primary hover:underline",children:"ollama.com/download/mac"})]}),a.jsx("li",{children:"2. Open DMG and drag Ollama to Applications"}),a.jsx("li",{children:"3. Launch Ollama from Applications folder"})]})]}),a.jsxs("div",{className:"border-l-2 border-yellow-500/30 pl-3",children:[a.jsx("div",{className:"flex items-center gap-2 mb-2",children:a.jsx("span",{className:"text-xs bg-yellow-500/20 text-yellow-300 px-2 py-1 rounded font-mono",children:"Linux"})}),a.jsx("div",{className:"bg-black/60 rounded p-2 mt-2",children:a.jsx("code",{className:"text-xs text-green-400 font-mono",children:"curl -fsSL https://ollama.com/install.sh | sh"})})]})]})]}),a.jsxs("div",{className:"bg-black/40 rounded-lg p-4",children:[a.jsx("h5",{className:"text-xs font-semibold text-text-primary uppercase tracking-wider mb-3",children:"Verify Installation"}),a.jsx("p",{className:"text-xs text-text-secondary mb-2",children:"Open terminal/command prompt and run:"}),a.jsx("div",{className:"bg-black/60 rounded p-2 mb-3",children:a.jsx("code",{className:"text-xs text-green-400 font-mono",children:"ollama list"})}),a.jsx("p",{className:"text-xs text-text-tertiary",children:'If you see "Error: connect ECONNREFUSED 127.0.0.1:11434", restart Ollama'})]}),a.jsxs("div",{className:"bg-black/40 rounded-lg p-4",children:[a.jsx("h5",{className:"text-xs font-semibold text-text-primary uppercase tracking-wider mb-3",children:"Download an AI Model"}),a.jsxs("p",{className:"text-xs text-text-secondary mb-3",children:["One billion parameters roughly equals 1GB of VRAM when using a moderate amount of context length. Exceeding this will force the CPU to process data the GPU cannot handle on its own, which is ",a.jsx("b",{children:"significantly slower"})," than only GPU processing."]}),a.jsx("p",{className:"text-xs text-text-secondary mb-3",children:"Try to have at least 1GB spare VRAM for other applications."}),a.jsxs("p",{className:"text-xs text-text-secondary mb-3",children:["Choose an appropriate model for your hardware here are some recommendations to get started. (see ",a.jsx("a",{href:"https://ollama.com/search",target:"_blank",rel:"noopener noreferrer",className:"text-accent-primary hover:underline",children:"ollama.com/search"})," for more models)"]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between p-2 bg-white/5 rounded border border-white/10",children:[a.jsx("div",{children:a.jsx("span",{className:"text-xs font-mono text-text-primary",children:"deepseek-r1:8b (recommended)"})}),a.jsx("button",{onClick:()=>navigator.clipboard.writeText("ollama pull deepseek-r1:8b"),className:"text-xs bg-accent-primary/20 text-accent-primary px-2 py-1 rounded hover:bg-accent-primary/30 transition-colors",children:"Copy Command"})]}),a.jsxs("div",{className:"flex items-center justify-between p-2 bg-white/5 rounded border border-white/10",children:[a.jsx("div",{children:a.jsx("span",{className:"text-xs font-mono text-text-primary",children:"gpt-oss:20b"})}),a.jsx("button",{onClick:()=>navigator.clipboard.writeText("ollama pull gpt-oss:20b"),className:"text-xs bg-accent-primary/20 text-accent-primary px-2 py-1 rounded hover:bg-accent-primary/30 transition-colors",children:"Copy Command"})]}),a.jsxs("div",{className:"flex items-center justify-between p-2 bg-white/5 rounded border border-white/10",children:[a.jsx("div",{children:a.jsx("span",{className:"text-xs font-mono text-text-primary",children:"qwen3:8b"})}),a.jsx("button",{onClick:()=>navigator.clipboard.writeText("ollama pull qwen3:8b"),className:"text-xs bg-accent-primary/20 text-accent-primary px-2 py-1 rounded hover:bg-accent-primary/30 transition-colors",children:"Copy Command"})]})]})]}),a.jsxs("div",{className:"bg-black/40 rounded-lg p-4",children:[a.jsx("h5",{className:"text-xs font-semibold text-text-primary uppercase tracking-wider mb-3",children:"Troubleshooting"}),a.jsxs("div",{className:"space-y-2 text-xs",children:[a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-red-400",children:""}),a.jsxs("span",{className:"text-text-secondary",children:[a.jsx("strong",{children:"Connection errors:"})," Restart Ollama or check if it's running on port 11434"]})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-red-400",children:""}),a.jsxs("span",{className:"text-text-secondary",children:[a.jsx("strong",{children:"Slow responses:"})," Try smaller models or close GPU-intensive applications"]})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-red-400",children:""}),a.jsxs("span",{className:"text-text-secondary",children:[a.jsx("strong",{children:"Memory errors:"})," Use 3B models or increase system RAM"]})]})]})]})]})]}),!y&&t.length===0&&a.jsxs("div",{className:"p-4 bg-yellow-500/10 border border-yellow-500/20 rounded-lg",children:[a.jsxs("p",{className:"text-sm text-yellow-400 font-semibold flex items-center gap-2",children:[a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),a.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),"No AI models detected in Ollama"]}),a.jsxs("p",{className:"text-xs text-yellow-300 mt-2",children:["Install models using: ",a.jsx("code",{className:"bg-black/40 px-2 py-1 rounded text-xs",children:"ollama pull <model-name>"})]})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("label",{className:"block text-[0.65rem] uppercase tracking-widest font-bold text-text-secondary",children:"Target Model"}),a.jsxs("div",{className:"group relative",children:[a.jsx("div",{className:"w-3.5 h-3.5 rounded-full bg-accent-primary/20 border border-accent-primary/30 flex items-center justify-center cursor-help",children:a.jsx("span",{className:"text-[8px] text-accent-primary font-bold",children:"i"})}),a.jsxs("div",{className:"absolute left-full top-0 ml-2 w-64 p-3 bg-bg-darker border border-white/20 rounded-lg shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-[9999]",children:[a.jsx("p",{className:"text-[11px] text-text-primary leading-relaxed mb-3",children:"Choose a model based on your GPU VRAM and performance needs. Larger models offer better quality but require more resources."}),a.jsxs("div",{className:"border-t border-white/10 pt-2",children:[a.jsx("p",{className:"text-[10px] text-accent-primary font-semibold mb-2",children:"VRAM-Based Recommendations:"}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex justify-between text-[10px]",children:[a.jsx("span",{className:"text-text-secondary",children:"8GB VRAM:"}),a.jsx("span",{className:"text-text-primary font-mono",children:"llama3.2:3b, qwen2.5:3b"})]}),a.jsxs("div",{className:"flex justify-between text-[10px]",children:[a.jsx("span",{className:"text-text-secondary",children:"12GB VRAM:"}),a.jsx("span",{className:"text-text-primary font-mono",children:"llama3.2:7b, qwen2.5:7b"})]}),a.jsxs("div",{className:"flex justify-between text-[10px]",children:[a.jsx("span",{className:"text-text-secondary",children:"16GB VRAM:"}),a.jsx("span",{className:"text-text-primary font-mono",children:"llama3.2:13b, qwen2.5:14b"})]}),a.jsxs("div",{className:"flex justify-between text-[10px]",children:[a.jsx("span",{className:"text-text-secondary",children:"24GB+ VRAM:"}),a.jsx("span",{className:"text-text-primary font-mono",children:"llama3.2:70b, qwen2.5:32b"})]})]})]}),a.jsx("div",{className:"absolute right-full top-1/2 -translate-y-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-bg-darker"})]})]})]}),a.jsx("input",{type:"text",value:u.model,onChange:D=>f({...u,model:D.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-text-primary focus:border-accent-primary outline-none transition-all",placeholder:"llama3.2, qwen3:8b, deepseek-r1:8b"}),!R&&a.jsxs("div",{className:"mt-3 p-3 bg-accent-alert/10 border border-accent-alert/20 rounded-lg",children:[a.jsxs("p",{className:"text-xs text-accent-alert mb-2 font-semibold flex items-center gap-2",children:[a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),a.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),"AI model not detected locally"]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-[10px] text-text-secondary font-bold",children:"You can view / download models from Ollama using the terminal:"}),a.jsxs("div",{className:"relative group/copy",children:[a.jsx("code",{className:"block bg-black/40 p-2 pr-10 rounded text-[10px] text-green-400 font-mono transition-all overflow-hidden text-ellipsis whitespace-nowrap",children:"ollama list"}),a.jsx("code",{className:"block bg-black/40 p-2 pr-10 rounded text-[10px] text-green-400 font-mono transition-all overflow-hidden text-ellipsis whitespace-nowrap",children:"ollama pull modelName:size"}),a.jsx("button",{onClick:b,className:"absolute right-1 top-1/2 -translate-y-1/2 text-text-secondary hover:text-accent-primary transition-colors p-1.5 bg-bg-card/50 rounded-md",title:"Copy to clipboard",children:m?a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"4",className:"text-accent-secondary animate-in zoom-in duration-300",children:a.jsx("polyline",{points:"20 6 9 17 4 12"})}):a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),a.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]})})]}),t.length>0&&a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"text-[10px] text-text-secondary font-bold pt-2",children:"or select from these installed models:"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:t.slice(0,5).map(D=>a.jsx("button",{onClick:()=>f({...u,model:D}),className:"text-[9px] bg-white/5 hover:bg-accent-primary/20 border border-white/10 rounded px-2 py-1 text-text-primary transition-all",children:D},D))})]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("label",{className:"block text-[0.65rem] uppercase tracking-widest font-bold text-text-secondary",children:"Context Window (num_ctx)"}),a.jsxs("div",{className:"group relative",children:[a.jsx("div",{className:"w-3.5 h-3.5 rounded-full bg-accent-primary/20 border border-accent-primary/30 flex items-center justify-center cursor-help",children:a.jsx("span",{className:"text-[8px] text-accent-primary font-bold",children:"i"})}),a.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-80 p-3 bg-bg-darker border border-white/20 rounded-lg shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50",children:[a.jsx("p",{className:"text-[11px] text-text-primary leading-relaxed mb-3",children:"Total tokens model can remember (input + output). Larger values allow longer conversations but use more VRAM."}),a.jsxs("div",{className:"border-t border-white/10 pt-2",children:[a.jsx("p",{className:"text-[10px] text-accent-primary font-semibold mb-2",children:"Context Size Recommendations:"}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex justify-between text-[10px]",children:[a.jsx("span",{className:"text-text-secondary",children:"8GB VRAM:"}),a.jsx("span",{className:"text-text-primary font-mono",children:"2048 to 4096"})]}),a.jsxs("div",{className:"flex justify-between text-[10px]",children:[a.jsx("span",{className:"text-text-secondary",children:"12GB VRAM:"}),a.jsx("span",{className:"text-text-primary font-mono",children:"4096 to 8192"})]}),a.jsxs("div",{className:"flex justify-between text-[10px]",children:[a.jsx("span",{className:"text-text-secondary",children:"16GB VRAM:"}),a.jsx("span",{className:"text-text-primary font-mono",children:"8192 to 16384"})]}),a.jsxs("div",{className:"flex justify-between text-[10px]",children:[a.jsx("span",{className:"text-text-secondary",children:"24GB+ VRAM:"}),a.jsx("span",{className:"text-text-primary font-mono",children:"16384 to 24000"})]})]})]}),a.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-bg-darker"})]})]})]}),a.jsx("input",{type:"number",value:u.numCtx,onChange:D=>f({...u,numCtx:parseInt(D.target.value)}),className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-text-primary focus:border-accent-primary outline-none transition-all",placeholder:Xt.toString()})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("label",{className:"block text-[0.65rem] uppercase tracking-widest font-bold text-text-secondary",children:"Max Predict (num_predict)"}),a.jsxs("div",{className:"group relative",children:[a.jsx("div",{className:"w-3.5 h-3.5 rounded-full bg-accent-primary/20 border border-accent-primary/30 flex items-center justify-center cursor-help",children:a.jsx("span",{className:"text-[8px] text-accent-primary font-bold",children:"i"})}),a.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-80 p-3 bg-bg-darker border border-white/20 rounded-lg shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50",children:[a.jsx("p",{className:"text-[11px] text-text-primary leading-relaxed mb-3",children:"Maximum tokens in model's response (output only). Higher values allow longer answers but must fit within context window."}),a.jsxs("div",{className:"border-t border-white/10 pt-2",children:[a.jsx("p",{className:"text-[10px] text-accent-primary font-semibold mb-2",children:"Prediction Size Recommendations:"}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex justify-between text-[10px]",children:[a.jsx("span",{className:"text-text-secondary",children:"8GB VRAM:"}),a.jsx("span",{className:"text-text-primary font-mono",children:"4096 to 8192"})]}),a.jsxs("div",{className:"flex justify-between text-[10px]",children:[a.jsx("span",{className:"text-text-secondary",children:"12GB VRAM:"}),a.jsx("span",{className:"text-text-primary font-mono",children:"8192 to 16384"})]}),a.jsxs("div",{className:"flex justify-between text-[10px]",children:[a.jsx("span",{className:"text-text-secondary",children:"16GB VRAM:"}),a.jsx("span",{className:"text-text-primary font-mono",children:"16384 to 24000"})]}),a.jsxs("div",{className:"flex justify-between text-[10px]",children:[a.jsx("span",{className:"text-text-secondary",children:"24GB+ VRAM:"}),a.jsx("span",{className:"text-text-primary font-mono",children:"24000 to 32000"})]})]})]}),a.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-bg-darker"})]})]})]}),a.jsx("input",{type:"number",value:u.numPredict,onChange:D=>f({...u,numPredict:parseInt(D.target.value)}),className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-text-primary focus:border-accent-primary outline-none transition-all",placeholder:en.toString()})]})]}),a.jsxs("div",{className:"p-4 bg-accent-secondary/10 border border-accent-secondary/20 rounded-xl",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"block text-[0.65rem] uppercase tracking-widest font-bold text-accent-secondary mb-1",children:"Enable Thinking Mode"}),a.jsx("p",{className:"text-[10px] text-text-secondary leading-relaxed",children:"Uses chain-of-thought reasoning for deeper analysis. Requires a thinking-capable model (deepseek-r1, qwen3, gpt-oss)."})]}),a.jsx("button",{onClick:()=>f({...u,enableThinking:!u.enableThinking}),className:`relative w-14 h-7 rounded-full transition-all duration-300 ${u.enableThinking?"bg-accent-secondary":"bg-white/10 border border-white/20"}`,children:a.jsx("div",{className:`absolute top-1 w-5 h-5 rounded-full bg-white shadow-lg transition-all duration-300 ${u.enableThinking?"left-8":"left-1"}`})})]}),u.enableThinking&&a.jsx("div",{className:"mt-3 pt-3 border-t border-accent-secondary/20",children:a.jsxs("p",{className:"text-[9px] text-accent-secondary/80 flex items-center gap-2",children:[a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),a.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),"AI reasoning trace will appear in the Narrative section"]})})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsx("h3",{className:"text-lg font-medium text-text-primary mb-4",children:"Sentiment Analysis Settings"}),a.jsx("div",{children:a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:$l.map(D=>a.jsxs("button",{onClick:()=>S(D.id),className:`p-4 rounded-lg border transition-all text-left ${(u.sentimentProfile||"balanced")===D.id&&!x?"bg-accent-primary/20 border-accent-primary text-text-primary":"bg-white/5 border-white/10 text-text-secondary hover:bg-white/10"}`,children:[a.jsx("div",{className:"font-medium text-sm mb-1",children:D.name}),a.jsx("div",{className:"text-xs text-text-tertiary",children:D.description})]},D.id))})}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-text-primary mb-3",children:"Current Guidelines"}),a.jsx("div",{className:"bg-black/30 border border-white/10 rounded-lg p-4 max-h-40 overflow-y-auto",children:a.jsx("pre",{className:"text-sm text-text-secondary whitespace-pre-wrap",children:F.guidelines})})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h4",{className:"text-sm font-medium text-text-primary",children:"Custom Weights"}),a.jsxs("div",{className:"flex gap-2",children:[!x&&a.jsx("button",{onClick:()=>{v(!0);const D=F.weights;C(D),f({...u,sentimentProfile:"custom",customSentimentWeights:D})},className:"px-3 py-1 bg-accent-primary/20 text-accent-primary rounded text-sm hover:bg-accent-primary/30 transition-colors",children:"Customize"}),a.jsx("button",{onClick:z,className:"px-3 py-1 bg-white/10 text-text-secondary rounded text-sm hover:bg-white/20 transition-colors",children:"Reset to Default"})]})]}),x&&k&&a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(k).map(([D,U])=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg border border-white/10",children:[a.jsx("label",{className:"text-sm text-text-secondary capitalize min-w-[120px]",children:D.replace(/([A-Z])/g," $1").trim()}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("input",{type:"range",min:"-5",max:"5",step:"0.5",value:U,onChange:ie=>T(D,parseFloat(ie.target.value)),className:"w-32"}),a.jsxs("span",{className:"text-sm text-text-primary w-12 text-right font-mono",children:[U>0?"+":"",U]})]})]},D))}),!x&&a.jsx("div",{className:"bg-black/30 border border-white/10 rounded-lg p-4",children:a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(F.weights).map(([D,U])=>a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-xs text-text-tertiary capitalize mb-1",children:D.replace(/([A-Z])/g," $1").trim()}),a.jsxs("div",{className:"text-lg font-mono text-text-primary",children:[U>0?"+":"",U]})]},D))})})]}),a.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-lg p-4",children:[a.jsx("h4",{className:"text-sm font-medium text-blue-300 mb-2",children:"How This Affects Analysis"}),a.jsx("p",{className:"text-xs text-blue-200 leading-relaxed",children:"Sentiment profiles determine how AI interprets and classifies the emotional tone of news events. Different profiles may classify the same event differently based on their weighting system. Custom weights allow you to fine-tune analysis according to your specific needs and perspective."})]})]}),a.jsxs("div",{className:"pt-4 flex gap-3",children:[a.jsx("button",{onClick:_,className:"flex-1 py-3 bg-accent-primary text-white rounded-xl font-bold uppercase tracking-widest text-xs hover:opacity-90 transition-all",children:"Apply & Save"}),a.jsx("button",{onClick:()=>{f(e),c(!1)},className:"py-3 px-6 bg-white/5 text-text-secondary border border-white/10 rounded-xl font-bold uppercase tracking-widest text-[10px] hover:bg-white/10 transition-all",children:"Cancel"})]})]})]})}):a.jsxs("button",{onClick:()=>c(!0),className:"bottom-6 right-6 z-50 p-3 bg-bg-card backdrop-blur-xl border border-white/10 rounded-lg shadow-2xl hover:border-accent-primary/50 transition-all group px-4 py-2",children:[a.jsx("p",{className:"text-[10px] uppercase text-text-secondary font-bold tracking-widest mb-1",children:"AI Settings"}),a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-text-secondary group-hover:text-accent-primary group-hover:rotate-45 transition-all mx-auto flex max-w-sm items-center",children:[a.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.1a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),a.jsx("circle",{cx:"12",cy:"12",r:"3"})]})]})}function p0(){const[e,t]=I.useState(!1),[r,s]=I.useState({defaultFeeds:[],userFeeds:[]}),[o,c]=I.useState({name:"",url:"",category:""}),[u,f]=I.useState(""),[m,g]=I.useState(!1);I.useEffect(()=>{e&&x()},[e]);const x=()=>{try{const R=Py();s(R)}catch(R){console.error("Failed to load RSS settings:",R)}},v=async R=>{try{if(g(!0),f(""),!new URL(R).protocol.startsWith("http"))throw new Error("URL must start with http:// or https://");const _=await fetch(R,{method:"HEAD",signal:AbortSignal.timeout(5e3)});if(!_.ok)throw new Error(`HTTP ${_.status}: ${_.statusText}`);const S=_.headers.get("content-type")||"";return!S.includes("xml")&&!S.includes("rss")&&console.warn("Content type may not be RSS:",S),!0}catch(b){return f(b instanceof Error?b.message:"Invalid RSS feed URL"),!1}finally{g(!1)}},y=R=>{const b=r.defaultFeeds.find(_=>_.url===R);b&&(Ey(R,!b.enabled),x())},j=async()=>{if(!o.name.trim()||!o.url.trim()){f("Name and URL are required");return}if(await v(o.url))try{Ty({name:o.name.trim(),url:o.url.trim(),category:o.category.trim(),enabled:!0}),c({name:"",url:"",category:"Custom"}),f(""),x()}catch{f("Failed to add feed")}},k=R=>{Ly(R),x()},C=()=>{console.log("RSS settings saved"),t(!1)};return e?a.jsx(Go,{isOpen:e,onClose:()=>t(!1),modalId:"rss-settings-modal",children:a.jsxs("div",{className:"bg-bg-card border border-white/10 rounded-2xl p-8 max-w-6xl w-full max-h-[90vh] overflow-y-auto relative",children:[a.jsxs("h3",{className:"text-2xl font-display font-bold text-white mb-6 flex items-center gap-3",children:[a.jsx("span",{className:"w-1 h-6 bg-accent-primary rounded-full"}),"RSS Feed Settings"]}),a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"bg-bg-darker/30 border border-white/10 rounded-xl p-6",children:[a.jsxs("h4",{className:"text-lg font-semibold text-text-primary mb-4 flex items-center gap-2",children:[a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("path",{d:"M9 12l2 2 4-4"})]}),"Known RSS Sources"]}),a.jsx("p",{className:"text-sm text-text-secondary mb-6",children:"Toggle RSS sources on or off. Disabled sources won't be included in your news feed."}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Km.map(R=>{const b=r.defaultFeeds.find(S=>S.url===R.url),_=(b==null?void 0:b.enabled)??!0;return a.jsx("div",{className:`bg-white/5 border rounded-lg p-4 transition-all hover:bg-white/10 ${_?"border-accent-primary/50 bg-accent-primary/5":"border-white/10"}`,children:a.jsxs("div",{className:"flex items-center gap-3",children:[R.logo?a.jsxs(a.Fragment,{children:[a.jsx("img",{src:R.logo,alt:R.source,className:"w-8 h-8 object-contain rounded",onError:S=>{const T=S.target;T.style.display="none";const z=T.nextElementSibling;z&&(z.style.display="flex")}}),a.jsx("div",{className:"w-8 h-8 bg-accent-primary/20 rounded items-center justify-center text-xs text-accent-primary font-bold",style:{display:"none"},children:R.source.charAt(0)})]}):a.jsx("div",{className:"w-8 h-8 bg-accent-primary/20 rounded flex items-center justify-center text-xs text-accent-primary font-bold",children:R.source.charAt(0)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"font-medium text-text-primary text-sm truncate",children:R.source}),a.jsx("div",{className:"text-xs text-text-tertiary",children:R.category})]}),a.jsx("button",{onClick:()=>y(R.url),className:`relative w-12 h-6 rounded-full transition-all duration-300 ${_?"bg-accent-primary":"bg-white/10 border border-white/20"}`,children:a.jsx("div",{className:`absolute top-1 w-4 h-4 rounded-full bg-white shadow-lg transition-all duration-300 ${_?"left-7":"left-1"}`})})]})},R.url)})})]}),a.jsxs("div",{className:"bg-bg-darker/30 border border-white/10 rounded-xl p-6",children:[a.jsxs("h4",{className:"text-lg font-semibold text-text-primary mb-4 flex items-center gap-2",children:[a.jsxs("svg",{fill:"#ffffff",height:"15px",width:"15px",version:"1.1",id:"Layer_1",viewBox:"-271 273 256 256",stroke:"#ffffff",children:[a.jsx("g",{id:"SVGRepo_bgCarrier","stroke-width":"0"}),a.jsx("g",{id:"SVGRepo_tracerCarrier","stroke-linecap":"round","stroke-linejoin":"round"}),a.jsxs("g",{id:"SVGRepo_iconCarrier",children:[" ",a.jsxs("g",{children:[" ",a.jsx("path",{d:"M-271,360v48.9c31.9,0,62.1,12.6,84.7,35.2c22.6,22.6,35.1,52.8,35.1,84.8v0.1h49.1c0-46.6-19-88.7-49.6-119.4 C-182.2,379-224.4,360.1-271,360z"})," ",a.jsx("path",{d:"M-237,460.9c-9.4,0-17.8,3.8-24,10s-10,14.6-10,24c0,9.3,3.8,17.7,10,23.9c6.2,6.1,14.6,9.9,24,9.9s17.8-3.7,24-9.9 s10-14.6,10-23.9c0-9.4-3.8-17.8-10-24C-219.2,464.7-227.6,460.9-237,460.9z"})," ",a.jsx("path",{d:"M-90.1,348.1c-46.3-46.4-110.2-75.1-180.8-75.1v48.9C-156.8,322-64.1,414.9-64,529h49C-15,458.4-43.7,394.5-90.1,348.1z"})," "]})," "]})]}),"Custom RSS Feeds"]}),a.jsx("p",{className:"text-sm text-text-secondary mb-6",children:"Add your own RSS feeds. URLs will be validated to ensure they're valid XML RSS feeds."}),a.jsxs("div",{className:"bg-black/30 border border-white/10 rounded-lg p-4 mb-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[a.jsx("input",{type:"text",placeholder:"Feed Name",value:o.name,onChange:R=>c({...o,name:R.target.value}),className:"bg-white/5 border border-white/10 rounded-lg p-3 text-text-primary focus:border-accent-primary outline-none transition-all"}),a.jsx("input",{type:"url",placeholder:"https://example.com/rss.xml",value:o.url,onChange:R=>c({...o,url:R.target.value}),className:"bg-white/5 border border-white/10 rounded-lg p-3 text-text-primary focus:border-accent-primary outline-none transition-all"}),a.jsx("input",{type:"text",placeholder:"Category",value:o.category,onChange:R=>c({...o,category:R.target.value}),className:"bg-white/5 border border-white/10 rounded-lg p-3 text-text-primary focus:border-accent-primary outline-none transition-all"})]}),u&&a.jsx("div",{className:"mb-4 p-3 bg-red-500/10 border border-red-500/20 rounded-lg",children:a.jsx("p",{className:"text-sm text-red-400",children:u})}),a.jsx("button",{onClick:j,disabled:m,className:"px-4 py-2 bg-accent-primary text-white rounded-lg font-medium hover:bg-accent-primary/80 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:m?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Validating..."]}):a.jsxs(a.Fragment,{children:[a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"Add Feed"]})})]}),r.userFeeds.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("h5",{className:"text-sm font-medium text-text-primary mb-3",children:"Your Custom Feeds"}),r.userFeeds.map(R=>a.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-lg p-3 flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"font-medium text-text-primary text-sm truncate",children:R.name}),a.jsx("div",{className:"text-xs text-text-tertiary truncate",children:R.url}),a.jsx("div",{className:"text-xs text-accent-primary",children:R.category})]}),a.jsx("button",{onClick:()=>k(R.id),className:"ml-3 p-2 text-text-secondary hover:text-red-400 transition-colors",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M3 6h18"}),a.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),a.jsx("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]},R.id))]})]}),a.jsxs("div",{className:"pt-4 flex gap-3",children:[a.jsx("button",{onClick:C,className:"flex-1 py-3 bg-accent-primary text-white rounded-xl font-bold uppercase tracking-widest text-xs hover:opacity-90 transition-all",children:"Apply & Save"}),a.jsx("button",{onClick:()=>t(!1),className:"py-3 px-6 bg-white/5 text-text-secondary border border-white/10 rounded-xl font-bold uppercase tracking-widest text-[10px] hover:bg-white/10 transition-all",children:"Cancel"})]})]})]})}):a.jsxs("button",{onClick:()=>t(!0),className:"bottom-6 left-6 z-50 p-3 bg-bg-card backdrop-blur-xl border border-white/10 rounded-lg shadow-2xl hover:border-accent-primary/50 transition-all group px-4 py-2",children:[a.jsx("p",{className:"text-[10px] uppercase text-text-secondary font-bold tracking-widest mb-1",children:"RSS Settings"}),a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-text-secondary group-hover:text-accent-primary transition-all mx-auto flex max-w-sm items-center",children:[a.jsx("path",{d:"M4 11h16"}),a.jsx("path",{d:"M4 4h16"}),a.jsx("path",{d:"M4 18h7"})]})]})}function g0(){const{narrative:e,signals:t,insights:r,foreignRelations:s,bigPicture:o,aiConfig:c}=gt(),[u,f]=I.useState([]),[m,g]=I.useState(""),[x,v]=I.useState(!1),[y,j]=I.useState([]),k=I.useRef(null),C=I.useRef(null),[R,b]=I.useState(!0),[_,S]=I.useState(!0),[T,z]=I.useState(!0),[F,D]=I.useState(!1),[U,ie]=I.useState(!1),[Y,le]=I.useState(!1),[fe,we]=I.useState(!1),[M,G]=I.useState(null);I.useEffect(()=>{var X;!x&&u.length>0&&((X=k.current)==null||X.scrollIntoView({behavior:"smooth",block:"nearest"}))},[x,u]),I.useEffect(()=>{var X;!x&&u.length>0&&((X=C.current)==null||X.focus())},[x,u.length]),I.useEffect(()=>{(async()=>{try{const{StorageService:ue}=await Er(async()=>{const{StorageService:ct}=await Promise.resolve().then(()=>xh);return{StorageService:ct}},void 0),Be=await ue.getGlobal("prediction_history");Be&&Array.isArray(Be)&&j(Be)}catch(ue){console.error("Failed to load predictions for chat context",ue)}})()},[]),I.useEffect(()=>{fe&&!M&&(async()=>{try{const{StorageService:ue}=await Er(async()=>{const{StorageService:es}=await Promise.resolve().then(()=>xh);return{StorageService:es}},void 0),Be=new Date;Be.setDate(Be.getDate()-1);const ct=Be.getFullYear(),Ct=String(Be.getMonth()+1).padStart(2,"0"),In=String(Be.getDate()).padStart(2,"0"),un=`${ct}-${Ct}-${In}`,ir=await ue.getAnalysis(un);ir&&G(ir)}catch(ue){console.error("Failed to load yesterday's data",ue)}})()},[fe,M]);const Z=()=>{const X=[];if(X.push("You are an elite intelligence analyst assistant."),R&&X.push(`CURRENT SITUATION BRIEFING (TODAY):
${e}`),fe&&M&&(X.push(`YESTERDAY'S BRIEFING (${M.date}):
${M.narrative}`),M.signals&&X.push(`YESTERDAY'S SIGNALS:
${M.signals.map(ue=>`- ${ue.text}`).slice(0,5).join(`
`)}`)),_&&X.push(`SIGNALS (TODAY):
${t.map(ue=>`- ${ue.text} (${ue.sentiment})`).join(`
`)}`),T&&X.push(`INSIGHTS:
${r.map(ue=>`- ${ue.text}`).join(`
`)}`),F&&X.push(`FOREIGN RELATIONS:
${s.map(ue=>`- ${ue.countryA} <-> ${ue.countryB}: ${ue.status} (${ue.sentiment}) [${ue.topic}]`).join(`
`)}`),U&&o&&X.push(`THE BIG PICTURE (HISTORICAL):
${o.summary}
Timeline Events: ${o.timeline.length}`),Y&&y.length>0){const ue=y[0];X.push(`LATEST PROJECTION (${ue.topic}):
Short Term: ${ue.data.shortTerm}
Medium Term: ${ue.data.mediumTerm}
Long Term: ${ue.data.longTerm}`)}return X.push("Use this context to answer questions. Be concise, professional, and insightful."),X.join(`

`)},ee=Z(),O=u.map(X=>X.content).join(" "),V=ee+O,P=Math.ceil(V.length/4),H=c.numCtx,ne=Math.min(P/H*100,100),Q=ne>90?"bg-red-500":ne>70?"bg-amber-500":"bg-emerald-500",re=X=>{b(X),S(X),z(X),D(X),ie(X),le(X),X===!1&&we(!1)},J=X=>{X.key==="Enter"&&!X.shiftKey&&(X.preventDefault(),K())},K=async()=>{if(!m.trim()||x)return;const X={role:"user",content:m},ue=[...u,X];f(ue),g(""),v(!0);try{const ct=[{role:"system",content:Z()},...ue];let Ct="";await Ie.chat(c.model,ct,In=>{Ct+=In,f(un=>un[un.length-1].role==="assistant"?[...un.slice(0,-1),{role:"assistant",content:Ct}]:[...un,{role:"assistant",content:Ct}])})}catch(Be){console.error("Chat error:",Be),f(ct=>[...ct,{role:"assistant",content:"Use the Deep Intelligence Node to retrieve context first."}])}finally{v(!1)}},Ee=X=>{const ue=X.match(/<think>([\s\S]*?)<\/think>/);if(ue){const Be=ue[1],ct=X.replace(/<think>[\s\S]*?<\/think>/,"").trim();return a.jsxs("div",{children:[a.jsxs("details",{className:"mb-2 bg-black/20 rounded p-2 text-xs border border-white/10",children:[a.jsx("summary",{className:"cursor-pointer text-accent-secondary font-mono uppercase tracking-wider opacity-70 hover:opacity-100 select-none",children:"Analysis Process"}),a.jsx("div",{className:"mt-2 text-slate-400 font-mono italic whitespace-pre-wrap",children:Be})]}),a.jsx("div",{className:"whitespace-pre-wrap",children:ct})]})}return a.jsx("div",{className:"whitespace-pre-wrap",children:X})};return a.jsxs("div",{className:"h-[750px] flex flex-col bg-bg-card/40 backdrop-blur-md rounded-2xl border border-white/5 shadow-2xl overflow-hidden",children:[a.jsxs("div",{className:"p-4 border-b border-white/5 bg-white/5 space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:"text-sm font-bold uppercase tracking-widest text-accent-primary",children:"Secure Comm Link"}),a.jsxs("div",{className:"flex items-center gap-2",children:[x&&a.jsxs("div",{className:"flex items-center gap-1 mr-2",children:[a.jsx("span",{className:"w-1.5 h-1.5 bg-accent-primary rounded-full animate-bounce [animation-delay:-0.3s]"}),a.jsx("span",{className:"w-1.5 h-1.5 bg-accent-primary rounded-full animate-bounce [animation-delay:-0.15s]"}),a.jsx("span",{className:"w-1.5 h-1.5 bg-accent-primary rounded-full animate-bounce"})]}),a.jsx("span",{className:`w-2 h-2 rounded-full ${x?"bg-accent-secondary animate-pulse":"bg-green-500"}`}),a.jsx("span",{className:"text-[10px] font-mono text-text-secondary",children:x?"THINKING...":"READY"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-[10px] uppercase text-text-secondary font-bold tracking-wider",children:"Active Context Data"}),a.jsxs("div",{className:"flex gap-1",children:[a.jsx("button",{onClick:()=>re(!0),className:"px-2 py-0.5 text-[10px] bg-white/5 hover:bg-white/10 rounded text-xs text-white",children:"All"}),a.jsx("button",{onClick:()=>re(!1),className:"px-2 py-0.5 text-[10px] bg-white/5 hover:bg-white/10 rounded text-xs text-white",children:"None"})]})]}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx(Zn,{label:"Yesterday",active:fe,onClick:()=>we(!fe)}),a.jsx("button",{className:"px-3 py-1 rounded-full text-[10px] font-bold uppercase border bg-white/5 border-white/5 text-text-secondary/50 cursor-not-allowed",title:"Premium Feature",children:"All-Time"}),a.jsx("div",{className:"w-[1px] h-6 bg-white/10 mx-1"}),a.jsx(Zn,{label:"Narrative",active:R,onClick:()=>b(!R)}),a.jsx(Zn,{label:"Signals",active:_,onClick:()=>S(!_)}),a.jsx(Zn,{label:"Insights",active:T,onClick:()=>z(!T)}),a.jsx(Zn,{label:"Relations",active:F,onClick:()=>D(!F)}),a.jsx(Zn,{label:"Big Picture",active:U,onClick:()=>ie(!U)}),a.jsx(Zn,{label:"Trajectory",active:Y,onClick:()=>le(!Y)})]}),a.jsxs("div",{className:"relative pt-1",children:[a.jsxs("div",{className:"flex justify-between items-center mb-1",children:[a.jsx("span",{className:"text-[9px] text-text-secondary uppercase",children:"Context Usage"}),a.jsxs("span",{className:"text-[9px] text-text-secondary font-mono",children:[P," / ",H," tokens (",Math.round(ne),"%)"]})]}),a.jsx("div",{className:"w-full h-1 bg-white/10 rounded-full overflow-hidden",children:a.jsx("div",{className:`h-full ${Q} transition-all duration-500`,style:{width:`${ne}%`}})})]})]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar relative",children:[u.length===0&&a.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-text-secondary/30 text-center p-8",children:[a.jsx("svg",{className:"w-12 h-12 mb-4 opacity-50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})}),a.jsx("p",{className:"text-sm font-mono uppercase tracking-widest",children:"Awaiting Input"})]}),u.map((X,ue)=>a.jsx("div",{className:`flex ${X.role==="user"?"justify-end":"justify-start"}`,children:a.jsx("div",{className:`max-w-[85%] rounded-xl p-3 text-sm ${X.role==="user"?"bg-accent-primary/20 border border-accent-primary/20 text-white rounded-tr-none":"bg-white/5 border border-white/5 text-slate-200 rounded-tl-none"}`,children:Ee(X.content)})},ue)),x&&a.jsx("div",{className:"flex justify-start animate-in fade-in duration-300",children:a.jsx("div",{className:"bg-white/5 border border-white/5 text-slate-200 rounded-xl rounded-tl-none p-3 max-w-[85%]",children:a.jsxs("div",{className:"flex items-center gap-1.5 h-5",children:[a.jsx("span",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce [animation-delay:-0.3s]"}),a.jsx("span",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce [animation-delay:-0.15s]"}),a.jsx("span",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce"})]})})}),a.jsx("div",{ref:k})]}),a.jsx("div",{className:"p-4 border-t border-white/5 bg-black/20",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx("textarea",{ref:C,value:m,onChange:X=>g(X.target.value),onKeyDown:J,placeholder:"Type your query...",className:"flex-1 bg-black/40 border border-white/10 rounded-lg px-4 py-2 text-sm text-white focus:outline-none focus:border-accent-primary/50 transition-colors resize-none min-h-[40px] max-h-32",disabled:x,rows:1}),a.jsx("button",{onClick:K,disabled:x||!m.trim(),className:"px-4 py-2 bg-accent-primary/20 hover:bg-accent-primary/40 border border-accent-primary/30 text-accent-primary rounded-lg transition-colors disabled:opacity-50",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),a.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]})})]})})]})}function Zn({label:e,active:t,onClick:r}){return a.jsx("button",{onClick:r,className:`px-3 py-1 rounded-full text-[10px] font-bold uppercase transition-all border ${t?"bg-accent-primary/20 border-accent-primary text-accent-primary shadow-[0_0_10px_rgba(59,130,246,0.2)]":"bg-white/5 border-white/10 text-text-secondary hover:bg-white/10"}`,children:e})}function x0(){const{narrative:e,signals:t,insights:r,aiConfig:s}=gt(),[o,c]=I.useState(""),[u,f]=I.useState(null),[m,g]=I.useState(null),[x,v]=I.useState([]),[y,j]=I.useState(!1);I.useEffect(()=>{(async()=>{const b=await pe.getGlobal("prediction_history");b&&Array.isArray(b)&&v(b)})()},[]);const k=async()=>{if(!o.trim()||y)return;j(!0);const R=Array.isArray(t)?t:[],b=Array.isArray(r)?r:[],_=`
    NARRATIVE: ${e||"No narrative available."}
    SIGNALS: ${R.map(T=>T.text).join("; ")}
    INSIGHTS: ${b.map(T=>T.text).join("; ")}
    `,S=`
    Based on the provided geopolitical situation, make detailed predictions about the topic: "${o}".
    Provide three timeframes:
    1. Short Term (1-7 days)
    2. Medium Term (1-6 months)
    3. Long Term (1-3 years)

    Return the response as a valid JSON object with keys: "shortTerm", "mediumTerm", "longTerm".
    Do not include markdown formatting or explanations outside the JSON.
    
    Context:
    ${_}
    `;try{let z=await Ie.generate(s.model,S,"json",{num_ctx:32e3,num_predict:25e3});z.includes("```")&&(z=z.replace(/```json/g,"").replace(/```/g,"")),z=z.trim();let F;try{F=JSON.parse(z)}catch{console.warn("Raw JSON parse failed, attempting loose parse or fallback",z),F={shortTerm:"Model returned invalid format.",mediumTerm:"",longTerm:""}}const D={shortTerm:F.shortTerm||"No prediction generated.",mediumTerm:F.mediumTerm||"No prediction generated.",longTerm:F.longTerm||"No prediction generated."},U=new Date().toLocaleDateString(),Y=[{topic:o,date:U,data:D},...x];g(D),f({topic:o,date:U}),v(Y),await pe.saveGlobal("prediction_history",Y)}catch(T){console.error("Prediction error:",T)}finally{j(!1)}},C=async(R,b)=>{R.stopPropagation();const _=x[b],S=x.filter((T,z)=>z!==b);v(S),await pe.saveGlobal("prediction_history",S),u&&u.topic===_.topic&&u.date===_.date&&(f(null),g(null))};return a.jsxs("div",{className:"bg-bg-card/40 backdrop-blur-md rounded-2xl border border-white/5 shadow-2xl overflow-hidden p-6 space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent font-display tracking-tight",children:"Future Trajectory Analysis"}),a.jsx("p",{className:"text-xs text-text-secondary mt-1",children:"Projection Engine based on current SignalFrame data."})]}),a.jsxs("div",{className:"text-[10px] font-mono text-text-secondary uppercase tracking-widest px-3 py-1 border border-white/10 rounded-full",children:["Target: ",s.model]})]}),a.jsx("div",{className:"p-4 border-t border-white/5 bg-black/20",children:a.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[a.jsx("input",{type:"text",value:o,onChange:R=>c(R.target.value),placeholder:"Enter topic for trajectory analysis...",className:"flex-1 bg-black/40 border border-white/10 rounded-lg px-4 py-3 text-sm text-white focus:outline-none focus:border-accent-primary/50 transition-colors",disabled:y}),a.jsxs("button",{onClick:k,disabled:y||!o.trim(),className:"px-6 py-3 bg-accent-primary/20 hover:bg-accent-primary/40 border border-accent-primary/30 text-accent-primary rounded-lg transition-colors disabled:opacity-50 uppercase text-xs font-bold tracking-wider whitespace-nowrap flex items-center justify-center gap-2",children:[y&&a.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),y?"Projecting...":"Generate Trajectory"]})]})}),m&&u&&a.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-top-2 duration-500",children:[a.jsxs("div",{className:"flex items-center gap-3 px-1",children:[a.jsx("div",{className:"h-4 w-[2px] bg-accent-primary"}),a.jsxs("h4",{className:"text-sm font-mono text-white flex items-center gap-2",children:[a.jsx("span",{className:"text-accent-primary font-bold uppercase tracking-widest text-[10px]",children:"Projection:"}),u.topic,a.jsxs("span",{className:"text-[10px] text-text-secondary opacity-50 ml-2",children:["(",u.date,")"]})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[{label:"Short Term (1-7 Days)",data:m.shortTerm,color:"text-emerald-400",border:"border-emerald-500/20"},{label:"Medium Term (1-6 Months)",data:m.mediumTerm,color:"text-amber-400",border:"border-amber-500/20"},{label:"Long Term (1-3 Years)",data:m.longTerm,color:"text-rose-400",border:"border-rose-500/20"}].map(R=>a.jsxs("div",{className:`bg-white/5 rounded-xl p-5 border ${R.border} relative overflow-hidden group hover:bg-white/10 transition-colors`,children:[a.jsx("h4",{className:`text-xs font-bold uppercase tracking-widest mb-3 ${R.color} border-b border-white/5 pb-2`,children:R.label}),a.jsx("p",{className:"text-sm text-slate-300 leading-relaxed font-mono",children:R.data}),a.jsx("div",{className:"absolute top-0 right-0 p-2 opacity-10 group-hover:opacity-20 transition-opacity",children:a.jsx("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})})]},R.label))})]}),x.length>0&&a.jsxs("div",{className:"mt-8 pt-6 border-t border-white/5",children:[a.jsx("h4",{className:"text-xs font-bold text-text-secondary uppercase tracking-widest mb-4",children:"Previous Projections"}),a.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 custom-scrollbar",children:x.map((R,b)=>a.jsxs("div",{className:"group relative flex-shrink-0",children:[a.jsxs("button",{onClick:()=>{g(R.data),f({topic:R.topic,date:R.date})},className:"px-4 py-2 bg-white/5 hover:bg-white/10 border border-white/10 rounded-lg text-xs text-slate-400 transition-colors text-left min-w-[120px]",children:[a.jsx("span",{className:"text-white font-bold block mb-1 truncate max-w-[100px]",children:R.topic}),a.jsx("span",{className:"text-[10px]",children:R.date})]}),a.jsx("button",{onClick:_=>C(_,b),className:"absolute top-0 -right-1.5 w-3 h-3 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity shadow-lg z-10 border border-white/20",title:"Delete Projection",children:a.jsx("span",{className:"text-sm leading-none font-bold",children:""})})]},b))})]})]})}function v0(){const{soundVolume:e,setSoundVolume:t}=gt(),[r,s]=I.useState(!1),[o,c]=I.useState(e),[u,f]=I.useState({top:0,right:0});I.useEffect(()=>{c(e)},[e]),I.useEffect(()=>{gn.setMasterVolume(e)},[e]),I.useEffect(()=>{const y=()=>{const j=document.getElementById("volume-button");if(j){const k=j.getBoundingClientRect(),C={top:k.bottom+window.scrollY,right:window.innerWidth-k.right};return f(C),C}return null};if(r){const j=setTimeout(()=>{const k=y();if(k){const C=document.querySelector("[data-volume-panel]");C&&(C.style.top=`${k.top+8}px`,C.style.right=`${k.right}px`)}},10);return window.addEventListener("resize",y),window.addEventListener("scroll",y),()=>{clearTimeout(j),window.removeEventListener("resize",y),window.removeEventListener("scroll",y)}}},[r]),I.useEffect(()=>{const y=j=>{const k=j.target;!k.closest("#volume-button")&&!k.closest("[data-volume-panel]")&&s(!1)};if(r)return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[r]);const m=y=>{c(y),t(y)},g=()=>{const y=e>0?0:.5;m(y)},x=()=>{gn.playCompletion()},v=Math.round(o*100);return a.jsxs("div",{id:"volume-settings",children:[a.jsxs("button",{id:"volume-button",onClick:()=>s(!r),className:"bottom-6 z-50 p-3 bg-bg-card backdrop-blur-xl border border-white/10 rounded-lg shadow-2xl hover:border-accent-primary/50 transition-all group px-4 py-2",title:`Volume: ${v}%`,children:[a.jsx("p",{className:"text-[10px] uppercase text-text-secondary font-bold tracking-widest mb-1",children:"Volume Settings"}),a.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-text-secondary group-hover:text-accent-primary transition-all mx-auto flex max-w-sm items-center",children:e===0?a.jsxs(a.Fragment,{children:[a.jsx("path",{d:"M11 5L6 9H2v6h4l5 4V5z"}),a.jsx("line",{x1:"23",y1:"9",x2:"17",y2:"15"}),a.jsx("line",{x1:"17",y1:"9",x2:"23",y2:"15"})]}):e<.5?a.jsxs(a.Fragment,{children:[a.jsx("path",{d:"M11 5L6 9H2v6h4l5 4V5z"}),a.jsx("path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07"})]}):a.jsxs(a.Fragment,{children:[a.jsx("path",{d:"M11 5L6 9H2v6h4l5 4V5z"}),a.jsx("path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07"}),a.jsx("path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14"})]})})]}),r&&Uo.createPortal(a.jsx("div",{"data-volume-panel":!0,className:"fixed w-64 bg-slate-900 border border-white/10 rounded-lg shadow-xl p-4 z-[9999]",style:{top:`${u.top+8}px`,right:`${u.right}px`},children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-sm font-semibold text-text-primary",children:"Sound Effects"}),a.jsx("button",{onClick:()=>s(!1),className:"text-text-secondary hover:text-text-primary transition-colors",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between text-xs text-text-secondary",children:[a.jsx("span",{children:"Master Volume"}),a.jsxs("span",{children:[v,"%"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:g,className:"p-1 rounded hover:bg-white/10 transition-colors",title:e>0?"Mute":"Unmute",children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e===0?a.jsxs(a.Fragment,{children:[a.jsx("path",{d:"M11 5L6 9H2v6h4l5 4V5z"}),a.jsx("line",{x1:"23",y1:"9",x2:"17",y2:"15"}),a.jsx("line",{x1:"17",y1:"9",x2:"23",y2:"15"})]}):a.jsx("path",{d:"M11 5L6 9H2v6h4l5 4V5z"})})}),a.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:o,onChange:y=>m(parseFloat(y.target.value)),className:"flex-1 h-2 bg-white/10 rounded-lg appearance-none cursor-pointer slider",style:{background:`linear-gradient(to right, var(--accent-primary) 0%, var(--accent-primary) ${v}%, rgba(255,255,255,0.1) ${v}%, rgba(255,255,255,0.1) 100%)`}})]})]}),a.jsx("button",{onClick:x,className:"w-full py-2 px-3 bg-accent-primary/10 border border-accent-primary/20 text-accent-primary rounded-lg hover:bg-accent-primary/20 transition-all text-xs font-semibold uppercase tracking-widest",children:"Test Completion Sound"}),a.jsx("p",{className:"text-xs text-text-secondary leading-relaxed",children:"Sound effects play when sections complete processing. Adjust volume or mute as needed."})]})}),document.body)]})}const y0={"extremely-negative":"bg-red-600 shadow-[0_0_10px_rgba(220,38,38,0.5)]","very-negative":"bg-red-500 shadow-[0_0_10px_rgba(239,68,68,0.5)]",negative:"bg-orange-500","somewhat-negative":"bg-orange-400",neutral:"bg-slate-400",interesting:"bg-purple-500 shadow-[0_0_10px_rgba(168,85,247,0.5)]",positive:"bg-emerald-500","very-positive":"bg-emerald-400 shadow-[0_0_10px_rgba(52,211,153,0.5)]"};function bh(e){return e.split(/(\*\*.*?\*\*|\*.*?\*)/g).map((r,s)=>r.startsWith("**")&&r.endsWith("**")?a.jsx("strong",{className:"font-bold text-white",children:r.slice(2,-2)},s):r.startsWith("*")&&r.endsWith("*")?a.jsx("em",{className:"italic text-gray-300",children:r.slice(1,-1)},s):r)}function _0({content:e}){if(!e)return null;const t=e.split(`
`),r=[];let s=[];return t.forEach((o,c)=>{const u=o.trim();if(u.startsWith("### "))s.length>0&&(r.push(a.jsx("ul",{className:"list-disc list-outside ml-5 mb-4 space-y-1 text-gray-300",children:s},`list-${c}`)),s=[]),r.push(a.jsx("h3",{className:"text-lg font-bold text-accent-primary mt-6 mb-3 font-display uppercase tracking-wide",children:u.replace("### ","")},c));else if(u.startsWith("## "))s.length>0&&(r.push(a.jsx("ul",{className:"list-disc list-outside ml-5 mb-4 space-y-1 text-gray-300",children:s},`list-${c}`)),s=[]),r.push(a.jsx("h2",{className:"text-xl font-bold text-white mt-8 mb-4 font-display",children:u.replace("## ","")},c));else if(u.startsWith("- ")||u.startsWith("* ")){const f=u.substring(2);s.push(a.jsx("li",{children:bh(f)},`item-${c}`))}else u===""?s.length>0&&(r.push(a.jsx("ul",{className:"list-disc list-outside ml-5 mb-4 space-y-1 text-gray-300",children:s},`list-${c}`)),s=[]):(s.length>0&&(r.push(a.jsx("ul",{className:"list-disc list-outside ml-5 mb-4 space-y-1 text-gray-300",children:s},`list-${c}`)),s=[]),r.push(a.jsx("p",{className:"text-gray-300 leading-relaxed mb-4 text-[1.05rem]",children:bh(u)},c)))}),s.length>0&&r.push(a.jsx("ul",{className:"list-disc list-outside ml-5 mb-4 space-y-1 text-gray-300",children:s},"list-final")),a.jsx("div",{children:r})}function w0({isOpen:e,onClose:t}){const{bigPicture:r,generateBigPicture:s,isProcessingSection:o}=gt(),c=o.bigPicture,u=r&&r.timeline.length>0;return I.useEffect(()=>{e&&!r&&!c&&s()},[e,r,c,s]),e?a.jsx(Go,{isOpen:e,onClose:t,modalId:"big-picture-modal",backdropClassName:"fixed big-picture inset-0 z-50 flex items-center justify-center p-8 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",children:a.jsxs("div",{className:"w-full max-w-7xl h-[90vh] bg-[#0a0f18] border border-white/10 rounded-2xl flex flex-col overflow-hidden shadow-2xl relative ",children:[a.jsxs("div",{className:"flex items-center justify-between px-8 py-6 border-b border-white/5 bg-white/2",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"p-2 bg-accent-primary/20 rounded-lg",children:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"text-accent-primary",children:[a.jsx("path",{d:"M3 3v18h18"}),a.jsx("path",{d:"M18.7 8l-5.1 5.2-2.8-2.7L7 14.3"})]})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold font-display tracking-tight text-white",children:"The Big Picture"}),a.jsx("p",{className:"text-xs text-text-secondary uppercase tracking-widest",children:"Historical Intelligence Synthesis"})]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:s,disabled:c,className:"px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-xs font-bold uppercase tracking-wider hover:bg-white/10 transition-colors disabled:opacity-50",children:c?"Synthesizing History...":"Regenerate Analysis"}),a.jsx("button",{onClick:t,className:"p-2 hover:bg-white/10 rounded-full transition-colors",children:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})]}),a.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col lg:flex-row",children:[a.jsxs("div",{className:"w-full lg:w-1/3 bg-white/2 border-r border-white/5 overflow-y-auto p-6 scrollbar-thin scrollbar-thumb-white/10 scrollbar-track-transparent",children:[a.jsx("h3",{className:"text-sm font-bold uppercase text-text-secondary tracking-widest mb-6 sticky top-0 bg-[#0b1019]/90 backdrop-blur py-2 z-10",children:"Temporal Timeline"}),a.jsx("div",{className:"relative border-l border-white/10 ml-3 space-y-8",children:u?[...r.timeline].reverse().map((f,m)=>a.jsxs("div",{className:"pl-6 relative group",children:[a.jsx("div",{className:`absolute -left-[5px] top-1.5 w-2.5 h-2.5 rounded-full ${y0[f.sentiment]||"bg-gray-500"} ring-4 ring-[#0a0f18] transition-all group-hover:scale-125`}),a.jsx("div",{className:"mb-1 flex items-center gap-2",children:a.jsx("span",{className:"text-[10px] font-mono font-bold text-accent-secondary bg-accent-secondary/10 px-1.5 py-0.5 rounded",children:f.date})}),a.jsx("h4",{className:"text-sm font-bold text-gray-200 mb-1 leading-snug",children:f.title}),a.jsx("p",{className:"text-xs text-text-secondary leading-relaxed line-clamp-2 hover:line-clamp-none transition-all",children:f.summary})]},m)):a.jsx("div",{className:"pl-6 text-sm text-gray-500 italic",children:"No historical data available..."})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-8 lg:p-12 relative",children:[c?a.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-[#0a0f18]/80 backdrop-blur-sm z-20",children:[a.jsx("div",{className:"w-16 h-16 border-4 border-accent-primary/30 border-t-accent-primary rounded-full animate-spin mb-4"}),a.jsx("p",{className:"text-accent-primary font-mono text-sm animate-pulse",children:"INGESTING TELESCOPIC DATA..."})]}):null,a.jsxs("div",{className:"max-w-3xl mx-auto",children:[a.jsxs("div",{className:"mb-8 p-6 bg-gradient-to-br from-indigo-500/10 to-purple-500/10 border border-white/10 rounded-2xl relative overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-20",children:a.jsxs("svg",{width:"100",height:"100",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",className:"text-white",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("circle",{cx:"12",cy:"12",r:"6"}),a.jsx("circle",{cx:"12",cy:"12",r:"2"})]})}),a.jsx("h3",{className:"text-lg font-bold text-white mb-2 font-display",children:"Grand Strategy Assessment"}),a.jsxs("p",{className:"text-sm text-gray-400",children:["Comprehensive analysis of ",(r==null?void 0:r.timeline.length)||0," data points across the observed timeframe."]})]}),a.jsx("article",{className:"prose prose-invert prose-lg max-w-none",children:r!=null&&r.summary?a.jsx(_0,{content:r.summary}):a.jsx("div",{className:"text-gray-300 italic",children:"Waiting for analysis..."})}),u&&a.jsxs("div",{className:"mt-12 grid grid-cols-2 md:grid-cols-4 gap-4 pt-8 border-t border-white/10",children:[a.jsxs("div",{className:"bg-white/5 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-white",children:r.timeline.length}),a.jsx("div",{className:"text-[10px] uppercase tracking-widest text-gray-500",children:"Days Analyzed"})]}),a.jsxs("div",{className:"bg-white/5 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-accent-secondary",children:r.timeline.filter(f=>f.sentiment.includes("negative")).length}),a.jsx("div",{className:"text-[10px] uppercase tracking-widest text-gray-500",children:"Crisis Points"})]})]})]})]})]})]})}):null}function b0(){const{isProcessing:e,lastUpdated:t,refresh:r,currentDate:s,availableDates:o,loadDate:c,runningModels:u,sectionGenerationTimes:f,aiConfig:m,aiStatus:g}=gt(),[x,v]=I.useState(!1),j=(()=>{const b=new Date,_=b.getFullYear(),S=String(b.getMonth()+1).padStart(2,"0"),T=String(b.getDate()).padStart(2,"0");return`${_}-${S}-${T}`})(),k=s===j,C=()=>{const b=o.indexOf(s);if(b>0)c(o[b-1]);else{const[_,S,T]=s.split("-").map(Number),z=new Date(_,S-1,T);z.setDate(z.getDate()-1);const F=z.getFullYear(),D=String(z.getMonth()+1).padStart(2,"0"),U=String(z.getDate()).padStart(2,"0");c(`${F}-${D}-${U}`)}},R=()=>{if(k)return;const b=o.indexOf(s);if(b!==-1&&b<o.length-1)c(o[b+1]);else{const[_,S,T]=s.split("-").map(Number),z=new Date(_,S-1,T);z.setDate(z.getDate()+1);const F=z.getFullYear(),D=String(z.getMonth()+1).padStart(2,"0"),U=String(z.getDate()).padStart(2,"0"),ie=`${F}-${D}-${U}`;c(ie>j?j:ie)}};return a.jsxs("div",{className:"w-full mx-auto px-8 py-8 min-h-screen bg-bg-darker text-text-primary",children:[a.jsxs("header",{className:"mb-10 flex flex-col gap-6 bg-bg-card/40 backdrop-blur-md p-6 rounded-2xl border border-white/5 shadow-2xl",children:[a.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center w-full gap-6 lg:gap-0",children:[a.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-4 md:gap-8 w-full lg:w-auto",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center mb-1",children:[a.jsx("span",{className:"status-online w-2 h-2 bg-accent-secondary rounded-full mr-2 shadow-[0_0_10px_var(--accent-secondary)] animate-pulse"}),a.jsx("span",{className:"text-[0.65rem] text-accent-secondary font-bold uppercase tracking-[0.2em]",children:"Deep Intelligence Node Active"})]}),a.jsxs("h1",{className:"m-0 text-3xl font-bold bg-gradient-to-br from-white to-slate-500 bg-clip-text text-transparent font-display tracking-tight",children:["SignalFrame ",a.jsx("span",{className:"text-sm font-mono text-slate-600 font-normal ml-2",children:"v0.3.0"})]})]}),a.jsx("div",{className:"hidden md:block h-10 w-[1px] bg-white/10"}),a.jsxs("div",{className:"flex flex-wrap gap-4 w-full lg:w-auto",children:[a.jsxs("div",{className:"bg-white/5 px-4 py-2 rounded-lg border border-white/5 flex-1 md:flex-none",children:[a.jsx("p",{className:"text-[10px] uppercase text-text-secondary font-bold tracking-widest mb-1",children:"Status"}),a.jsx("p",{className:`text-xs font-mono whitespace-nowrap ${e?"text-accent-secondary":g!=null&&g.isOnline?"text-green-500":"text-red-500"}`,children:e?"SCANNING...":g!=null&&g.isOnline?"OLLAMA ONLINE":"AI OFFLINE"})]}),t?a.jsxs("div",{className:"bg-white/5 px-4 py-2 rounded-lg border border-white/5",children:[a.jsx("p",{className:"text-[10px] uppercase text-text-secondary font-bold tracking-widest mb-1",children:"Last Sync"}),a.jsx("p",{className:"text-xs font-mono",children:t.toLocaleTimeString()})]}):a.jsxs("div",{className:"bg-white/5 px-4 py-2 rounded-lg border border-white/5",children:[a.jsx("p",{className:"text-[10px] uppercase text-text-secondary font-bold tracking-widest mb-1",children:"Last Sync"}),a.jsx("p",{className:"text-xs font-mono text-red-500",children:"never"})]}),a.jsxs("div",{className:"bg-white/5 px-4 py-2 rounded-lg border border-white/5",children:[a.jsx("p",{className:"text-[10px] uppercase text-text-secondary font-bold tracking-widest mb-1",children:"Sentiment"}),a.jsx("p",{className:"text-xs font-mono text-accent-primary",children:Gc(m.sentimentProfile||"balanced").name})]}),a.jsx("div",{className:"flex gap-2",children:u&&u.length>0?u.map(b=>a.jsxs("div",{className:"bg-white/5 px-4 py-2 rounded-lg border border-white/5 group/model relative",children:[a.jsx("p",{className:"text-[10px] uppercase text-text-secondary font-bold tracking-widest mb-1",children:"AI Model"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs font-mono text-white whitespace-nowrap",children:b.name.split(":")[0]}),a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx("span",{className:"w-1.5 h-1.5 bg-accent-secondary rounded-full animate-pulse shadow-[0_0_5px_var(--accent-secondary)]"}),a.jsxs("span",{className:"text-[9px] font-mono text-accent-secondary font-bold",children:[Math.round(b.size_vram/1024/1024/1024*10)/10,"GB"]})]})]})]},b.name)):a.jsxs("div",{className:"bg-white/5 px-4 py-2 rounded-lg border border-white/5 group/model relative",children:[a.jsx("p",{className:"text-[10px] uppercase text-text-secondary font-bold tracking-widest mb-1",children:"AI Model"}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("span",{className:`text-xs font-mono whitespace-nowrap ${g!=null&&g.isOnline&&m!=null&&m.model?"text-green-500":"text-red-500"}`,children:g!=null&&g.isOnline?(m==null?void 0:m.model)||"No Model Selected":"No AI Model Loaded"})})]})}),f["full-scan"]&&a.jsxs("div",{className:"bg-white/5 px-4 py-2 rounded-lg border border-white/5",children:[a.jsx("p",{className:"text-[10px] uppercase text-text-secondary font-bold tracking-widest mb-1",children:"Last Scan"}),a.jsx("p",{className:"text-xs font-mono text-accent-secondary",children:Xi(f["full-scan"])})]}),a.jsx(m0,{}),a.jsx(p0,{}),a.jsx(v0,{})]})]}),a.jsxs("button",{onClick:()=>v(!0),className:"bg-accent-primary/10 border border-accent-primary/20 text-accent-primary px-4 py-2 rounded-lg hover:bg-accent-primary/20 transition-all flex items-center gap-2 group flex-1 md:flex-none justify-center",children:[a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"group-hover:scale-110 transition-transform",children:[a.jsx("path",{d:"M3 3v18h18"}),a.jsx("path",{d:"M18.7 8l-5.1 5.2-2.8-2.7L7 14.3"})]}),a.jsx("span",{className:"text-xs font-bold uppercase tracking-widest whitespace-nowrap",children:"The Big Picture"})]}),a.jsx("button",{onClick:()=>r(),disabled:e,className:`w-full lg:w-auto mt-4 lg:mt-0 group relative overflow-hidden font-bold py-3 px-8 rounded-xl transition-all disabled:opacity-30 disabled:cursor-not-allowed shadow-[0_0_20px_rgba(59,130,246,0.1)] 
              ${k?"bg-accent-primary text-white hover:bg-accent-primary/90 shadow-[0_0_20px_rgba(59,130,246,0.2)]":"bg-purple-600/80 text-white hover:bg-purple-600 shadow-[0_0_20px_rgba(168,85,247,0.3)]"}`,children:a.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e?"SCANNING...":k?"SCAN WITH AI":"SCAN HISTORICAL DATA",a.jsx("svg",{className:`transition-transform duration-700 ${e?"animate-spin":"group-hover:rotate-12"}`,width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})})]})})]}),a.jsxs("div",{className:"flex items-center justify-between border-t border-white/5 pt-4",children:[a.jsxs("button",{onClick:C,className:"flex items-center gap-2 text-[0.65rem] uppercase font-bold tracking-widest text-text-secondary hover:text-accent-primary transition-all group",children:[a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",className:"transition-transform group-hover:-translate-x-1",children:a.jsx("path",{d:"m15 18-6-6 6-6"})}),a.jsx("span",{className:"hidden sm:inline",children:"Previous Day"}),a.jsx("span",{className:"sm:hidden",children:"Prev"})]}),a.jsx("div",{className:"bg-accent-primary/10 border border-accent-primary/20 px-6 py-1 rounded-full",children:a.jsx("span",{className:"text-xs font-mono font-bold text-accent-primary tracking-widest",children:(s||j).replace(/-/g," / ")})}),k?a.jsxs("div",{className:"flex items-center gap-2 text-[0.65rem] uppercase font-bold tracking-widest text-accent-secondary opacity-50 cursor-default",children:[a.jsx("span",{className:"hidden sm:inline",children:"Today - "}),j.replace(/-/g," / ")]}):a.jsxs("button",{onClick:R,className:"flex items-center gap-2 text-[0.65rem] uppercase font-bold tracking-widest text-text-secondary hover:text-accent-primary transition-all group",children:[a.jsx("span",{className:"hidden sm:inline",children:"Next Day"}),a.jsx("span",{className:"sm:hidden",children:"Next"}),a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",className:"transition-transform group-hover:translate-x-1",children:a.jsx("path",{d:"m9 18 6-6-6-6"})})]})]})]}),a.jsx("main",{className:"grid grid-cols-12 gap-8",children:a.jsxs("div",{className:"col-span-12 lg:col-span-12 space-y-8",children:[a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[a.jsx(zy,{}),a.jsx("div",{className:"grid grid-cols-1",children:a.jsx(Fy,{})})]}),a.jsxs("div",{className:"w-full",children:[a.jsxs("h2",{className:"text-sm font-bold uppercase tracking-widest text-text-secondary mb-4 flex items-center gap-2",children:[a.jsx("span",{className:"w-8 h-[1px] bg-accent-primary"}),"Deep Intelligence Suite",a.jsx("span",{className:"w-full h-[1px] bg-white/5"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsx(g0,{}),a.jsx(x0,{})]})]}),a.jsx("div",{className:"w-full",children:a.jsx("div",{className:"grid grid-cols-1",children:a.jsx(d0,{})})}),a.jsx("div",{className:"w-full",children:a.jsx(Zy,{})}),a.jsx(u0,{})]})}),a.jsxs("footer",{className:"mt-16 py-8 border-t border-white/10 text-center flex flex-col md:flex-row justify-between items-center text-text-secondary px-4 gap-4",children:[a.jsxs("p",{className:"text-[0.65rem] uppercase tracking-widest font-bold",children:[" ",new Date().getFullYear()," ",a.jsx("a",{href:"https://github.com/deepspacetrader",target:"_blank",rel:"noopener noreferrer",className:"hover:text-white transition-colors",children:"DeepSpaceTrader"}),"  SignalFrame"]}),a.jsx("p",{className:"text-[0.65rem] uppercase tracking-widest font-bold opacity-50",children:"Experimental Intelligence Framework"})]}),a.jsx(f0,{}),a.jsx(w0,{isOpen:x,onClose:()=>v(!1)})]})}el.createRoot(document.getElementById("root")).render(a.jsx(Qs.StrictMode,{children:a.jsx(b0,{})}));
